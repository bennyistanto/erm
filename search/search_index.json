{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-\\.]+"},"docs":[{"location":"","text":"Extreme rainfall monitoring, will it trigger a flood? Welcome This is a fork repository from https://github.com/wfpidn/ERM which originally developed during my service with WFP, and since I left the agency this guideline no longer maintained. So I will continue to update this at my personal Github repo. Extreme Rainfall Monitoring (ERM) is an experimental tool written in Google Earth Engine (GEE) platform. ERM are able to inform where is the estimated location of extreme rainfall and its impact to population and crop in the last 5-days and forecast up to 5-days ahead based on selected date. Some of the input was prepared via different platform: ArcGIS Pro, R Statistics, and Excel. This is the single-source documentation for ERM. It is intended to be a thorough, living document detailing the background, objective, data, method and output of ERM. If you find a mistake, please open an issue. ERM model developed by Benny Istanto and Prof. Rizaldi Boer of Climatology Laboratory - Bogor Agricultural University as Scientific Advisor. Contact For further information about Extreme Rainfall Monitoring, please contact: Benny Istanto https://github.com/bennyistanto","title":"About"},{"location":"#extreme-rainfall-monitoring-will-it-trigger-a-flood","text":"","title":"Extreme rainfall monitoring, will it trigger a flood?"},{"location":"#welcome","text":"This is a fork repository from https://github.com/wfpidn/ERM which originally developed during my service with WFP, and since I left the agency this guideline no longer maintained. So I will continue to update this at my personal Github repo. Extreme Rainfall Monitoring (ERM) is an experimental tool written in Google Earth Engine (GEE) platform. ERM are able to inform where is the estimated location of extreme rainfall and its impact to population and crop in the last 5-days and forecast up to 5-days ahead based on selected date. Some of the input was prepared via different platform: ArcGIS Pro, R Statistics, and Excel. This is the single-source documentation for ERM. It is intended to be a thorough, living document detailing the background, objective, data, method and output of ERM. If you find a mistake, please open an issue. ERM model developed by Benny Istanto and Prof. Rizaldi Boer of Climatology Laboratory - Bogor Agricultural University as Scientific Advisor.","title":"Welcome"},{"location":"#contact","text":"For further information about Extreme Rainfall Monitoring, please contact: Benny Istanto https://github.com/bennyistanto","title":"Contact"},{"location":"case/","text":"Example case Jakaarta flood, 1 January 2020 Antara Floods inundate Kampung Pulo aand Bukit Duri in Jakarta on Thursdaay 1 January 2020. Source: https://www.antaranews.com/berita/1236087/berkacalah-jakarta Twitter Indonesian President Joko Widodo tweeted about the emergency response, promising to restore public infrastructure with anti-flooding measures. Source: https://twitter.com/jokowi/status/1212554859372670976 ERM forecast Areas experience rainfall exceeding the threshold, release 5 to 1 day before the predicted event. Alert for Extreme rainfall triggering flood, release 5 to 1 day before the predicted event.","title":"Example case"},{"location":"case/#example-case","text":"Jakaarta flood, 1 January 2020 Antara Floods inundate Kampung Pulo aand Bukit Duri in Jakarta on Thursdaay 1 January 2020. Source: https://www.antaranews.com/berita/1236087/berkacalah-jakarta Twitter Indonesian President Joko Widodo tweeted about the emergency response, promising to restore public infrastructure with anti-flooding measures. Source: https://twitter.com/jokowi/status/1212554859372670976 ERM forecast Areas experience rainfall exceeding the threshold, release 5 to 1 day before the predicted event. Alert for Extreme rainfall triggering flood, release 5 to 1 day before the predicted event.","title":"Example case"},{"location":"data/","text":"Data Best options data for extreme rainfall monitoring Currently there are 2 data that are suitable for rainfall monitoring and forecasting. Rainfall monitoring (near real-time) NASA GPM (Global Precipitation Measurement - http://pmm.nasa.gov/GPM/ ) IMERG (Integrated Multi-satellite Retrievals for GPM) products. IMERG Version 06 Data IMERG is a single integrated code system for near-real and post-real time. IMERG is adjusted to Gprecip monthly climatology zonally to achieve a bias profile that is considered reasonable. Multiple runs for different user requirements for latency and accuracy \u201cEarly\u201d \u2013 4 hour (example application: flash flooding) \u201cLate\u201d \u2013 14 hour. (crop forecasting) \u201cFinal\u201d \u2013 3 months (research) TEMPORAL COVERAGE: from 1 Jun 2000 to nowadays TEMPORAL RESOLUTION: 30 minutes, daily and monthly (final only) SPATIAL COVERAGE: 60\u00b0 N \u2013 60\u00b0 S SPATIAL RESOLUTION: 0,1\u00b0 x 0,1\u00b0 VARIABLE: precipitationCal FORMAT: netCDF (nc4), Reference: https://www.unidata.ucar.edu/software/netcdf/ NAMING CONVENTION: Half-hourly - GPM_3IMERGHH 06 Daily - GPM_3IMERGD 06 Monthly - GPM_3IMERGM 06 Latency: E - Early run L - Late run F - Final run (only for daily data) Example: Half-hourly Early Run ~ GPM_3IMERGHHE 06 DOWNLOAD: 30-min Final Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHH.06/ 30-min Early Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHHE.06/ 30-min Late Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHHL.06/ Daily Final Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDF.06/ Daily Early Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDE.06/ Daily Late Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDL.06/ HOW-TO-DOWNLOAD AND AUTHORIZATION Link https://disc.gsfc.nasa.gov/data-access Rainfall forecasting NOAA - NCEP GEFS (Global Ensemble Forecast System - https://www.ncdc.noaa.gov/data-access/model-data/model-datasets/global-ensemble-forecast-system-gefs ) deterministic weather prediction model. GEFS Ensemble 0.25 deg The Global Ensemble Forecast System (GEFS) is a weather forecast model produced by the National Centers for Environmental Prediction (NCEP). The GEFS dataset consists of selected model outputs as gridded forecast variables. The 384-hour forecasts, with 3-hour forecast interval, are made at 6-hour temporal resolution (i.e. updated four times daily). TEMPORAL COVERAGE: from 15 Jan 2015 to nowadays (new version of GFS) TEMPORAL RESOLUTION: 3h, 6h, 12h, 18h, 24h upto 16 days SPATIAL COVERAGE: 90\u00b0 N \u2013 90\u00b0 S SPATIAL RESOLUTION: 0,25\u00b0 x 0,25\u00b0 VARIABLE: Total Precipitation (APCP), Reference: https://www.nco.ncep.noaa.gov/pmb/products/gens/gespr.t00z.pgrb2s.0p25.f003.shtml FORMAT: GRIB2 (grib2), Reference: https://wmoomm.sharepoint.com/ /s/wmocpdb/EUmnLNAM9WdMr1S7GRMl_G8BFqp-B1Qie-k-vMwmrG22GQ?e=cEd2Vk DATA ACCESS AWS: aws s3 ls s3://noaa-gefs-pds/ --no-sign-request Reference: https://registry.opendata.aws/noaa-gefs/ GRIB Filter: https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl? Water History Global Surface Water - JRC This dataset contains maps of the location and temporal distribution of surface water from 1984 to 2020 and provides statistics on the extent and change of those water surfaces. For more information see the associated journal article: High-resolution mapping of global surface water and its long-term changes (Nature, 2016) and the online Data Users Guide. These data were generated using 4,453,989 scenes from Landsat 5, 7, and 8 acquired between 16 March 1984 and 31 December 2020. Each pixel was individually classified into water / non-water using an expert system and the results were collated into a monthly history for the entire time period and two epochs (1984-1999, 2000-2020) for change detection. This Monthly History collection holds the entire history of water detection on a month-by-month basis. The collection contains 442 images, one for each month between March 1984 and December 2020. This data used to define historical flood occurrence Reference: https://developers.google.com/earth-engine/datasets/catalog/JRC_GSW1_3_MonthlyHistory Population, a proxy for impact analysis Global mapping of population is rapidly growing in recent years. They are available at detailed spatial scales. The analysis is based on satellite or other geospatial data layers. Population data are necessary for the analysis of impacts of population growth, monitor population changes, and intervention planning. Global Human Settlement Layer - JRC The Global Human Settlement (GHS) - http://ghsl.jrc.ec.europa.eu - framework produces global spatial information about the human presence on the planet over time. This in the form of built up maps, population density maps and settlement maps. This information is generated with evidence-based analytics and knowledge using new spatial data mining technologies. The framework uses heterogeneous data including global archives of fine-scale satellite imagery, census data, and volunteered geographic information. The data is processed fully automatically and generates analytics and knowledge reporting objectively and systematically about the presence of population and built-up infrastructures. The main datasets are offered for download as open and free data. The GHS P2016 suite consists of multitemporal products, that offers an insight into the human presence in the past: 1975, 1990, 2000, and 2014. There are three main type of products: built-up (GHS-BUILT), population (GHS-POP), city model (GHS-SMOD). The grid data are distributed as raster files in TIF format. The ZIP files contain raster files together with pyramids (i.e., TIF and OVR files). About the data Characteristic Description Function a proxy for impact analysis Variable Total population Geographic coverage Global Spatial resolution 250 meter/pixel Temporal resolution 1975, 1990, 2000, 2014, 2016 Format GeoTIFF Unit Population counts at 250m resolution Source https://ghsl.jrc.ec.europa.eu/download.php Reference https://ghsl.jrc.ec.europa.eu Cropland, a proxy for impact analysis Land cover maps represent spatial information on different types (classes) of physical coverage of the Earth's surface, e.g. forests, grasslands, croplands, lakes, wetlands. Dynamic land cover maps include transitions of land cover classes over time and hence captures land cover changes. Land use maps contain spatial information on the arrangements, activities and inputs people undertake in a certain land cover type to produce, change or maintain it. MODIS Cropland The MCD12Q1 V6 product provides global land cover types at yearly intervals (2001-2016) derived from six different classification schemes. It is derived using supervised classifications of MODIS Terra and Aqua reflectance data. The supervised classifications then undergo additional post-processing that incorporate prior knowledge and ancillary information to further refine specific classes. The MODIS Land Cover Type product is a global land cover classification data layer produced annually from 2001 through 2019 (as of this writing). For each year there are five land cover schemes, developed by different research groups. Data are distributed by the USGS at 500m resolution in standard MODIS grid tiles. These tiles use the sinusoidal projection and cover approximately 1200 x 1200 km (10\u00b0 x 10\u00b0 at the equator). The following USGS site has detailed meta data and download access: https://lpdaac.usgs.gov/dataset_discovery/modis/modis_products_table/mcd12q1 It is derived using supervised classifications of MODIS Terra and Aqua reflectance data. The supervised classifications then undergo additional post-processing that incorporate prior knowledge and ancillary information to further refine specific classes. The MODIS Terra + Aqua Land Cover Type Yearly L3 Global 500 m SIN Grid product incorporates the following five different land cover classification schemes, each derived through a supervised decision-tree classification method: Land Cover Type 1: IGBP global vegetation classification scheme Land Cover Type 2: University of Maryland (UMD) scheme Land Cover Type 3: MODIS-derived LAI/fPAR scheme Land Cover Type 4: MODIS-derived Net Primary Production (NPP) scheme Land Cover Type 5: Plant Functional Type (PFT) scheme About the data Characteristic Description Function a proxy for impact analysis Variable Land cover Geographic coverage Global Spatial resolution 500 meter/pixel Temporal resolution Annual, 2001 - 2019 Format GeoTIFF Unit Land cover at 500m resolution Source https://e4ftl01.cr.usgs.gov/MOTA/MCD12Q1.006/ Reference https://lpdaac.usgs.gov/products/mcd12q1v006/","title":"Data"},{"location":"data/#data","text":"","title":"Data"},{"location":"data/#best-options-data-for-extreme-rainfall-monitoring","text":"Currently there are 2 data that are suitable for rainfall monitoring and forecasting.","title":"Best options data for extreme rainfall monitoring"},{"location":"data/#rainfall-monitoring-near-real-time","text":"NASA GPM (Global Precipitation Measurement - http://pmm.nasa.gov/GPM/ ) IMERG (Integrated Multi-satellite Retrievals for GPM) products. IMERG Version 06 Data IMERG is a single integrated code system for near-real and post-real time. IMERG is adjusted to Gprecip monthly climatology zonally to achieve a bias profile that is considered reasonable. Multiple runs for different user requirements for latency and accuracy \u201cEarly\u201d \u2013 4 hour (example application: flash flooding) \u201cLate\u201d \u2013 14 hour. (crop forecasting) \u201cFinal\u201d \u2013 3 months (research) TEMPORAL COVERAGE: from 1 Jun 2000 to nowadays TEMPORAL RESOLUTION: 30 minutes, daily and monthly (final only) SPATIAL COVERAGE: 60\u00b0 N \u2013 60\u00b0 S SPATIAL RESOLUTION: 0,1\u00b0 x 0,1\u00b0 VARIABLE: precipitationCal FORMAT: netCDF (nc4), Reference: https://www.unidata.ucar.edu/software/netcdf/ NAMING CONVENTION: Half-hourly - GPM_3IMERGHH 06 Daily - GPM_3IMERGD 06 Monthly - GPM_3IMERGM 06 Latency: E - Early run L - Late run F - Final run (only for daily data) Example: Half-hourly Early Run ~ GPM_3IMERGHHE 06 DOWNLOAD: 30-min Final Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHH.06/ 30-min Early Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHHE.06/ 30-min Late Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHHL.06/ Daily Final Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDF.06/ Daily Early Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDE.06/ Daily Late Released https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDL.06/ HOW-TO-DOWNLOAD AND AUTHORIZATION Link https://disc.gsfc.nasa.gov/data-access","title":"Rainfall monitoring (near real-time)"},{"location":"data/#rainfall-forecasting","text":"NOAA - NCEP GEFS (Global Ensemble Forecast System - https://www.ncdc.noaa.gov/data-access/model-data/model-datasets/global-ensemble-forecast-system-gefs ) deterministic weather prediction model. GEFS Ensemble 0.25 deg The Global Ensemble Forecast System (GEFS) is a weather forecast model produced by the National Centers for Environmental Prediction (NCEP). The GEFS dataset consists of selected model outputs as gridded forecast variables. The 384-hour forecasts, with 3-hour forecast interval, are made at 6-hour temporal resolution (i.e. updated four times daily). TEMPORAL COVERAGE: from 15 Jan 2015 to nowadays (new version of GFS) TEMPORAL RESOLUTION: 3h, 6h, 12h, 18h, 24h upto 16 days SPATIAL COVERAGE: 90\u00b0 N \u2013 90\u00b0 S SPATIAL RESOLUTION: 0,25\u00b0 x 0,25\u00b0 VARIABLE: Total Precipitation (APCP), Reference: https://www.nco.ncep.noaa.gov/pmb/products/gens/gespr.t00z.pgrb2s.0p25.f003.shtml FORMAT: GRIB2 (grib2), Reference: https://wmoomm.sharepoint.com/ /s/wmocpdb/EUmnLNAM9WdMr1S7GRMl_G8BFqp-B1Qie-k-vMwmrG22GQ?e=cEd2Vk DATA ACCESS AWS: aws s3 ls s3://noaa-gefs-pds/ --no-sign-request Reference: https://registry.opendata.aws/noaa-gefs/ GRIB Filter: https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?","title":"Rainfall forecasting"},{"location":"data/#water-history","text":"","title":"Water History"},{"location":"data/#global-surface-water-jrc","text":"This dataset contains maps of the location and temporal distribution of surface water from 1984 to 2020 and provides statistics on the extent and change of those water surfaces. For more information see the associated journal article: High-resolution mapping of global surface water and its long-term changes (Nature, 2016) and the online Data Users Guide. These data were generated using 4,453,989 scenes from Landsat 5, 7, and 8 acquired between 16 March 1984 and 31 December 2020. Each pixel was individually classified into water / non-water using an expert system and the results were collated into a monthly history for the entire time period and two epochs (1984-1999, 2000-2020) for change detection. This Monthly History collection holds the entire history of water detection on a month-by-month basis. The collection contains 442 images, one for each month between March 1984 and December 2020. This data used to define historical flood occurrence Reference: https://developers.google.com/earth-engine/datasets/catalog/JRC_GSW1_3_MonthlyHistory","title":"Global Surface Water - JRC"},{"location":"data/#population-a-proxy-for-impact-analysis","text":"Global mapping of population is rapidly growing in recent years. They are available at detailed spatial scales. The analysis is based on satellite or other geospatial data layers. Population data are necessary for the analysis of impacts of population growth, monitor population changes, and intervention planning.","title":"Population, a proxy for impact analysis"},{"location":"data/#global-human-settlement-layer-jrc","text":"The Global Human Settlement (GHS) - http://ghsl.jrc.ec.europa.eu - framework produces global spatial information about the human presence on the planet over time. This in the form of built up maps, population density maps and settlement maps. This information is generated with evidence-based analytics and knowledge using new spatial data mining technologies. The framework uses heterogeneous data including global archives of fine-scale satellite imagery, census data, and volunteered geographic information. The data is processed fully automatically and generates analytics and knowledge reporting objectively and systematically about the presence of population and built-up infrastructures. The main datasets are offered for download as open and free data. The GHS P2016 suite consists of multitemporal products, that offers an insight into the human presence in the past: 1975, 1990, 2000, and 2014. There are three main type of products: built-up (GHS-BUILT), population (GHS-POP), city model (GHS-SMOD). The grid data are distributed as raster files in TIF format. The ZIP files contain raster files together with pyramids (i.e., TIF and OVR files). About the data Characteristic Description Function a proxy for impact analysis Variable Total population Geographic coverage Global Spatial resolution 250 meter/pixel Temporal resolution 1975, 1990, 2000, 2014, 2016 Format GeoTIFF Unit Population counts at 250m resolution Source https://ghsl.jrc.ec.europa.eu/download.php Reference https://ghsl.jrc.ec.europa.eu","title":"Global Human Settlement Layer - JRC"},{"location":"data/#cropland-a-proxy-for-impact-analysis","text":"Land cover maps represent spatial information on different types (classes) of physical coverage of the Earth's surface, e.g. forests, grasslands, croplands, lakes, wetlands. Dynamic land cover maps include transitions of land cover classes over time and hence captures land cover changes. Land use maps contain spatial information on the arrangements, activities and inputs people undertake in a certain land cover type to produce, change or maintain it.","title":"Cropland, a proxy for impact analysis"},{"location":"data/#modis-cropland","text":"The MCD12Q1 V6 product provides global land cover types at yearly intervals (2001-2016) derived from six different classification schemes. It is derived using supervised classifications of MODIS Terra and Aqua reflectance data. The supervised classifications then undergo additional post-processing that incorporate prior knowledge and ancillary information to further refine specific classes. The MODIS Land Cover Type product is a global land cover classification data layer produced annually from 2001 through 2019 (as of this writing). For each year there are five land cover schemes, developed by different research groups. Data are distributed by the USGS at 500m resolution in standard MODIS grid tiles. These tiles use the sinusoidal projection and cover approximately 1200 x 1200 km (10\u00b0 x 10\u00b0 at the equator). The following USGS site has detailed meta data and download access: https://lpdaac.usgs.gov/dataset_discovery/modis/modis_products_table/mcd12q1 It is derived using supervised classifications of MODIS Terra and Aqua reflectance data. The supervised classifications then undergo additional post-processing that incorporate prior knowledge and ancillary information to further refine specific classes. The MODIS Terra + Aqua Land Cover Type Yearly L3 Global 500 m SIN Grid product incorporates the following five different land cover classification schemes, each derived through a supervised decision-tree classification method: Land Cover Type 1: IGBP global vegetation classification scheme Land Cover Type 2: University of Maryland (UMD) scheme Land Cover Type 3: MODIS-derived LAI/fPAR scheme Land Cover Type 4: MODIS-derived Net Primary Production (NPP) scheme Land Cover Type 5: Plant Functional Type (PFT) scheme About the data Characteristic Description Function a proxy for impact analysis Variable Land cover Geographic coverage Global Spatial resolution 500 meter/pixel Temporal resolution Annual, 2001 - 2019 Format GeoTIFF Unit Land cover at 500m resolution Source https://e4ftl01.cr.usgs.gov/MOTA/MCD12Q1.006/ Reference https://lpdaac.usgs.gov/products/mcd12q1v006/","title":"MODIS Cropland"},{"location":"demo/","text":"Demo You can access the demo via below link: https://bennyistanto.users.earthengine.app/view/erm How to use? It's very easy. Choose a date by sliding the DateSlider Choose the number of simulation days (1 to 5 days) Click Render! Wait for a minutes, you will get the result. This app does not have download feature for all layer output, it's only accessible via GEE code user interface. To access this feature you must have an access to GEE platform, then visit https://code.earthengine.google.com/fb7cc9b41222334c47be6d6b23d70829 . If you does not have GEE account, please sign up via this link: https://earthengine.google.com/signup/","title":"Demo"},{"location":"demo/#demo","text":"You can access the demo via below link: https://bennyistanto.users.earthengine.app/view/erm","title":"Demo"},{"location":"demo/#how-to-use","text":"It's very easy. Choose a date by sliding the DateSlider Choose the number of simulation days (1 to 5 days) Click Render! Wait for a minutes, you will get the result. This app does not have download feature for all layer output, it's only accessible via GEE code user interface. To access this feature you must have an access to GEE platform, then visit https://code.earthengine.google.com/fb7cc9b41222334c47be6d6b23d70829 . If you does not have GEE account, please sign up via this link: https://earthengine.google.com/signup/","title":"How to use?"},{"location":"devplan/","text":"Summary We have some plan to improve the capabilities of PRISM/VAMPIRE by adding some features on the platform, including the ERM hazard module. The work in progress at the moment is: Landslide monitoring and early warning We try to utilized the alert generated by extreme rainfall and combining with NASA's LHASA to identify potential landslides that often go undetected and unreported. Surface runoff accumulation As ERM only able monitor or predict flood caused by extreme rainfall in a location where extreme rainfall occurred, and unable to calculate flood caused by runoff accumulation from other areas. We plan to solve this problem with an approach through surface runoff accumulation calculations. We think both activities are do able using GEE.","title":"Summary"},{"location":"devplan/#summary","text":"We have some plan to improve the capabilities of PRISM/VAMPIRE by adding some features on the platform, including the ERM hazard module. The work in progress at the moment is: Landslide monitoring and early warning We try to utilized the alert generated by extreme rainfall and combining with NASA's LHASA to identify potential landslides that often go undetected and unreported. Surface runoff accumulation As ERM only able monitor or predict flood caused by extreme rainfall in a location where extreme rainfall occurred, and unable to calculate flood caused by runoff accumulation from other areas. We plan to solve this problem with an approach through surface runoff accumulation calculations. We think both activities are do able using GEE.","title":"Summary"},{"location":"eaq/","text":"Evaluating alert quality To evaluate alert release by VAMPIRE, we need additional data and information from various source. So far few source has been identified: AHA Centre ADInet - http://adinet.ahacentre.org/main; BNPB Disaster Monitoring - http://gis.bnpb.go.id; PUPR Geoportal - https://sigi.pu.go.id/disaster A measure of forecast accuracy How many of the events were forecast? Hit rate = (number of hits/number of events) * 100% Correct rejections are correct forecasts. False-alarm rate = number of false alarms/number of non-events How many times was the forecast correct? Hit score = (number of correct forecasts/number of forecasts) * 100% Hit score = (number of hits and correct rejections/number of forecasts) * 100%","title":"Evaluating alert quality"},{"location":"eaq/#evaluating-alert-quality","text":"To evaluate alert release by VAMPIRE, we need additional data and information from various source. So far few source has been identified: AHA Centre ADInet - http://adinet.ahacentre.org/main; BNPB Disaster Monitoring - http://gis.bnpb.go.id; PUPR Geoportal - https://sigi.pu.go.id/disaster","title":"Evaluating alert quality"},{"location":"eaq/#a-measure-of-forecast-accuracy","text":"How many of the events were forecast? Hit rate = (number of hits/number of events) * 100% Correct rejections are correct forecasts. False-alarm rate = number of false alarms/number of non-events How many times was the forecast correct? Hit score = (number of correct forecasts/number of forecasts) * 100% Hit score = (number of hits and correct rejections/number of forecasts) * 100%","title":"A measure of forecast accuracy"},{"location":"eit/","text":"Developing event-identification threshold Inspired from ITHACA ERDS (Extreme Rainfall Detection System - http://erds.ithacaweb.org ), The extreme rainfall detection is based on the concept of event-identification threshold: an alert is provided if the accumulated rainfall exceeds the threshold. THRESHOLD THRESHOLD is AMOUNT OF RAINFALL NEEDED TO TRIGGER A EVENT (flood/flash-flood/landslide) INDUCED BY EXTREME RAINFALL Frequency analysis a return period, also known as a recurrence interval (sometimes repeat interval) is an estimate of the likelihood of an event, such as an earthquake, flood, landslide, or a river discharge flow to occur. For example, a 10-year flood has a \\({1 \\over 10}\\) = 0.1 or 10% chance of being exceeded in any one year and a 50-year flood has a 0.02 or 2% chance of being exceeded in any one year. This does not mean that a 100-year flood will happen regularly every 100 years, or only once in 100 years. Despite the connotations of the name \"return period\". In any given 100-year period, a 100-year event may occur once, twice, more, or not at all, and each outcome has a probability that can be computed as below. Given that the return period of an event is 100 years, \\[P = {1 \\over 100}\\] \\[P = 0.01\\] So the probability that such an event occurs exactly once in 10 successive years is: \\[P(x=1) = ({10 \\over 1}) * 0.01^1 * 0.99^9\\] \\[P = 10 * 0.01 * 0.914\\] \\[P = 0.0914\\] The Threshold Daily extreme rainfall alert is based on 1-5 days of consecutive rainfall exceeding a threshold, which will develop at pixel level. The long-term historical daily rainfall (2000-2019) is used to define the threshold. It is based on the maximum of 1-5 days consecutive rainfall in 1 year for the period 2000 - 2019 in (x,y) area, and calculate the percentile using k value: k = 0.5 for rainfall exceeding P50 2 years return period (RP), classified as Moderate Rainfall k = 0.8 for rainfall exceeding P80 5 years RP, classified as Heavy Rainfall k = 0.9 for rainfall exceeding P90 10 years RP, classified as Intense Rainfall k = 0.96 for rainfall exceeding P96 25 years RP, classified as Extreme Rainfall Source: http://www.meted.ucar.edu/hydro/basic_int/flood_frequency/print.htm Extreme rainfall alert Overlaying the near-real time or forecast data with the threshold is used to obtain an estimate of the area who will experience unusual rainfall at (x,y) location. Following the Yes or No warnings, there are four different alert levels of Yes can be visualized ( moderate , heavy , intense and extreme ), based on specific critical rainfall (threshold), defined as the amount of precipitation for a given duration over a specific climatological area. The alert will generate for 5 different class: 1-day, 2-days, 3-days, 4-days and 5-days ahead.","title":"Developing event-identification threshold"},{"location":"eit/#developing-event-identification-threshold","text":"Inspired from ITHACA ERDS (Extreme Rainfall Detection System - http://erds.ithacaweb.org ), The extreme rainfall detection is based on the concept of event-identification threshold: an alert is provided if the accumulated rainfall exceeds the threshold. THRESHOLD THRESHOLD is AMOUNT OF RAINFALL NEEDED TO TRIGGER A EVENT (flood/flash-flood/landslide) INDUCED BY EXTREME RAINFALL","title":"Developing event-identification threshold"},{"location":"eit/#frequency-analysis","text":"a return period, also known as a recurrence interval (sometimes repeat interval) is an estimate of the likelihood of an event, such as an earthquake, flood, landslide, or a river discharge flow to occur. For example, a 10-year flood has a \\({1 \\over 10}\\) = 0.1 or 10% chance of being exceeded in any one year and a 50-year flood has a 0.02 or 2% chance of being exceeded in any one year. This does not mean that a 100-year flood will happen regularly every 100 years, or only once in 100 years. Despite the connotations of the name \"return period\". In any given 100-year period, a 100-year event may occur once, twice, more, or not at all, and each outcome has a probability that can be computed as below. Given that the return period of an event is 100 years, \\[P = {1 \\over 100}\\] \\[P = 0.01\\] So the probability that such an event occurs exactly once in 10 successive years is: \\[P(x=1) = ({10 \\over 1}) * 0.01^1 * 0.99^9\\] \\[P = 10 * 0.01 * 0.914\\] \\[P = 0.0914\\]","title":"Frequency analysis"},{"location":"eit/#the-threshold","text":"Daily extreme rainfall alert is based on 1-5 days of consecutive rainfall exceeding a threshold, which will develop at pixel level. The long-term historical daily rainfall (2000-2019) is used to define the threshold. It is based on the maximum of 1-5 days consecutive rainfall in 1 year for the period 2000 - 2019 in (x,y) area, and calculate the percentile using k value: k = 0.5 for rainfall exceeding P50 2 years return period (RP), classified as Moderate Rainfall k = 0.8 for rainfall exceeding P80 5 years RP, classified as Heavy Rainfall k = 0.9 for rainfall exceeding P90 10 years RP, classified as Intense Rainfall k = 0.96 for rainfall exceeding P96 25 years RP, classified as Extreme Rainfall Source: http://www.meted.ucar.edu/hydro/basic_int/flood_frequency/print.htm","title":"The Threshold"},{"location":"eit/#extreme-rainfall-alert","text":"Overlaying the near-real time or forecast data with the threshold is used to obtain an estimate of the area who will experience unusual rainfall at (x,y) location. Following the Yes or No warnings, there are four different alert levels of Yes can be visualized ( moderate , heavy , intense and extreme ), based on specific critical rainfall (threshold), defined as the amount of precipitation for a given duration over a specific climatological area. The alert will generate for 5 different class: 1-day, 2-days, 3-days, 4-days and 5-days ahead.","title":"Extreme rainfall alert"},{"location":"erc/","text":"Extreme rainfall calculation Rainfall exceeding the threshold Extract rainfall exceeding the threshold for 1 to 5-days 1-day IF RAIN-A 1day > Threshold_P50, THEN extract to new file RAIN-B p50 and classified as Moderate #ffffcc IF RAIN-A 1day > Threshold_P80, THEN extract to new file RAIN-B p80 and classified as Heavy #a1dab4 IF RAIN-A 1day > Threshold_P90, THEN extract to new file RAIN-B p90 and classified as Intense #41b6c4 IF RAIN-A 1day > Threshold_P96, THEN extract to new file RAIN-B p96 and classified as Extreme #225ea8 Combine all result RAIN-Bp50 - RAIN-B p80 - RAIN-B p90 - RAIN-B p96 into single file RAIN_B with information on rainfall value and class, with condition: if in certain location (x,y) experience more extreme categories (P50<P80<P90<P96), the area is excluded in other less extreme categories. Repeat the process for 2-days to 5-days period. Picture below illustrate above step. Will it trigger a flood? Calculate the probability Using linear regression formula \\( \\(aX+b\\) \\) , where a = Slope, X = rainfall and b = Intercept, then calculate: $$gi = (Slope_Kday_Lmonth * Rainfall_Kday) + Intercept_Kday_Lmonth$$ $$pi = 1/(1+EXP(-gi))$$ Where: K = class of the alert (1 to 5 days) L = month of the rainfall Example: 1-day simulation, Month = 12 gi = Slope_1day_12Dec * Rainfall_1day + Intercept_1day_12Dec pi = 1/(1+EXP(-gi)) Classified pi into 3 class: IF pi >= 0.8, THEN High (Likelihood Class 3) IF pi >= 0.6, THEN Moderate (Likelihood Class 2) IF pi < 0.6, THEN Low (Likelihood Class 10 Determine the alert level Use matrix in page Find areas at risk of flooding to determine the level of Alert Repeat the process for all rainfall class (2 to 5-days period), and for all data type: Historical and Near Real Time, Final, Late and Early Run. Expected output Information by pixel on: ID, Lon, Lat, A1CODE, A1NAME, A2CODE, A2NAME, Rainfall, RainClass, LikelihoodClass, ALERT Update frequency Historical Final run. Daily update. Final run data will update every month with lag for 3-month. If the new Final run data available, all information about rainfall and product in Late run will replace using this data. Late run. Daily update. The lag time around 14-23 hours from release date. Near-real time NRT, Final run. 6-hours update. Final run data will update every month with lag for 3-month. If the new Final run data available, all information about rainfall and product in Early run will replace using this data. NRT, Late run. 6-hours update. The lag time around 4-11 hours from release date. Forecast Forecast. 6-hours update, with forecast data available upto 5 days ahead. Symbology Rainfall exceeding the threshold Rain Class 1: Moderate, #ffffcc Rain Class 2: Heavy, #a1dab4 Rain Class 3: Intense, #41b6c4 Rain Class 4: Extreme, #225ea8 Likelihood of triggering flood Likelihood Class 1: Low, #f7fcb9 Likelihood Class 2: Moderate, #addd8e Likelihood Class 3: High, #31a354 Extreme rainfall-triggering a flood (Flood alert) No alert: Green, #a5d342 Alert 1 - 3: Yellow, #fceca9 Alert 4 - 6: Orange, #f4b45f Alert 7 - 9: Red, #de4b31","title":"Extreme rainfall calculation"},{"location":"erc/#extreme-rainfall-calculation","text":"","title":"Extreme rainfall calculation"},{"location":"erc/#rainfall-exceeding-the-threshold","text":"Extract rainfall exceeding the threshold for 1 to 5-days 1-day IF RAIN-A 1day > Threshold_P50, THEN extract to new file RAIN-B p50 and classified as Moderate #ffffcc IF RAIN-A 1day > Threshold_P80, THEN extract to new file RAIN-B p80 and classified as Heavy #a1dab4 IF RAIN-A 1day > Threshold_P90, THEN extract to new file RAIN-B p90 and classified as Intense #41b6c4 IF RAIN-A 1day > Threshold_P96, THEN extract to new file RAIN-B p96 and classified as Extreme #225ea8 Combine all result RAIN-Bp50 - RAIN-B p80 - RAIN-B p90 - RAIN-B p96 into single file RAIN_B with information on rainfall value and class, with condition: if in certain location (x,y) experience more extreme categories (P50<P80<P90<P96), the area is excluded in other less extreme categories. Repeat the process for 2-days to 5-days period. Picture below illustrate above step.","title":"Rainfall exceeding the threshold"},{"location":"erc/#will-it-trigger-a-flood","text":"Calculate the probability Using linear regression formula \\( \\(aX+b\\) \\) , where a = Slope, X = rainfall and b = Intercept, then calculate: $$gi = (Slope_Kday_Lmonth * Rainfall_Kday) + Intercept_Kday_Lmonth$$ $$pi = 1/(1+EXP(-gi))$$ Where: K = class of the alert (1 to 5 days) L = month of the rainfall Example: 1-day simulation, Month = 12 gi = Slope_1day_12Dec * Rainfall_1day + Intercept_1day_12Dec pi = 1/(1+EXP(-gi)) Classified pi into 3 class: IF pi >= 0.8, THEN High (Likelihood Class 3) IF pi >= 0.6, THEN Moderate (Likelihood Class 2) IF pi < 0.6, THEN Low (Likelihood Class 10 Determine the alert level Use matrix in page Find areas at risk of flooding to determine the level of Alert Repeat the process for all rainfall class (2 to 5-days period), and for all data type: Historical and Near Real Time, Final, Late and Early Run. Expected output Information by pixel on: ID, Lon, Lat, A1CODE, A1NAME, A2CODE, A2NAME, Rainfall, RainClass, LikelihoodClass, ALERT","title":"Will it trigger a flood?"},{"location":"erc/#update-frequency","text":"Historical Final run. Daily update. Final run data will update every month with lag for 3-month. If the new Final run data available, all information about rainfall and product in Late run will replace using this data. Late run. Daily update. The lag time around 14-23 hours from release date. Near-real time NRT, Final run. 6-hours update. Final run data will update every month with lag for 3-month. If the new Final run data available, all information about rainfall and product in Early run will replace using this data. NRT, Late run. 6-hours update. The lag time around 4-11 hours from release date. Forecast Forecast. 6-hours update, with forecast data available upto 5 days ahead.","title":"Update frequency"},{"location":"erc/#symbology","text":"Rainfall exceeding the threshold Rain Class 1: Moderate, #ffffcc Rain Class 2: Heavy, #a1dab4 Rain Class 3: Intense, #41b6c4 Rain Class 4: Extreme, #225ea8 Likelihood of triggering flood Likelihood Class 1: Low, #f7fcb9 Likelihood Class 2: Moderate, #addd8e Likelihood Class 3: High, #31a354 Extreme rainfall-triggering a flood (Flood alert) No alert: Green, #a5d342 Alert 1 - 3: Yellow, #fceca9 Alert 4 - 6: Orange, #f4b45f Alert 7 - 9: Red, #de4b31","title":"Symbology"},{"location":"example/","text":"Example Below is the example result for each output during Seroja Tropical Cyclone on 3 April 2021. User Interface Panel and Legend Rainfall accumulation, near real-time Rainfall accumulation, forecast Rainfall exceeding the threshold, near real-time Rainfall exceeding the threshold, forecast Likelihood of rainfall triggering a flood, near real-time Likelihood of rainfall triggering a flood, forecast Flood alert based on extreme rainfall-triggering flood, near real-time Flood alert based on extreme rainfall-triggering flood, forecast","title":"Example"},{"location":"example/#example","text":"Below is the example result for each output during Seroja Tropical Cyclone on 3 April 2021. User Interface Panel and Legend Rainfall accumulation, near real-time Rainfall accumulation, forecast Rainfall exceeding the threshold, near real-time Rainfall exceeding the threshold, forecast Likelihood of rainfall triggering a flood, near real-time Likelihood of rainfall triggering a flood, forecast Flood alert based on extreme rainfall-triggering flood, near real-time Flood alert based on extreme rainfall-triggering flood, forecast","title":"Example"},{"location":"faq/","text":"Frequently Asked Questions What is ERM? ERM is an experimental tool written in Google Earth Engine (GEE) platform to monitor extreme rainfall that could trigger a flood, and the impact to population and cropland. What is the main input for ERM? GPM IMERG for near real-time rainfall monitoring and NOAA GFS for rainfall forecast. JRC Global Surface Water to develop historical flood occurrence data by months. JRC Global Human Settlement Layer for calculating population affected. MODIS Annual Land Cover for calculating cropland affected. What makes ERM unique compared to the competitors? ERM has a simple output (yes or no / flood or no flood). Analysis of critical rainfall (threshold) is conducted by pixels by months, in area with spatial resolution 0.1deg x 0.1deg ~ 10km x 10km. What can ERM do? ERM are able to inform where is the estimated location of extreme rainfall and its impact to population and cropland in the last 5-days and forecast up to 5-days ahead based on selected date. Rainfall with extreme categories are well detected through ERM. What is ERM limitation: ERM is an experimental application, sometimes the results are accurate (flood detected) and sometimes inaccurate (flood undetected). Sorry about that! Many factors cause the results to be inaccurate, one of them is the rainfall forecast data quality. Other factor is below. What ERM can not do? ERM only able monitor or predict flood caused by extreme rainfall in a location where extreme rainfall occurred. And unable to calculate flood caused by runoff accumulation from other areas. What is difference between near real-time (NRT) and forecast (FCT) NRT inform about the latest condition, 1 to 5 days in the past as of selected date. While the FCT inform the situation that will happen in the 1 - 5 days ahead as of selected date. How to read ERM output? Every computation/single process on ERM will produce 4 outputs: (1) rainfall accumulation, (2) rainfall exceeding the threshold, (3) Likelihood of flooding, and (4) flood alert. All are available for both near real-time and forecast. Rainfall accumulation is the total rainfall for day(s) of simulation selected as of the selected date. The classification value is following the legend on sidebar. Rainfall exceeding the threshold categorized into 4 class: (1) Moderate, exceeding percentile 50. (2) Heavy, exceeding percentile 80. (3) Intense, exceeding percentile 90. (4) Extreme, exceeding percentile 96. See The Threshold Likelihood of flooding is based in Historical Flood Occurrence data, generated using JRC Global Surface Water and combine with maximum rainfall by months. See Focal Linear Regression . Categorized into 3 class: (1) Low, has probability of flooding less than 60%. (2) Moderate, has probability of flooding between 60-80%. (3) High, has probability of flooding greater than 80% or we can say this area are frequently flooded. Flood alert visualized into 4 categories: Green, Yellow, Orange and Red. See below explanation. What do the colors on flood alert represent? Green, is a condition when one of the following conditions is met: Rainfall exceeding percentile 50 (Moderate rainfall) and the likelihood is less than 60% (Low). Rainfall exceeding percentile 50 (Moderate rainfall) and the likelihood is 60-80% (Moderate). Rainfall exceeding percentile 80 (Heavy rainfall) and the likelihood is less than 60% (Low). Yellow, is categorized into 3 class ( Alert class 1 , 2 and 3 ) and a condition when one of the following conditions is met: ( Alert 1 ) Rainfall exceeding percentile 50 (Moderate rainfall) and the likelihood is greater than 80% (High). ( Alert 2 ) Rainfall exceeding percentile 80 (Heavy rainfall) and the likelihood is 60-80% (Moderate). ( Alert 3 ) Rainfall exceeding percentile 90 (Intense rainfall) and the likelihood is less than 60% (Low). Orange, is categorized into 3 class ( Alert class 4 , 5 and 6 ) and a condition when one of the following conditions is met: ( Alert 4 ) Rainfall exceeding percentile 80 (Heavy rainfall) and the likelihood is greater than 80% (High). ( Alert 5 ) Rainfall exceeding percentile 90 (Intense rainfall) and the likelihood is 60-80% (Moderate). ( Alert 6 ) Rainfall exceeding percentile 96 (Extreme rainfall) and the likelihood is less than 60% (Low). Red, is categorized into 3 class ( Alert class 7 , 8 and 9 ) and a condition when one of the following conditions is met: ( Alert 7 ) Rainfall exceeding percentile 90 (Intense rainfall) and the likelihood is greater than 80% (High). ( Alert 8 ) Rainfall exceeding percentile 96 (Extreme rainfall) and the likelihood is 60-80% (Moderate). ( Alert 9 ) Rainfall exceeding percentile 96 (Extreme rainfall) and the likelihood is greater than 80% (High). If an areas experience a Green alert, we assume won't have any significant impact. ERM use Alert 1 to 9, and included in the impact calculation. See Matrix for final alert How to read impact calculation? Both impact analysis using population and cropland are categorized into 3 class: Yellow (Low), Orange (Moderate) and Red (High impact). These 3 class are consistence with flood alert class. Is ERM mobile friendly? No, ERM not optimized for mobile devices. Please use your computer or laptop to access it. What is ERM future plan? See development plan in the left sidebar.","title":"FAQ"},{"location":"faq/#frequently-asked-questions","text":"What is ERM? ERM is an experimental tool written in Google Earth Engine (GEE) platform to monitor extreme rainfall that could trigger a flood, and the impact to population and cropland. What is the main input for ERM? GPM IMERG for near real-time rainfall monitoring and NOAA GFS for rainfall forecast. JRC Global Surface Water to develop historical flood occurrence data by months. JRC Global Human Settlement Layer for calculating population affected. MODIS Annual Land Cover for calculating cropland affected. What makes ERM unique compared to the competitors? ERM has a simple output (yes or no / flood or no flood). Analysis of critical rainfall (threshold) is conducted by pixels by months, in area with spatial resolution 0.1deg x 0.1deg ~ 10km x 10km. What can ERM do? ERM are able to inform where is the estimated location of extreme rainfall and its impact to population and cropland in the last 5-days and forecast up to 5-days ahead based on selected date. Rainfall with extreme categories are well detected through ERM. What is ERM limitation: ERM is an experimental application, sometimes the results are accurate (flood detected) and sometimes inaccurate (flood undetected). Sorry about that! Many factors cause the results to be inaccurate, one of them is the rainfall forecast data quality. Other factor is below. What ERM can not do? ERM only able monitor or predict flood caused by extreme rainfall in a location where extreme rainfall occurred. And unable to calculate flood caused by runoff accumulation from other areas. What is difference between near real-time (NRT) and forecast (FCT) NRT inform about the latest condition, 1 to 5 days in the past as of selected date. While the FCT inform the situation that will happen in the 1 - 5 days ahead as of selected date. How to read ERM output? Every computation/single process on ERM will produce 4 outputs: (1) rainfall accumulation, (2) rainfall exceeding the threshold, (3) Likelihood of flooding, and (4) flood alert. All are available for both near real-time and forecast. Rainfall accumulation is the total rainfall for day(s) of simulation selected as of the selected date. The classification value is following the legend on sidebar. Rainfall exceeding the threshold categorized into 4 class: (1) Moderate, exceeding percentile 50. (2) Heavy, exceeding percentile 80. (3) Intense, exceeding percentile 90. (4) Extreme, exceeding percentile 96. See The Threshold Likelihood of flooding is based in Historical Flood Occurrence data, generated using JRC Global Surface Water and combine with maximum rainfall by months. See Focal Linear Regression . Categorized into 3 class: (1) Low, has probability of flooding less than 60%. (2) Moderate, has probability of flooding between 60-80%. (3) High, has probability of flooding greater than 80% or we can say this area are frequently flooded. Flood alert visualized into 4 categories: Green, Yellow, Orange and Red. See below explanation. What do the colors on flood alert represent? Green, is a condition when one of the following conditions is met: Rainfall exceeding percentile 50 (Moderate rainfall) and the likelihood is less than 60% (Low). Rainfall exceeding percentile 50 (Moderate rainfall) and the likelihood is 60-80% (Moderate). Rainfall exceeding percentile 80 (Heavy rainfall) and the likelihood is less than 60% (Low). Yellow, is categorized into 3 class ( Alert class 1 , 2 and 3 ) and a condition when one of the following conditions is met: ( Alert 1 ) Rainfall exceeding percentile 50 (Moderate rainfall) and the likelihood is greater than 80% (High). ( Alert 2 ) Rainfall exceeding percentile 80 (Heavy rainfall) and the likelihood is 60-80% (Moderate). ( Alert 3 ) Rainfall exceeding percentile 90 (Intense rainfall) and the likelihood is less than 60% (Low). Orange, is categorized into 3 class ( Alert class 4 , 5 and 6 ) and a condition when one of the following conditions is met: ( Alert 4 ) Rainfall exceeding percentile 80 (Heavy rainfall) and the likelihood is greater than 80% (High). ( Alert 5 ) Rainfall exceeding percentile 90 (Intense rainfall) and the likelihood is 60-80% (Moderate). ( Alert 6 ) Rainfall exceeding percentile 96 (Extreme rainfall) and the likelihood is less than 60% (Low). Red, is categorized into 3 class ( Alert class 7 , 8 and 9 ) and a condition when one of the following conditions is met: ( Alert 7 ) Rainfall exceeding percentile 90 (Intense rainfall) and the likelihood is greater than 80% (High). ( Alert 8 ) Rainfall exceeding percentile 96 (Extreme rainfall) and the likelihood is 60-80% (Moderate). ( Alert 9 ) Rainfall exceeding percentile 96 (Extreme rainfall) and the likelihood is greater than 80% (High). If an areas experience a Green alert, we assume won't have any significant impact. ERM use Alert 1 to 9, and included in the impact calculation. See Matrix for final alert How to read impact calculation? Both impact analysis using population and cropland are categorized into 3 class: Yellow (Low), Orange (Moderate) and Red (High impact). These 3 class are consistence with flood alert class. Is ERM mobile friendly? No, ERM not optimized for mobile devices. Please use your computer or laptop to access it. What is ERM future plan? See development plan in the left sidebar.","title":"Frequently Asked Questions"},{"location":"gee/","text":"Google Earth Engine Below is the example on how we translate all the process in GEE platform. Global variable First we need to declare the global variable like basemap and color codes. As the ERM result is colorful, it's better to use Grey Style basemap so the map result will clearly visible. ERM will produce 4 outputs: Rainfall Rainfall exceeding the threshold Likelihood of triggering flood Extreme rainfall triggering a flood (Flood Alert) And impact analysis on Number of affected population per alert category Number of affected cropland per alert category And each output will visualize with different classification. // GLOBAL VARIABLE (Basemap, Color, Static Data, Mask and others) //--- // ui Map and Panel configuration var mainMap = ui . Map (); var uiComponents = {}; // MAP STYLE //-- // Grey style from https://developers.google.com/maps/documentation/javascript/examples/style-selector function mapStyle () { return [ { elementType : \"geometry\" , stylers : [{ color : \"#f5f5f5\" }], }, { elementType : \"labels.icon\" , stylers : [{ visibility : \"off\" }], }, { elementType : \"labels.text.fill\" , stylers : [{ color : \"#616161\" }], }, { elementType : \"labels.text.stroke\" , stylers : [{ color : \"#f5f5f5\" }], }, { featureType : \"administrative.land_parcel\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#bdbdbd\" }], }, { featureType : \"poi\" , elementType : \"geometry\" , stylers : [{ color : \"#eeeeee\" }], }, { featureType : \"poi\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#757575\" }], }, { featureType : \"poi.park\" , elementType : \"geometry\" , stylers : [{ color : \"#e5e5e5\" }], }, { featureType : \"poi.park\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#9e9e9e\" }], }, { featureType : \"road\" , elementType : \"geometry\" , stylers : [{ color : \"#ffffff\" }], }, { featureType : \"road.arterial\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#757575\" }], }, { featureType : \"road.highway\" , elementType : \"geometry\" , stylers : [{ color : \"#dadada\" }], }, { featureType : \"road.highway\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#616161\" }], }, { featureType : \"road.local\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#9e9e9e\" }], }, { featureType : \"transit.line\" , elementType : \"geometry\" , stylers : [{ color : \"#e5e5e5\" }], }, { featureType : \"transit.station\" , elementType : \"geometry\" , stylers : [{ color : \"#eeeeee\" }], }, { featureType : \"water\" , elementType : \"geometry\" , stylers : [{ color : \"#c9c9c9\" }], }, { featureType : \"water\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#9e9e9e\" }], }, ]; } // Grey basemap mainMap . style (). set ( 'cursor' , 'crosshair' ); mainMap . setOptions ( 'Grey' , { Grey : mapStyle () }); // SYMBOLOGY // Visualization palette, Color-codes based on Color-Brewer https://colorbrewer2.org/ // Standard symbology for rainfall var visRainfall = { min : 1 , max : 100 , opacity : 0.7 , palette : [ 'cccccc' , 'f9f3d5' , 'dce2a8' , 'a8c58d' , '77a87d' , 'ace8f8' , '4cafd9' , '1d5ede' , '001bc0' , '9131f1' , 'e983f3' , 'f6c7ec' ] }; // Standard symbology for extreme rainfall class var visExtreme = { min : 1 , max : 4 , opacity : 0.7 , palette : [ 'ffffcc' , 'a1dab4' , '41b6c4' , '225ea8' ] }; // Standard symbology for likelihood of flooding var visLikelihood = { min : 1 , max : 3 , opacity : 0.7 , palette : [ 'f7fcb9' , 'addd8e' , '31a354' ] }; // Standard symbology for extreme rainfall triggering flood alert class var visFlood = { min : 0 , max : 9 , opacity : 0.7 , palette : [ '97D700' , 'FFEDA0' , 'FFEDA0' , 'FFEDA0' , 'FEB24C' , 'FEB24C' , 'FEB24C' , 'F03B20' , 'F03B20' , 'F03B20' ] }; // Standard symbology for population exposed var visPopulation = { min : 0 , max : 50.0 , opacity : 0.7 , palette : [ 'yellow' , 'orange' , 'red' ], }; // Define an SLD style of discrete intervals to apply to the image. // Notes: SLD visualisation will make the data rendered as RGB during point inspector into a pixel. var visRainfallSLD = '<RasterSymbolizer>' + '<ColorMap type=\"ramp\" extended=\"false\" >' + '<ColorMapEntry color=\"#ffffff\" opacity=\"0.0\" quantity=\"1\" label=\"No Rain\" />' + '<ColorMapEntry color=\"#cccccc\" opacity=\"0.7\" quantity=\"3\" label=\"1-3\" />' + '<ColorMapEntry color=\"#f9f3d5\" opacity=\"0.7\" quantity=\"10\" label=\"4-10\" />' + '<ColorMapEntry color=\"#dce2a8\" opacity=\"0.7\" quantity=\"20\" label=\"11-20\" />' + '<ColorMapEntry color=\"#a8c58d\" opacity=\"0.7\" quantity=\"30\" label=\"21-30\" />' + '<ColorMapEntry color=\"#77a87d\" opacity=\"0.7\" quantity=\"40\" label=\"31-40\" />' + '<ColorMapEntry color=\"#ace8f8\" opacity=\"0.7\" quantity=\"60\" label=\"41-60\" />' + '<ColorMapEntry color=\"#4cafd9\" opacity=\"0.7\" quantity=\"80\" label=\"61-80\" />' + '<ColorMapEntry color=\"#1d5ede\" opacity=\"0.7\" quantity=\"100\" label=\"81-100\" />' + '<ColorMapEntry color=\"#001bc0\" opacity=\"0.7\" quantity=\"120\" label=\"101-120\" />' + '<ColorMapEntry color=\"#9131f1\" opacity=\"0.7\" quantity=\"150\" label=\"121-150\" />' + '<ColorMapEntry color=\"#e983f3\" opacity=\"0.7\" quantity=\"200\" label=\"151-200\" />' + '<ColorMapEntry color=\"#f6c7ec\" opacity=\"0.7\" quantity=\"1000\" label=\"&gt; 200\" />' + '</ColorMap>' + '</RasterSymbolizer>' ; Main input All of the data required by ERM is available for global coverage, and the focus for ERM is only for Indonesia. Then we need to have a layer as a Masked for Indonesia. The file is available via assets: users/bennyistanto/datasets/raster/extremerainfall/mask/idn_bnd_imerg_subset We will use Masked layer to clip all of the main input data: IMERG, for near real-time monitoring GFS, for forecast simulation GHSL, for calculate affected population MODIS MCD12Q1, for calculate affected cropland and urban areas. Currently ERM use GHSL population data to calculate the affected population due to flood. There is a plan to extend the analysis using Facebook HRSL data, so we can get breakdown affected population by age, the we could get number of vulnerable population. // MAIN INPUT //--- // Masking image function maskImage ( image ) { var imergMask = ee . Image ( 'users/bennyistanto/datasets/raster/extremerainfall/mask/idn_bnd_imerg_subset' ); return image . updateMask ( imergMask ); } var idnMask = ee . Image ( 'users/bennyistanto/datasets/raster/extremerainfall/mask/idn_bnd_imerg_subset' ); // Near Real Time data // Import NASA GPM IMERG 30 minute data and calculate accumulation for 1day. var imerg = ee . ImageCollection ( \"NASA/GPM_L3/IMERG_V06\" ); // Get IMERG projection information var IMERGprojection = ee . Image ( imerg . first ()). projection (); // Forecast data // Import GFS data - https://developers.google.com/earth-engine/datasets/catalog/NOAA_GFS0P25 var gfs = ee . ImageCollection ( 'NOAA/GFS0P25' ); // Population grid // Import Global Human Settlement Popluation Density layer (GHSL) data. Resolution: 250. Number of people per cell is given. // https://developers.google.com/earth-engine/datasets/catalog/JRC_GHSL_P2016_POP_GPW_GLOBE_V1#bands var ghsl_raw = maskImage ( ee . Image ( ee . ImageCollection ( \"JRC/GHSL/P2016/POP_GPW_GLOBE_V1\" ). first ()). select ( 'population_count' )); var ghsl = ghsl_raw . updateMask ( ghsl_raw . gt ( 0 )); // Get GHSL projection information var GHSLprojection = ghsl . projection (); // MODIS Global Annual Land Cover 500m - year 2019, filter image collection by the most up-to-date MODIS Land Cover product // Import Crop extent data - https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MCD12Q1#bands // LC_Type1 using Annual International Geosphere-Biosphere Programme (IGBP) classification var mcd12q1_raw = ee . Image ( 'MODIS/006/MCD12Q1/2019_01_01' ). select ( \"LC_Type1\" ); var mcd12q1 = mcd12q1_raw . updateMask ( mcd12q1_raw . gt ( 0 )); // Get MODIS projection information var MODISprojection = mcd12q1_raw . projection (); Calling the assets ERM required some of input (threshold, slope and intercept layer) that already prepared via different platform: ArcGIS Pro, R Statistics, and Excel. All the layer uploaded as GEE assets. // Import threshold by pixel that exceeding the Percentile 50, 80, 90 and 96 of rainfall based on 1-day, 2-day, // 3-day, 4-day and 5-days of annual maximum rainfall from 1981 - 2019 // // Link to assets https://code.earthengine.google.com/?asset=users/bennyistanto/datasets/raster/extremerainfall/threshold/ // Threshold data for 1-day rainfall accumulation scenario var Day1_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_1day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day1_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_1day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day1_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_1day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day1_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_1day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Threshold data 2-day rainfall accumulation scenario var Day2_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_2day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day2_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_2day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day2_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_2day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day2_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_2day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Threshold data 3-day rainfall accumulation scenario var Day3_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_3day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day3_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_3day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day3_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_3day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day3_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_3day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Threshold data 4-day rainfall accumulation scenario var Day4_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_4day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day4_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_4day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day4_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_4day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day4_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_4day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Threshold data 5-day rainfall accumulation scenario var Day5_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_5day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day5_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_5day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day5_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_5day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day5_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_5day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Import Slope and Intercept for calculating probability based on focal linear regression between rainfall and historical // flood occurrence. Focal (linear) regression between every 5x5 pixels group of cells of two rasters was done using R. // // Link to assets https://code.earthengine.google.com/?asset=users/bennyistanto/datasets/raster/extremerainfall/slope // Slope data for 1-day rainfall accumulation scenario var Slope_Day1_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_01_jan_slope_imerg\" ); var Slope_Day1_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_02_feb_slope_imerg\" ); var Slope_Day1_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_03_mar_slope_imerg\" ); var Slope_Day1_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_04_apr_slope_imerg\" ); var Slope_Day1_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_05_may_slope_imerg\" ); var Slope_Day1_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_06_jun_slope_imerg\" ); var Slope_Day1_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_07_jul_slope_imerg\" ); var Slope_Day1_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_08_aug_slope_imerg\" ); var Slope_Day1_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_09_sep_slope_imerg\" ); var Slope_Day1_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_10_oct_slope_imerg\" ); var Slope_Day1_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_11_nov_slope_imerg\" ); var Slope_Day1_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_12_dec_slope_imerg\" ); // Slope data for 2-days rainfall accumulation scenario var Slope_Day2_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_01_jan_slope_imerg\" ); var Slope_Day2_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_02_feb_slope_imerg\" ); var Slope_Day2_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_03_mar_slope_imerg\" ); var Slope_Day2_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_04_apr_slope_imerg\" ); var Slope_Day2_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_05_may_slope_imerg\" ); var Slope_Day2_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_06_jun_slope_imerg\" ); var Slope_Day2_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_07_jul_slope_imerg\" ); var Slope_Day2_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_08_aug_slope_imerg\" ); var Slope_Day2_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_09_sep_slope_imerg\" ); var Slope_Day2_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_10_oct_slope_imerg\" ); var Slope_Day2_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_11_nov_slope_imerg\" ); var Slope_Day2_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_12_dec_slope_imerg\" ); // Slope data for 3-days rainfall accumulation scenario var Slope_Day3_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_01_jan_slope_imerg\" ); var Slope_Day3_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_02_feb_slope_imerg\" ); var Slope_Day3_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_03_mar_slope_imerg\" ); var Slope_Day3_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_04_apr_slope_imerg\" ); var Slope_Day3_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_05_may_slope_imerg\" ); var Slope_Day3_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_06_jun_slope_imerg\" ); var Slope_Day3_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_07_jul_slope_imerg\" ); var Slope_Day3_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_08_aug_slope_imerg\" ); var Slope_Day3_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_09_sep_slope_imerg\" ); var Slope_Day3_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_10_oct_slope_imerg\" ); var Slope_Day3_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_11_nov_slope_imerg\" ); var Slope_Day3_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_12_dec_slope_imerg\" ); // Slope data for 4-days rainfall accumulation scenario var Slope_Day4_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_01_jan_slope_imerg\" ); var Slope_Day4_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_02_feb_slope_imerg\" ); var Slope_Day4_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_03_mar_slope_imerg\" ); var Slope_Day4_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_04_apr_slope_imerg\" ); var Slope_Day4_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_05_may_slope_imerg\" ); var Slope_Day4_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_06_jun_slope_imerg\" ); var Slope_Day4_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_07_jul_slope_imerg\" ); var Slope_Day4_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_08_aug_slope_imerg\" ); var Slope_Day4_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_09_sep_slope_imerg\" ); var Slope_Day4_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_10_oct_slope_imerg\" ); var Slope_Day4_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_11_nov_slope_imerg\" ); var Slope_Day4_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_12_dec_slope_imerg\" ); // Slope data for 5-days rainfall accumulation scenario var Slope_Day5_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_01_jan_slope_imerg\" ); var Slope_Day5_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_02_feb_slope_imerg\" ); var Slope_Day5_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_03_mar_slope_imerg\" ); var Slope_Day5_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_04_apr_slope_imerg\" ); var Slope_Day5_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_05_may_slope_imerg\" ); var Slope_Day5_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_06_jun_slope_imerg\" ); var Slope_Day5_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_07_jul_slope_imerg\" ); var Slope_Day5_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_08_aug_slope_imerg\" ); var Slope_Day5_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_09_sep_slope_imerg\" ); var Slope_Day5_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_10_oct_slope_imerg\" ); var Slope_Day5_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_11_nov_slope_imerg\" ); var Slope_Day5_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_12_dec_slope_imerg\" ); // Link to assets https://code.earthengine.google.com/?asset=users/bennyistanto/datasets/raster/extremerainfall/intercept // Intercept data for 1-day rainfall accumulation scenario var Intercept_Day1_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_01_jan_intercept_imerg\" ); var Intercept_Day1_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_02_feb_intercept_imerg\" ); var Intercept_Day1_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_03_mar_intercept_imerg\" ); var Intercept_Day1_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_04_apr_intercept_imerg\" ); var Intercept_Day1_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_05_may_intercept_imerg\" ); var Intercept_Day1_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_06_jun_intercept_imerg\" ); var Intercept_Day1_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_07_jul_intercept_imerg\" ); var Intercept_Day1_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_08_aug_intercept_imerg\" ); var Intercept_Day1_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_09_sep_intercept_imerg\" ); var Intercept_Day1_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_10_oct_intercept_imerg\" ); var Intercept_Day1_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_11_nov_intercept_imerg\" ); var Intercept_Day1_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_12_dec_intercept_imerg\" ); // Intercept data for 2-days rainfall accumulation scenario var Intercept_Day2_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_01_jan_intercept_imerg\" ); var Intercept_Day2_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_02_feb_intercept_imerg\" ); var Intercept_Day2_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_03_mar_intercept_imerg\" ); var Intercept_Day2_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_04_apr_intercept_imerg\" ); var Intercept_Day2_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_05_may_intercept_imerg\" ); var Intercept_Day2_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_06_jun_intercept_imerg\" ); var Intercept_Day2_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_07_jul_intercept_imerg\" ); var Intercept_Day2_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_08_aug_intercept_imerg\" ); var Intercept_Day2_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_09_sep_intercept_imerg\" ); var Intercept_Day2_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_10_oct_intercept_imerg\" ); var Intercept_Day2_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_11_nov_intercept_imerg\" ); var Intercept_Day2_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_12_dec_intercept_imerg\" ); // Intercept data for 3-days rainfall accumulation scenario var Intercept_Day3_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_01_jan_intercept_imerg\" ); var Intercept_Day3_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_02_feb_intercept_imerg\" ); var Intercept_Day3_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_03_mar_intercept_imerg\" ); var Intercept_Day3_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_04_apr_intercept_imerg\" ); var Intercept_Day3_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_05_may_intercept_imerg\" ); var Intercept_Day3_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_06_jun_intercept_imerg\" ); var Intercept_Day3_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_07_jul_intercept_imerg\" ); var Intercept_Day3_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_08_aug_intercept_imerg\" ); var Intercept_Day3_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_09_sep_intercept_imerg\" ); var Intercept_Day3_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_10_oct_intercept_imerg\" ); var Intercept_Day3_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_11_nov_intercept_imerg\" ); var Intercept_Day3_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_12_dec_intercept_imerg\" ); // Intercept data for 4-days rainfall accumulation scenario var Intercept_Day4_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_01_jan_intercept_imerg\" ); var Intercept_Day4_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_02_feb_intercept_imerg\" ); var Intercept_Day4_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_03_mar_intercept_imerg\" ); var Intercept_Day4_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_04_apr_intercept_imerg\" ); var Intercept_Day4_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_05_may_intercept_imerg\" ); var Intercept_Day4_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_06_jun_intercept_imerg\" ); var Intercept_Day4_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_07_jul_intercept_imerg\" ); var Intercept_Day4_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_08_aug_intercept_imerg\" ); var Intercept_Day4_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_09_sep_intercept_imerg\" ); var Intercept_Day4_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_10_oct_intercept_imerg\" ); var Intercept_Day4_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_11_nov_intercept_imerg\" ); var Intercept_Day4_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_12_dec_intercept_imerg\" ); // Intercept data for 5-days rainfall accumulation scenario var Intercept_Day5_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_01_jan_intercept_imerg\" ); var Intercept_Day5_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_02_feb_intercept_imerg\" ); var Intercept_Day5_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_03_mar_intercept_imerg\" ); var Intercept_Day5_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_04_apr_intercept_imerg\" ); var Intercept_Day5_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_05_may_intercept_imerg\" ); var Intercept_Day5_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_06_jun_intercept_imerg\" ); var Intercept_Day5_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_07_jul_intercept_imerg\" ); var Intercept_Day5_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_08_aug_intercept_imerg\" ); var Intercept_Day5_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_09_sep_intercept_imerg\" ); var Intercept_Day5_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_10_oct_intercept_imerg\" ); var Intercept_Day5_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_11_nov_intercept_imerg\" ); var Intercept_Day5_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_12_dec_intercept_imerg\" ); As alternative, we could simplify above script to read the assets by write the function for each category. // FUNCTION //--- // Get Threshold Image function getThresholdImage ( p , numday ) { var q = { 'P50' : 'q0500_2yr' , // Percentile 50, 2-year return period 'P80' : 'q0800_5yr' , // Percentile 80, 5-year return period 'P90' : 'q0900_10yr' , // Percentile 90, 10-year return period 'P96' : 'q0960_25yr' // Percentile 96, 25-year return period }[ p ]; var path = 'users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_' + numday + 'day_precipthreshold_' + q + '_imerg_wfp' ; return ee . Image ( path ); } // Get Slope Image // File and location for Day1 and January: \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_01_jan_slope_imerg\" function getSlopeImage ( month , numday ) { var m = [ '' , '01_jan' , '02_feb' , '03_mar' , '04_apr' , '05_may' , '06_jun' , '07_jul' , '08_aug' , '09_sep' , '10_oct' , '11_nov' , '12_dec' ][ month ]; var path = 'users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day' + numday + '_' + m + '_slope_imerg' ; return ee . Image ( path ); } // Get Intercept Image // File and location for Day1 and January: \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_01_jan_intercept_imerg\" function getInterceptImage ( month , numday ) { var m = [ '' , '01_jan' , '02_feb' , '03_mar' , '04_apr' , '05_may' , '06_jun' , '07_jul' , '08_aug' , '09_sep' , '10_oct' , '11_nov' , '12_dec' ][ month ]; var path = 'users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day' + numday + '_' + m + '_intercept_imerg' ; return ee . Image ( path ); } Function to grab rainfall data Next is creating function to get near real-time data using IMERG and forecast data using GFS. We will have scenario from last 5-days and up to 5-days ahead based on selected date. So we need to prepare rainfall accumulation for both scenario. Below is a function to get near real-time // Get near real-time data (IMERG Image) function getImergImage ( dt , numday ) { // 24 ~ 1day. To get previous data I used negative value var hours = - 24 * numday ; return imerg // ee.ImageCollection('NASA/GPM_L3/IMERG_V06') . select ( 'precipitationCal' ) . filterDate ( dt . advance ( hours , 'hour' ), dt ) . map ( maskImage ) . sum (). float (); } And this is a function to get a forecast data // Get forecast data (GFS Image) function getGfsImage ( dt , numday ) { // Grab forecast data for hours 6,12,18,24 (Day1) 30,36,42,48 (Day2) 54,60,66,72 (Day3) // 78,84,90,96 (Day4) 102,108,114 and 120 (Day5) var hours = []; for ( var i = 0 ; i < numday ; i ++ ) { for ( var j = 0 ; j < 4 ; j ++ ) { var h = ( i * 24 ) + (( j + 1 ) * 6 ); hours . push ( h ); } } return gfs // ee.ImageCollection('NOAA/GFS0P25') . select ( 'total_precipitation_surface' ) . filterDate ( dt , dt . advance ( 6 , 'hour' )) . filter ( ee . Filter . inList ( 'forecast_hours' , hours )) . map ( maskImage ) . sum () // .resample('bicubic') // One of 'bilinear' or 'bicubic' . reproject ({ crs : IMERGprojection . atScale ( 11131.949079327358 ) }); } Extreme rainfall analysis And the next script is the main analysis, computing extreme rainfall. It consist of many sub analysis: Getting all input together Extract a pixel of rainfall exceeding the threshold, called as impact Calculate the likelihood a pixel of rainfall will trigger a flood or not Classify the likelihood: Low 0 - 0.6, Moderate 0.6 - 0.8, High 0.8 - 1 Calculate extreme rainfall-triggering flood (ERTF) Creating matrix 3x4, the source came from impact and likelihood Re class matrix into 3 class Final product from single run // EXTREME RAINFALL ANALYSIS //---- // Get images for rainfall accumulation, extreme rainfall, probability and the alert // Base image can be from IMERG or GFS function getRainfallExtremeImage ( params ) { var dt = params . date ; var numday = params . numday ; var imgBase = params . imgBase ; var rainfallColumn = params . rainfallColumn ; // Get month information to match data for Threshold, Slope and Intercept var month = dt . get ( 'month' ). getInfo (); // Get data for Threshold, Slope and Intercept based on date // Threshold var P50 = getThresholdImage ( 'P50' , numday ); // Percentile 50, 2-year return period var P80 = getThresholdImage ( 'P80' , numday ); // Percentile 80, 5-year return period var P90 = getThresholdImage ( 'P90' , numday ); // Percentile 90, 10-year return period var P96 = getThresholdImage ( 'P96' , numday ); // Percentile 96, 25-year return period // Slope var imgSlope = getSlopeImage ( month , numday ); // Intercept var imgIntercept = getInterceptImage ( month , numday ); // Mosaic rainfall with threshold images var imgImpactSrc = imgBase . addBands ( P50 ) . addBands ( P80 ) . addBands ( P90 ) . addBands ( P96 ); // Extract a pixel of rainfall exceeding the threshold, called as impact var imgImpact = imgImpactSrc . expression ( 'impact = R>P96?4:(R>P90?3:(R>P80?2:(R>P50?1:R*0)))' , { 'R' : imgImpactSrc . select ( rainfallColumn ), 'P50' : imgImpactSrc . select ( 'b1' ), 'P80' : imgImpactSrc . select ( 'b1_1' ), 'P90' : imgImpactSrc . select ( 'b1_2' ), 'P96' : imgImpactSrc . select ( 'b1_3' ), }); // Mosaic rainfall with slope and intercepts images var imgProbSrc = imgBase . addBands ( imgSlope ) . addBands ( imgIntercept ); // Calculate the likelihood a pixel of rainfall will trigger a flood or not var imgProbBase = imgProbSrc . expression ( 'prob_base = 1/(1+(e **(-((S*R)+I))))' , { 'e' : Math . E , 'R' : imgProbSrc . select ( rainfallColumn ), 'S' : imgProbSrc . select ( 'b1' ), 'I' : imgProbSrc . select ( 'b1_1' ), }); // Classify the likelihood: Low 0 - 0.6, Moderate 0.6 - 0.8, High 0.8 - 1 var imgProb = imgProbBase . expression ( 'prob = V<0.6?0:(V<0.8?1:(V<=1?2:0*V))' , { 'V' : imgProbBase . select ( 'prob_base' ) }); // Mosaic impact and likelihood image var imgReSrc = imgImpact . addBands ( imgProb ); // Calculate extreme rainfall-triggering flood (ERTF) var imgReBase = imgReSrc . expression ( 'ertf = (x*3) + y + 1' , { 'x' : imgReSrc . select ( 'impact' ), 'y' : imgReSrc . select ( 'prob' ), }); // ERTF matrix 3x4, came from impact and likelihood var imgRe = imgReBase . remap ([ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 , 15 ], [ - 1 , - 1 , - 1 , 0 , 0 , 1 , 0 , 2 , 4 , 3 , 5 , 7 , 6 , 8 , 9 ] ); // Re class matrix into 3 class var imgReClass = imgReBase . remap ([ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 , 15 ], [ - 1 , - 1 , - 1 , 0 , 0 , 1 , 0 , 1 , 2 , 1 , 2 , 3 , 2 , 3 , 3 ]); // Final product from single run return { 're' : imgRe . updateMask ( imgRe . gte ( 0 )), 'reClass' : imgReClass . updateMask ( imgReClass . gte ( 0 )), 'rainfall' : imgBase . updateMask ( imgBase . gt ( 0 )), 'impact' : imgImpact . updateMask ( imgImpact . gt ( 0 )), 'prob' : imgProb . updateMask ( imgProb . gt ( 0 )) }; } Rendering process As a trigger for ERM to do the analysis, user must select the date and number of days of simulation, then GEE will do the rendering process. ui.DateSlider onChange argument will use to start the simulation. // RENDERING //--- // Render map based on DateSlider onChange function render () { // Date Slider var dt = ee . Date ( uiComponents . dateSlider . getValue ()[ 0 ]); // Day of simulation combobox var _numday = uiComponents . daySelect . getValue (); if ( ! _numday ) { return ; } // wait counter for affected pops and crops uiComponents . loadingCounter = 0 ; // Day of simulation var numday = { '1 day' : 1 , '2 days' : 2 , '3 days' : 3 , '4 days' : 4 , '5 days' : 5 }[ _numday ]; // Disable Render button uiComponents . renderButton . setDisabled ( true ); uiComponents . NRTaffectedDate . widgets (). reset ([ ui . Label ({ // Label for date validity in near real time simulation value : 'Potential impact for the last ' + numday + ' day(s), as of ' + dt . format ( 'yyyy-MM-dd' ). getInfo (), style : { color : 'blue' } }) ]); // Loading information after executing render button uiComponents . NRTaffectedPops . widgets (). reset ([ ui . Label ({ value : 'Loading...' }) ]); uiComponents . NRTaffectedCrops . widgets (). reset ([ ui . Label ({ value : 'Loading...' }) ]); uiComponents . FCTaffectedDate . widgets (). reset ([ ui . Label ({ // Label for date validity in forecasst simulation value : 'Potential impact for ' + numday + ' day(s) ahead, issued on ' + dt . format ( 'yyyy-MM-dd' ). getInfo (), style : { color : 'blue' } }) ]); // Loading information after executing render button uiComponents . FCTaffectedPops . widgets (). reset ([ ui . Label ({ value : 'Loading...' }) ]); uiComponents . FCTaffectedCrops . widgets (). reset ([ ui . Label ({ value : 'Loading...' }) ]); // Get all layer result // Near Real Time Result var imageNRT = getRainfallExtremeImage ({ date : dt , numday : numday , imgBase : getImergImage ( dt , numday ), rainfallColumn : 'precipitationCal' }); // Forecast Result var imageFCT = getRainfallExtremeImage ({ date : dt , numday : numday , imgBase : getGfsImage ( dt , numday ), rainfallColumn : 'total_precipitation_surface' }); // Load layer result as map mainMap . layers (). reset (); mainMap . addLayer ( imageFCT . re , visFlood , 'Forecast - Flood Alert' , true ); mainMap . addLayer ( imageNRT . re , visFlood , 'Near Real-Time - Flood Alert' , true ); mainMap . addLayer ( imageFCT . prob , visLikelihood , 'Forecast - Likelihood of Flooding' , false ); mainMap . addLayer ( imageNRT . prob , visLikelihood , 'Near Real-Time - Likelihood of Flooding' , false ); mainMap . addLayer ( imageFCT . impact , visExtreme , 'Forecast - Rainfall exceeding Threshold' , false ); mainMap . addLayer ( imageNRT . impact , visExtreme , 'Near Real-Time - Rainfall exceeding Threshold' , false ); mainMap . addLayer ( imageFCT . rainfall . sldStyle ( visRainfallSLD ), {}, 'Forecast - Rainfall' , false ); mainMap . addLayer ( imageNRT . rainfall . sldStyle ( visRainfallSLD ), {}, 'Near Real-Time - Rainfall' , false ); // Rendering population information renderPopulationInfo ( imageNRT . reClass , uiComponents . NRTaffectedPops ); renderPopulationInfo ( imageFCT . reClass , uiComponents . FCTaffectedPops ); // Rendering crop information renderCropInfo ( imageNRT . reClass , uiComponents . NRTaffectedCrops ); renderCropInfo ( imageFCT . reClass , uiComponents . FCTaffectedCrops ); } Population and cropland affected After all the above process completed, below script will show population aand cropland affected information on the panel by extracting each alert from above process then combine with population data. // IMPACT ANALYSIS //--- // AFFECTED POPULATION // Show Affected Population on Panel function renderPopulationInfo ( imgReClass , targetUi ) { // Mosaic population layer and flood alert layer var imgCombSrc = ghsl . addBands ( imgReClass ); var stats = {}; var reClasses = []; for ( var i = 1 ; i < 4 ; i ++ ) { reClasses . push ( i ); } // Extract each alert then combine with population data var counter = 0 ; reClasses . map ( function ( reClass ) { var imgComb = imgCombSrc . expression ( 'p * (v == c? 1:0)' , { 'p' : imgCombSrc . select ( 'population_count' ), 'v' : imgCombSrc . select ( 'remapped' ), 'c' : reClass }); // Get number of pop affected value for each class var stat = imgComb . reduceRegion ({ reducer : ee . Reducer . sum (), geometry : imgReClass . geometry (), scale : 250 , maxPixels : 1e9 }); stat . evaluate ( function ( s ) { stats [ reClass ] = s . population_count ; counter += 1 ; if ( counter === reClasses . length ) { renderLegend (); } }); }); uiComponents . loadingCounter += 1 ; // Rendering legend for impact analysis function renderLegend () { var widgets = [ [ 'FFEDA0' , 1 ], // Yellow [ 'FEB24C' , 2 ], // Orange [ 'F03B20' , 3 ] // Red ]. map ( function ( p ) { var color = p [ 0 ]; var level = p [ 1 ]; // Dynamic text var label = 'Alert ' + level + ': ' + parseInt ( stats [ level ]). toLocaleString (); return uiComponents . makeLegendBox ( color , label ); }); targetUi . widgets (). reset ( widgets ); uiComponents . loadingCounter -= 1 ; if ( uiComponents . loadingCounter === 0 ) { uiComponents . renderButton . setDisabled ( false ); } } } // AFFECTED CROPLAND // Show Affected Crop on Panel function renderCropInfo ( imgReClass , targetUi ) { // Get cropland class, value 12 and 14. Check https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MCD12Q1#bands var cropmask = mcd12q1 . eq ( 12 ). or ( mcd12q1 . eq ( 14 )); var cropland = mcd12q1 . divide ( mcd12q1 ). updateMask ( cropmask ); // Mosaic cropland layer and flood alert layer var imgCombSrc = cropland . addBands ( imgReClass ); var stats = {}; var reClasses = []; for ( var i = 1 ; i < 4 ; i ++ ) { reClasses . push ( i ); } // Extract each alert then combine with cropland data var counter = 0 ; reClasses . map ( function ( reClass ) { var imgComb = imgCombSrc . expression ( 'p * (v == c? 1:0)' , { 'p' : imgCombSrc . select ( 'LC_Type1' ), 'v' : imgCombSrc . select ( 'remapped' ), 'c' : reClass }); // Get hectares var Cropland_PixelArea = imgComb . multiply ( ee . Image . pixelArea ()). divide ( 10000 ). round (); // Get number of pop affected value for each class var stat = Cropland_PixelArea . reduceRegion ({ reducer : ee . Reducer . sum (), geometry : imgReClass . geometry (), scale : 500 , maxPixels : 1e9 }); stat . evaluate ( function ( s ) { stats [ reClass ] = s . LC_Type1 ; counter += 1 ; if ( counter === reClasses . length ) { renderLegend (); } }); }); uiComponents . loadingCounter += 1 ; function renderLegend () { // Rendering legend for impact analysis var widgets = [ [ 'FFEDA0' , 1 ], // Yellow [ 'FEB24C' , 2 ], // Orange [ 'F03B20' , 3 ] // Red ]. map ( function ( p ) { var color = p [ 0 ]; var level = p [ 1 ]; // Dynamic text var label = 'Alert ' + level + ': ' + parseInt ( stats [ level ]). toLocaleString (); return uiComponents . makeLegendBox ( color , label ); }); targetUi . widgets (). reset ( widgets ); uiComponents . loadingCounter -= 1 ; if ( uiComponents . loadingCounter === 0 ) { uiComponents . renderButton . setDisabled ( false ); } } } Panel configuration The last part is to setup all the supporting information on the Panel. // USER INTERFACE //--- // Initialize UI Components function initializeUIComponents () { // Clear all process ui . root . clear (); var mobileStyle = false ; // ui.Select widget uiComponents . daySelect = ui . Select ({ // Number of simulation day items : [ '1 day' , '2 days' , '3 days' , '4 days' , '5 days' ], placeholder : 'Select number of days' }); // Setting date var today = ee . Date ( new Date ()); var startDate = ee . Date ( '2019-07-01' ); // First GFS data 1 Jul 2015 // ui.DateSlider widget uiComponents . dateSlider = ui . DateSlider ({ start : startDate , end : today . advance ( 1 , 'day' ), value : today , period : 1 , // the unit is day style : { width : '300px' , padding : '10px' , position : 'bottom-left' } }); // Add render button to ui uiComponents . renderButton = ui . Button ({ label : 'Render' , onClick : render }); // Add download button to ui uiComponents . downloadButton = ui . Button ({ label : 'Download Data' , onClick : downloadMap }); // Warning if the parameters is not completed uiComponents . NRTaffectedDate = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); uiComponents . NRTaffectedPops = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); uiComponents . NRTaffectedCrops = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); // Warning if the parameters is not completed uiComponents . FCTaffectedDate = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); uiComponents . FCTaffectedPops = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); uiComponents . FCTaffectedCrops = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); // Legend in a Panel uiComponents . makeLegendBox = function ( color , label ) { var colorBox = ui . Label ({ style : { backgroundColor : '#' + color , padding : mobileStyle ? '10px' : '8px' , margin : '0 0 4px 0' , border : 'solid 0.5px' , } }); var description = ui . Label ({ value : label , style : { margin : '0 0 4px 6px' , fontSize : mobileStyle ? '16px' : '12px' }, }); return ui . Panel ({ widgets : [ colorBox , description ], style : { padding : '0 0 4px 6px' }, layout : ui . Panel . Layout . Flow ( 'horizontal' ) }); }; // Paragraph intro in top of Panel var intro = ui . Panel ({ widgets : [ // Title ui . Label ({ value : 'Extreme rainfall monitoring, will it trigger a flood?' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '22px' : '20px' , margin : '10px 5px' , } }), // Intro ui . Label ({ value : 'ERM is an app that are able to inform where is the estimated location of extreme rainfall ' + 'in the last 5-days (Near Real Time) and up to 5-days ahead (Forecast) based on selected date. ' + 'To learn more about what inside the application, please visit below link:' , style : { fontSize : mobileStyle ? '18px' : '14px' , } }), ui . Label ({ value : 'https://wfpidn.github.io/ERM' , style : { fontSize : mobileStyle ? '18px' : '14px' , } }). setUrl ( 'https://wfpidn.github.io/ERM' ), ui . Label ({ value : 'The computation is over when you see number of affected population below for both near real-time ' + 'and forecasat, and the Render button enable. Every computation required at least a minute to complete ' + 'all the process. PLEASE BE PATIENT! ' , style : { color : 'red' , fontSize : mobileStyle ? '18px' : '14px' , } }), ui . Label ({ value : '_________________________________________________' , style : { fontSize : mobileStyle ? '18px' : '14px' , } }) ] }); // Affected label - near real-time var NRTaffectedPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Near Real-Time' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '18px' : '16px' , // margin: '10px 5px' } }), ] }); // Date information - near real-time var NRTaffectedDatePanel = ui . Panel ({ widgets : [ ui . Label ({ value : '' , style : { color : 'blue' , fontSize : mobileStyle ? '14px' : '12px' , // margin: '10px 5px' } }), uiComponents . NRTaffectedDate ] }); var NRTaffectedPopPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Population affected' , style : { // fontWeight: 'bold', fontSize : mobileStyle ? '16px' : '14px' , margin : '10px 5px' } }), uiComponents . NRTaffectedPops ] }); var NRTaffectedCropPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Cropland affected (Hectares)' , style : { // fontWeight: 'bold', fontSize : mobileStyle ? '16px' : '14px' , margin : '10px 5px' } }), uiComponents . NRTaffectedCrops ] }); // Affected label - near real-time var FCTaffectedPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Forecast' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '18px' : '16px' , // margin: '10px 5px' } }), ] }); // Date information - forecast var FCTaffectedDatePanel = ui . Panel ({ widgets : [ ui . Label ({ value : '' , style : { color : 'blue' , fontSize : mobileStyle ? '14px' : '12px' , // margin: '10px 5px' } }), uiComponents . FCTaffectedDate ] }); var FCTaffectedPopPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Population affected' , style : { // fontWeight: 'bold', fontSize : mobileStyle ? '16px' : '14px' , margin : '10px 5px' } }), uiComponents . FCTaffectedPops ] }); var FCTaffectedCropPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Crop affected (Hectares)' , style : { // fontWeight: 'bold', fontSize : mobileStyle ? '16px' : '14px' , margin : '10px 5px' } }), uiComponents . FCTaffectedCrops ] }); // Legend information for all layers var legendintro = ui . Panel ({ widgets : [ // Line divider ui . Label ({ value : '_________________________________________________' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '18px' : '14px' , margin : '10px 5px' , } }), // Legend label ui . Label ({ value : 'Legend ' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '22px' : '20px' , margin : '10px 5px' , } }) ] }); // Make a legend, style, color, boxes in a panel function makeLegend ( title , boxes ) { return ui . Panel ({ widgets : [ ui . Label ({ value : title , style : { fontSize : mobileStyle ? '18px' : '16px' , margin : '10px 5px' } }), ui . Panel ({ style : { fontSize : '10px' , margin : '0 0 10px 12px' , padding : '0' }, widgets : boxes . map ( function ( b ) { var color = b [ 0 ]; var label = b [ 1 ]; return uiComponents . makeLegendBox ( color , label ); }) }) ] }); } // Color codes var legendRainfall = makeLegend ( 'Rainfall' , [ [ 'ffffff' , 'No Rain ~ No color' ], [ 'cccccc' , '1 - 3 milimeters' ], [ 'f9f3d5' , '4 - 10' ], [ 'dce2a8' , '11 - 20' ], [ 'a8c58d' , '21 - 30' ], [ '77a87d' , '31 - 40' ], [ 'ace8f8' , '41 - 60' ], [ '4cafd9' , '61 - 80' ], [ '1d5ede' , '81 - 100' ], [ '001bc0' , '101 - 120' ], [ '9131f1' , '121 - 150' ], [ 'e983f3' , '151 - 200' ], [ 'f6c7ec' , '> 200' ] ]); var legendCategory = makeLegend ( 'Rainfall Category' , [ [ 'ffffcc' , 'Moderate' ], [ 'a1dab4' , 'Heavy' ], [ '41b6c4' , 'Intense' ], [ '225ea8' , 'Extreme' ] ]); var legendProbability = makeLegend ( 'Likelihood' , [ [ 'f7fcb9' , 'Low' ], [ 'addd8e' , 'Moderate' ], [ '31a354' , 'High' ] ]); var legendAlert = makeLegend ( 'Flood Alert' , [ [ '97D700' , 'Green' ], [ 'ffeda0' , 'Yellow (Category 1 - 3)' ], [ 'FEB24C' , 'Orange (Category 4 - 6)' ], [ 'F03B20' , 'Red (Category 7 - 9)' ] ]); var mainPanel = ui . Panel ({ widgets : [ intro , NRTaffectedPanel , NRTaffectedDatePanel , NRTaffectedPopPanel , NRTaffectedCropPanel , FCTaffectedPanel , FCTaffectedDatePanel , FCTaffectedPopPanel , FCTaffectedCropPanel , legendintro , ui . Panel ({ layout : ui . Panel . Layout . flow ( 'horizontal' ), widgets : [ ui . Panel ({ widgets : [ legendRainfall , ] }), ui . Panel ({ widgets : [ legendCategory , legendProbability , legendAlert ] }) ] }) ], style : { width : '350px' , padding : '8px' } }); ui . root . widgets (). reset ([ mainPanel , mainMap ]); ui . root . setLayout ( ui . Panel . Layout . flow ( 'horizontal' )); mainMap . setControlVisibility ( true ); mainMap . setCenter ( 118.2 , - 2.5 , 5.4 ); mainMap . add ( ui . Panel ({ widgets : [ uiComponents . daySelect , uiComponents . renderButton , uiComponents . downloadButton , ], layout : ui . Panel . Layout . Flow ( 'horizontal' ), style : { position : 'bottom-left' } })); mainMap . add ( uiComponents . dateSlider ); } initializeUIComponents (); Data Downloads This download feature is not available in the app version, and only accessible via GEE code user interface. To access this feature, you must have an access to GEE. // DATA DOWNLOADS //--- // Download all layer output to Google Drive function downloadMap () { var _numday = uiComponents . daySelect . getValue (); if ( ! _numday ) { return ; } // Day of simulation var numday = { '1 day' : 1 , '2 days' : 2 , '3 days' : 3 , '4 days' : 4 , '5 days' : 5 }[ _numday ]; // As the download request probably takes some time, we need to warn the user, // so they not repeating click the download button alert ( \"If you see this message, the download request is started! Please go to Tasks, wait until the download list appear. Click RUN for each data you want to download\" ); // Downloading data // Export the result to Google Drive var download_date = ee . Date ( uiComponents . dateSlider . getValue ()[ 0 ]); var dt = download_date ; // Near Real Time Result var imageNRT = getRainfallExtremeImage ({ date : dt , numday : numday , imgBase : getImergImage ( dt , numday ), rainfallColumn : 'precipitationCal' }); // Forecast Result var imageFCT = getRainfallExtremeImage ({ date : dt , numday : numday , imgBase : getGfsImage ( dt , numday ), rainfallColumn : 'total_precipitation_surface' }); // Near Real-Time Precipitation Export . image . toDrive ({ image : imageNRT . rainfall , description : 'NRT_Precipitation_last_' + numday + 'day_as_of_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Forecast Precipitation Export . image . toDrive ({ image : imageFCT . rainfall , description : 'FCT_Precipitation_' + numday + 'day_ahead_issued_on_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Near Real-Time Extreme Precipitation (exceeding the threshold) Export . image . toDrive ({ image : imageNRT . impact , description : 'NRT_ExtremePrecip_last_' + numday + 'day_as_of_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Forecast Extreme Precipitation (exceeding the threshold) Export . image . toDrive ({ image : imageFCT . impact , description : 'FCT_ExtremePrecip_' + numday + 'day_ahead_issued_on_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Near Real-Time Likelihood of Pixel will be Inundated Export . image . toDrive ({ image : imageNRT . prob , description : 'NRT_Likelihood_last_' + numday + 'day_as_of_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Forecast Likelihood of Pixel will be Inundated Export . image . toDrive ({ image : imageFCT . prob , description : 'FCT_Likelihood_' + numday + 'day_ahead_issued_on_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Near Real-Time Extreme Rainfall-triggering Flood Export . image . toDrive ({ image : imageNRT . re , description : 'NRT_FloodAlert_last_' + numday + 'day_as_of_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Forecast Extreme Rainfall-triggering Flood Export . image . toDrive ({ image : imageFCT . re , description : 'FCT_FloodAlert_' + numday + 'day_ahead_issued_on_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); print ( 'Data Downloaded!' , download_date ); } End of script. Find the complete code via this link https://code.earthengine.google.com/fb7cc9b41222334c47be6d6b23d70829 Notes The GEE script is written by Benny Istanto and Ridwan Mulyadi. Both are working as Climate Analyst and System Developer at VAM unit, UN WFP Indonesia. UPDATE: Benny Istanto is no longer with WFP since August 2021.","title":"Google Earth Engine"},{"location":"gee/#google-earth-engine","text":"Below is the example on how we translate all the process in GEE platform.","title":"Google Earth Engine"},{"location":"gee/#global-variable","text":"First we need to declare the global variable like basemap and color codes. As the ERM result is colorful, it's better to use Grey Style basemap so the map result will clearly visible. ERM will produce 4 outputs: Rainfall Rainfall exceeding the threshold Likelihood of triggering flood Extreme rainfall triggering a flood (Flood Alert) And impact analysis on Number of affected population per alert category Number of affected cropland per alert category And each output will visualize with different classification. // GLOBAL VARIABLE (Basemap, Color, Static Data, Mask and others) //--- // ui Map and Panel configuration var mainMap = ui . Map (); var uiComponents = {}; // MAP STYLE //-- // Grey style from https://developers.google.com/maps/documentation/javascript/examples/style-selector function mapStyle () { return [ { elementType : \"geometry\" , stylers : [{ color : \"#f5f5f5\" }], }, { elementType : \"labels.icon\" , stylers : [{ visibility : \"off\" }], }, { elementType : \"labels.text.fill\" , stylers : [{ color : \"#616161\" }], }, { elementType : \"labels.text.stroke\" , stylers : [{ color : \"#f5f5f5\" }], }, { featureType : \"administrative.land_parcel\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#bdbdbd\" }], }, { featureType : \"poi\" , elementType : \"geometry\" , stylers : [{ color : \"#eeeeee\" }], }, { featureType : \"poi\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#757575\" }], }, { featureType : \"poi.park\" , elementType : \"geometry\" , stylers : [{ color : \"#e5e5e5\" }], }, { featureType : \"poi.park\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#9e9e9e\" }], }, { featureType : \"road\" , elementType : \"geometry\" , stylers : [{ color : \"#ffffff\" }], }, { featureType : \"road.arterial\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#757575\" }], }, { featureType : \"road.highway\" , elementType : \"geometry\" , stylers : [{ color : \"#dadada\" }], }, { featureType : \"road.highway\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#616161\" }], }, { featureType : \"road.local\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#9e9e9e\" }], }, { featureType : \"transit.line\" , elementType : \"geometry\" , stylers : [{ color : \"#e5e5e5\" }], }, { featureType : \"transit.station\" , elementType : \"geometry\" , stylers : [{ color : \"#eeeeee\" }], }, { featureType : \"water\" , elementType : \"geometry\" , stylers : [{ color : \"#c9c9c9\" }], }, { featureType : \"water\" , elementType : \"labels.text.fill\" , stylers : [{ color : \"#9e9e9e\" }], }, ]; } // Grey basemap mainMap . style (). set ( 'cursor' , 'crosshair' ); mainMap . setOptions ( 'Grey' , { Grey : mapStyle () }); // SYMBOLOGY // Visualization palette, Color-codes based on Color-Brewer https://colorbrewer2.org/ // Standard symbology for rainfall var visRainfall = { min : 1 , max : 100 , opacity : 0.7 , palette : [ 'cccccc' , 'f9f3d5' , 'dce2a8' , 'a8c58d' , '77a87d' , 'ace8f8' , '4cafd9' , '1d5ede' , '001bc0' , '9131f1' , 'e983f3' , 'f6c7ec' ] }; // Standard symbology for extreme rainfall class var visExtreme = { min : 1 , max : 4 , opacity : 0.7 , palette : [ 'ffffcc' , 'a1dab4' , '41b6c4' , '225ea8' ] }; // Standard symbology for likelihood of flooding var visLikelihood = { min : 1 , max : 3 , opacity : 0.7 , palette : [ 'f7fcb9' , 'addd8e' , '31a354' ] }; // Standard symbology for extreme rainfall triggering flood alert class var visFlood = { min : 0 , max : 9 , opacity : 0.7 , palette : [ '97D700' , 'FFEDA0' , 'FFEDA0' , 'FFEDA0' , 'FEB24C' , 'FEB24C' , 'FEB24C' , 'F03B20' , 'F03B20' , 'F03B20' ] }; // Standard symbology for population exposed var visPopulation = { min : 0 , max : 50.0 , opacity : 0.7 , palette : [ 'yellow' , 'orange' , 'red' ], }; // Define an SLD style of discrete intervals to apply to the image. // Notes: SLD visualisation will make the data rendered as RGB during point inspector into a pixel. var visRainfallSLD = '<RasterSymbolizer>' + '<ColorMap type=\"ramp\" extended=\"false\" >' + '<ColorMapEntry color=\"#ffffff\" opacity=\"0.0\" quantity=\"1\" label=\"No Rain\" />' + '<ColorMapEntry color=\"#cccccc\" opacity=\"0.7\" quantity=\"3\" label=\"1-3\" />' + '<ColorMapEntry color=\"#f9f3d5\" opacity=\"0.7\" quantity=\"10\" label=\"4-10\" />' + '<ColorMapEntry color=\"#dce2a8\" opacity=\"0.7\" quantity=\"20\" label=\"11-20\" />' + '<ColorMapEntry color=\"#a8c58d\" opacity=\"0.7\" quantity=\"30\" label=\"21-30\" />' + '<ColorMapEntry color=\"#77a87d\" opacity=\"0.7\" quantity=\"40\" label=\"31-40\" />' + '<ColorMapEntry color=\"#ace8f8\" opacity=\"0.7\" quantity=\"60\" label=\"41-60\" />' + '<ColorMapEntry color=\"#4cafd9\" opacity=\"0.7\" quantity=\"80\" label=\"61-80\" />' + '<ColorMapEntry color=\"#1d5ede\" opacity=\"0.7\" quantity=\"100\" label=\"81-100\" />' + '<ColorMapEntry color=\"#001bc0\" opacity=\"0.7\" quantity=\"120\" label=\"101-120\" />' + '<ColorMapEntry color=\"#9131f1\" opacity=\"0.7\" quantity=\"150\" label=\"121-150\" />' + '<ColorMapEntry color=\"#e983f3\" opacity=\"0.7\" quantity=\"200\" label=\"151-200\" />' + '<ColorMapEntry color=\"#f6c7ec\" opacity=\"0.7\" quantity=\"1000\" label=\"&gt; 200\" />' + '</ColorMap>' + '</RasterSymbolizer>' ;","title":"Global variable"},{"location":"gee/#main-input","text":"All of the data required by ERM is available for global coverage, and the focus for ERM is only for Indonesia. Then we need to have a layer as a Masked for Indonesia. The file is available via assets: users/bennyistanto/datasets/raster/extremerainfall/mask/idn_bnd_imerg_subset We will use Masked layer to clip all of the main input data: IMERG, for near real-time monitoring GFS, for forecast simulation GHSL, for calculate affected population MODIS MCD12Q1, for calculate affected cropland and urban areas. Currently ERM use GHSL population data to calculate the affected population due to flood. There is a plan to extend the analysis using Facebook HRSL data, so we can get breakdown affected population by age, the we could get number of vulnerable population. // MAIN INPUT //--- // Masking image function maskImage ( image ) { var imergMask = ee . Image ( 'users/bennyistanto/datasets/raster/extremerainfall/mask/idn_bnd_imerg_subset' ); return image . updateMask ( imergMask ); } var idnMask = ee . Image ( 'users/bennyistanto/datasets/raster/extremerainfall/mask/idn_bnd_imerg_subset' ); // Near Real Time data // Import NASA GPM IMERG 30 minute data and calculate accumulation for 1day. var imerg = ee . ImageCollection ( \"NASA/GPM_L3/IMERG_V06\" ); // Get IMERG projection information var IMERGprojection = ee . Image ( imerg . first ()). projection (); // Forecast data // Import GFS data - https://developers.google.com/earth-engine/datasets/catalog/NOAA_GFS0P25 var gfs = ee . ImageCollection ( 'NOAA/GFS0P25' ); // Population grid // Import Global Human Settlement Popluation Density layer (GHSL) data. Resolution: 250. Number of people per cell is given. // https://developers.google.com/earth-engine/datasets/catalog/JRC_GHSL_P2016_POP_GPW_GLOBE_V1#bands var ghsl_raw = maskImage ( ee . Image ( ee . ImageCollection ( \"JRC/GHSL/P2016/POP_GPW_GLOBE_V1\" ). first ()). select ( 'population_count' )); var ghsl = ghsl_raw . updateMask ( ghsl_raw . gt ( 0 )); // Get GHSL projection information var GHSLprojection = ghsl . projection (); // MODIS Global Annual Land Cover 500m - year 2019, filter image collection by the most up-to-date MODIS Land Cover product // Import Crop extent data - https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MCD12Q1#bands // LC_Type1 using Annual International Geosphere-Biosphere Programme (IGBP) classification var mcd12q1_raw = ee . Image ( 'MODIS/006/MCD12Q1/2019_01_01' ). select ( \"LC_Type1\" ); var mcd12q1 = mcd12q1_raw . updateMask ( mcd12q1_raw . gt ( 0 )); // Get MODIS projection information var MODISprojection = mcd12q1_raw . projection ();","title":"Main input"},{"location":"gee/#calling-the-assets","text":"ERM required some of input (threshold, slope and intercept layer) that already prepared via different platform: ArcGIS Pro, R Statistics, and Excel. All the layer uploaded as GEE assets. // Import threshold by pixel that exceeding the Percentile 50, 80, 90 and 96 of rainfall based on 1-day, 2-day, // 3-day, 4-day and 5-days of annual maximum rainfall from 1981 - 2019 // // Link to assets https://code.earthengine.google.com/?asset=users/bennyistanto/datasets/raster/extremerainfall/threshold/ // Threshold data for 1-day rainfall accumulation scenario var Day1_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_1day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day1_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_1day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day1_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_1day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day1_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_1day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Threshold data 2-day rainfall accumulation scenario var Day2_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_2day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day2_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_2day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day2_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_2day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day2_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_2day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Threshold data 3-day rainfall accumulation scenario var Day3_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_3day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day3_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_3day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day3_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_3day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day3_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_3day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Threshold data 4-day rainfall accumulation scenario var Day4_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_4day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day4_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_4day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day4_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_4day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day4_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_4day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Threshold data 5-day rainfall accumulation scenario var Day5_P50 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_5day_precipthreshold_q0500_2yr_imerg_wfp\" ); var Day5_P80 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_5day_precipthreshold_q0800_5yr_imerg_wfp\" ); var Day5_P90 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_5day_precipthreshold_q0900_10yr_imerg_wfp\" ); var Day5_P96 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_5day_precipthreshold_q0960_25yr_imerg_wfp\" ); // Import Slope and Intercept for calculating probability based on focal linear regression between rainfall and historical // flood occurrence. Focal (linear) regression between every 5x5 pixels group of cells of two rasters was done using R. // // Link to assets https://code.earthengine.google.com/?asset=users/bennyistanto/datasets/raster/extremerainfall/slope // Slope data for 1-day rainfall accumulation scenario var Slope_Day1_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_01_jan_slope_imerg\" ); var Slope_Day1_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_02_feb_slope_imerg\" ); var Slope_Day1_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_03_mar_slope_imerg\" ); var Slope_Day1_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_04_apr_slope_imerg\" ); var Slope_Day1_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_05_may_slope_imerg\" ); var Slope_Day1_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_06_jun_slope_imerg\" ); var Slope_Day1_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_07_jul_slope_imerg\" ); var Slope_Day1_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_08_aug_slope_imerg\" ); var Slope_Day1_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_09_sep_slope_imerg\" ); var Slope_Day1_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_10_oct_slope_imerg\" ); var Slope_Day1_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_11_nov_slope_imerg\" ); var Slope_Day1_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_12_dec_slope_imerg\" ); // Slope data for 2-days rainfall accumulation scenario var Slope_Day2_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_01_jan_slope_imerg\" ); var Slope_Day2_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_02_feb_slope_imerg\" ); var Slope_Day2_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_03_mar_slope_imerg\" ); var Slope_Day2_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_04_apr_slope_imerg\" ); var Slope_Day2_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_05_may_slope_imerg\" ); var Slope_Day2_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_06_jun_slope_imerg\" ); var Slope_Day2_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_07_jul_slope_imerg\" ); var Slope_Day2_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_08_aug_slope_imerg\" ); var Slope_Day2_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_09_sep_slope_imerg\" ); var Slope_Day2_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_10_oct_slope_imerg\" ); var Slope_Day2_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_11_nov_slope_imerg\" ); var Slope_Day2_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day2_12_dec_slope_imerg\" ); // Slope data for 3-days rainfall accumulation scenario var Slope_Day3_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_01_jan_slope_imerg\" ); var Slope_Day3_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_02_feb_slope_imerg\" ); var Slope_Day3_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_03_mar_slope_imerg\" ); var Slope_Day3_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_04_apr_slope_imerg\" ); var Slope_Day3_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_05_may_slope_imerg\" ); var Slope_Day3_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_06_jun_slope_imerg\" ); var Slope_Day3_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_07_jul_slope_imerg\" ); var Slope_Day3_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_08_aug_slope_imerg\" ); var Slope_Day3_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_09_sep_slope_imerg\" ); var Slope_Day3_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_10_oct_slope_imerg\" ); var Slope_Day3_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_11_nov_slope_imerg\" ); var Slope_Day3_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day3_12_dec_slope_imerg\" ); // Slope data for 4-days rainfall accumulation scenario var Slope_Day4_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_01_jan_slope_imerg\" ); var Slope_Day4_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_02_feb_slope_imerg\" ); var Slope_Day4_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_03_mar_slope_imerg\" ); var Slope_Day4_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_04_apr_slope_imerg\" ); var Slope_Day4_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_05_may_slope_imerg\" ); var Slope_Day4_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_06_jun_slope_imerg\" ); var Slope_Day4_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_07_jul_slope_imerg\" ); var Slope_Day4_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_08_aug_slope_imerg\" ); var Slope_Day4_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_09_sep_slope_imerg\" ); var Slope_Day4_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_10_oct_slope_imerg\" ); var Slope_Day4_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_11_nov_slope_imerg\" ); var Slope_Day4_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day4_12_dec_slope_imerg\" ); // Slope data for 5-days rainfall accumulation scenario var Slope_Day5_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_01_jan_slope_imerg\" ); var Slope_Day5_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_02_feb_slope_imerg\" ); var Slope_Day5_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_03_mar_slope_imerg\" ); var Slope_Day5_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_04_apr_slope_imerg\" ); var Slope_Day5_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_05_may_slope_imerg\" ); var Slope_Day5_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_06_jun_slope_imerg\" ); var Slope_Day5_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_07_jul_slope_imerg\" ); var Slope_Day5_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_08_aug_slope_imerg\" ); var Slope_Day5_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_09_sep_slope_imerg\" ); var Slope_Day5_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_10_oct_slope_imerg\" ); var Slope_Day5_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_11_nov_slope_imerg\" ); var Slope_Day5_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day5_12_dec_slope_imerg\" ); // Link to assets https://code.earthengine.google.com/?asset=users/bennyistanto/datasets/raster/extremerainfall/intercept // Intercept data for 1-day rainfall accumulation scenario var Intercept_Day1_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_01_jan_intercept_imerg\" ); var Intercept_Day1_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_02_feb_intercept_imerg\" ); var Intercept_Day1_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_03_mar_intercept_imerg\" ); var Intercept_Day1_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_04_apr_intercept_imerg\" ); var Intercept_Day1_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_05_may_intercept_imerg\" ); var Intercept_Day1_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_06_jun_intercept_imerg\" ); var Intercept_Day1_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_07_jul_intercept_imerg\" ); var Intercept_Day1_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_08_aug_intercept_imerg\" ); var Intercept_Day1_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_09_sep_intercept_imerg\" ); var Intercept_Day1_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_10_oct_intercept_imerg\" ); var Intercept_Day1_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_11_nov_intercept_imerg\" ); var Intercept_Day1_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_12_dec_intercept_imerg\" ); // Intercept data for 2-days rainfall accumulation scenario var Intercept_Day2_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_01_jan_intercept_imerg\" ); var Intercept_Day2_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_02_feb_intercept_imerg\" ); var Intercept_Day2_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_03_mar_intercept_imerg\" ); var Intercept_Day2_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_04_apr_intercept_imerg\" ); var Intercept_Day2_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_05_may_intercept_imerg\" ); var Intercept_Day2_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_06_jun_intercept_imerg\" ); var Intercept_Day2_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_07_jul_intercept_imerg\" ); var Intercept_Day2_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_08_aug_intercept_imerg\" ); var Intercept_Day2_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_09_sep_intercept_imerg\" ); var Intercept_Day2_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_10_oct_intercept_imerg\" ); var Intercept_Day2_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_11_nov_intercept_imerg\" ); var Intercept_Day2_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day2_12_dec_intercept_imerg\" ); // Intercept data for 3-days rainfall accumulation scenario var Intercept_Day3_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_01_jan_intercept_imerg\" ); var Intercept_Day3_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_02_feb_intercept_imerg\" ); var Intercept_Day3_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_03_mar_intercept_imerg\" ); var Intercept_Day3_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_04_apr_intercept_imerg\" ); var Intercept_Day3_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_05_may_intercept_imerg\" ); var Intercept_Day3_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_06_jun_intercept_imerg\" ); var Intercept_Day3_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_07_jul_intercept_imerg\" ); var Intercept_Day3_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_08_aug_intercept_imerg\" ); var Intercept_Day3_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_09_sep_intercept_imerg\" ); var Intercept_Day3_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_10_oct_intercept_imerg\" ); var Intercept_Day3_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_11_nov_intercept_imerg\" ); var Intercept_Day3_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day3_12_dec_intercept_imerg\" ); // Intercept data for 4-days rainfall accumulation scenario var Intercept_Day4_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_01_jan_intercept_imerg\" ); var Intercept_Day4_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_02_feb_intercept_imerg\" ); var Intercept_Day4_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_03_mar_intercept_imerg\" ); var Intercept_Day4_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_04_apr_intercept_imerg\" ); var Intercept_Day4_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_05_may_intercept_imerg\" ); var Intercept_Day4_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_06_jun_intercept_imerg\" ); var Intercept_Day4_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_07_jul_intercept_imerg\" ); var Intercept_Day4_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_08_aug_intercept_imerg\" ); var Intercept_Day4_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_09_sep_intercept_imerg\" ); var Intercept_Day4_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_10_oct_intercept_imerg\" ); var Intercept_Day4_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_11_nov_intercept_imerg\" ); var Intercept_Day4_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day4_12_dec_intercept_imerg\" ); // Intercept data for 5-days rainfall accumulation scenario var Intercept_Day5_1 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_01_jan_intercept_imerg\" ); var Intercept_Day5_2 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_02_feb_intercept_imerg\" ); var Intercept_Day5_3 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_03_mar_intercept_imerg\" ); var Intercept_Day5_4 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_04_apr_intercept_imerg\" ); var Intercept_Day5_5 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_05_may_intercept_imerg\" ); var Intercept_Day5_6 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_06_jun_intercept_imerg\" ); var Intercept_Day5_7 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_07_jul_intercept_imerg\" ); var Intercept_Day5_8 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_08_aug_intercept_imerg\" ); var Intercept_Day5_9 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_09_sep_intercept_imerg\" ); var Intercept_Day5_10 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_10_oct_intercept_imerg\" ); var Intercept_Day5_11 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_11_nov_intercept_imerg\" ); var Intercept_Day5_12 = ee . Image ( \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day5_12_dec_intercept_imerg\" ); As alternative, we could simplify above script to read the assets by write the function for each category. // FUNCTION //--- // Get Threshold Image function getThresholdImage ( p , numday ) { var q = { 'P50' : 'q0500_2yr' , // Percentile 50, 2-year return period 'P80' : 'q0800_5yr' , // Percentile 80, 5-year return period 'P90' : 'q0900_10yr' , // Percentile 90, 10-year return period 'P96' : 'q0960_25yr' // Percentile 96, 25-year return period }[ p ]; var path = 'users/bennyistanto/datasets/raster/extremerainfall/threshold/idn_cli_' + numday + 'day_precipthreshold_' + q + '_imerg_wfp' ; return ee . Image ( path ); } // Get Slope Image // File and location for Day1 and January: \"users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day1_01_jan_slope_imerg\" function getSlopeImage ( month , numday ) { var m = [ '' , '01_jan' , '02_feb' , '03_mar' , '04_apr' , '05_may' , '06_jun' , '07_jul' , '08_aug' , '09_sep' , '10_oct' , '11_nov' , '12_dec' ][ month ]; var path = 'users/bennyistanto/datasets/raster/extremerainfall/slope/idn_cli_day' + numday + '_' + m + '_slope_imerg' ; return ee . Image ( path ); } // Get Intercept Image // File and location for Day1 and January: \"users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day1_01_jan_intercept_imerg\" function getInterceptImage ( month , numday ) { var m = [ '' , '01_jan' , '02_feb' , '03_mar' , '04_apr' , '05_may' , '06_jun' , '07_jul' , '08_aug' , '09_sep' , '10_oct' , '11_nov' , '12_dec' ][ month ]; var path = 'users/bennyistanto/datasets/raster/extremerainfall/intercept/idn_cli_day' + numday + '_' + m + '_intercept_imerg' ; return ee . Image ( path ); }","title":"Calling the assets"},{"location":"gee/#function-to-grab-rainfall-data","text":"Next is creating function to get near real-time data using IMERG and forecast data using GFS. We will have scenario from last 5-days and up to 5-days ahead based on selected date. So we need to prepare rainfall accumulation for both scenario. Below is a function to get near real-time // Get near real-time data (IMERG Image) function getImergImage ( dt , numday ) { // 24 ~ 1day. To get previous data I used negative value var hours = - 24 * numday ; return imerg // ee.ImageCollection('NASA/GPM_L3/IMERG_V06') . select ( 'precipitationCal' ) . filterDate ( dt . advance ( hours , 'hour' ), dt ) . map ( maskImage ) . sum (). float (); } And this is a function to get a forecast data // Get forecast data (GFS Image) function getGfsImage ( dt , numday ) { // Grab forecast data for hours 6,12,18,24 (Day1) 30,36,42,48 (Day2) 54,60,66,72 (Day3) // 78,84,90,96 (Day4) 102,108,114 and 120 (Day5) var hours = []; for ( var i = 0 ; i < numday ; i ++ ) { for ( var j = 0 ; j < 4 ; j ++ ) { var h = ( i * 24 ) + (( j + 1 ) * 6 ); hours . push ( h ); } } return gfs // ee.ImageCollection('NOAA/GFS0P25') . select ( 'total_precipitation_surface' ) . filterDate ( dt , dt . advance ( 6 , 'hour' )) . filter ( ee . Filter . inList ( 'forecast_hours' , hours )) . map ( maskImage ) . sum () // .resample('bicubic') // One of 'bilinear' or 'bicubic' . reproject ({ crs : IMERGprojection . atScale ( 11131.949079327358 ) }); }","title":"Function to grab rainfall data"},{"location":"gee/#extreme-rainfall-analysis","text":"And the next script is the main analysis, computing extreme rainfall. It consist of many sub analysis: Getting all input together Extract a pixel of rainfall exceeding the threshold, called as impact Calculate the likelihood a pixel of rainfall will trigger a flood or not Classify the likelihood: Low 0 - 0.6, Moderate 0.6 - 0.8, High 0.8 - 1 Calculate extreme rainfall-triggering flood (ERTF) Creating matrix 3x4, the source came from impact and likelihood Re class matrix into 3 class Final product from single run // EXTREME RAINFALL ANALYSIS //---- // Get images for rainfall accumulation, extreme rainfall, probability and the alert // Base image can be from IMERG or GFS function getRainfallExtremeImage ( params ) { var dt = params . date ; var numday = params . numday ; var imgBase = params . imgBase ; var rainfallColumn = params . rainfallColumn ; // Get month information to match data for Threshold, Slope and Intercept var month = dt . get ( 'month' ). getInfo (); // Get data for Threshold, Slope and Intercept based on date // Threshold var P50 = getThresholdImage ( 'P50' , numday ); // Percentile 50, 2-year return period var P80 = getThresholdImage ( 'P80' , numday ); // Percentile 80, 5-year return period var P90 = getThresholdImage ( 'P90' , numday ); // Percentile 90, 10-year return period var P96 = getThresholdImage ( 'P96' , numday ); // Percentile 96, 25-year return period // Slope var imgSlope = getSlopeImage ( month , numday ); // Intercept var imgIntercept = getInterceptImage ( month , numday ); // Mosaic rainfall with threshold images var imgImpactSrc = imgBase . addBands ( P50 ) . addBands ( P80 ) . addBands ( P90 ) . addBands ( P96 ); // Extract a pixel of rainfall exceeding the threshold, called as impact var imgImpact = imgImpactSrc . expression ( 'impact = R>P96?4:(R>P90?3:(R>P80?2:(R>P50?1:R*0)))' , { 'R' : imgImpactSrc . select ( rainfallColumn ), 'P50' : imgImpactSrc . select ( 'b1' ), 'P80' : imgImpactSrc . select ( 'b1_1' ), 'P90' : imgImpactSrc . select ( 'b1_2' ), 'P96' : imgImpactSrc . select ( 'b1_3' ), }); // Mosaic rainfall with slope and intercepts images var imgProbSrc = imgBase . addBands ( imgSlope ) . addBands ( imgIntercept ); // Calculate the likelihood a pixel of rainfall will trigger a flood or not var imgProbBase = imgProbSrc . expression ( 'prob_base = 1/(1+(e **(-((S*R)+I))))' , { 'e' : Math . E , 'R' : imgProbSrc . select ( rainfallColumn ), 'S' : imgProbSrc . select ( 'b1' ), 'I' : imgProbSrc . select ( 'b1_1' ), }); // Classify the likelihood: Low 0 - 0.6, Moderate 0.6 - 0.8, High 0.8 - 1 var imgProb = imgProbBase . expression ( 'prob = V<0.6?0:(V<0.8?1:(V<=1?2:0*V))' , { 'V' : imgProbBase . select ( 'prob_base' ) }); // Mosaic impact and likelihood image var imgReSrc = imgImpact . addBands ( imgProb ); // Calculate extreme rainfall-triggering flood (ERTF) var imgReBase = imgReSrc . expression ( 'ertf = (x*3) + y + 1' , { 'x' : imgReSrc . select ( 'impact' ), 'y' : imgReSrc . select ( 'prob' ), }); // ERTF matrix 3x4, came from impact and likelihood var imgRe = imgReBase . remap ([ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 , 15 ], [ - 1 , - 1 , - 1 , 0 , 0 , 1 , 0 , 2 , 4 , 3 , 5 , 7 , 6 , 8 , 9 ] ); // Re class matrix into 3 class var imgReClass = imgReBase . remap ([ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 , 11 , 12 , 13 , 14 , 15 ], [ - 1 , - 1 , - 1 , 0 , 0 , 1 , 0 , 1 , 2 , 1 , 2 , 3 , 2 , 3 , 3 ]); // Final product from single run return { 're' : imgRe . updateMask ( imgRe . gte ( 0 )), 'reClass' : imgReClass . updateMask ( imgReClass . gte ( 0 )), 'rainfall' : imgBase . updateMask ( imgBase . gt ( 0 )), 'impact' : imgImpact . updateMask ( imgImpact . gt ( 0 )), 'prob' : imgProb . updateMask ( imgProb . gt ( 0 )) }; }","title":"Extreme rainfall analysis"},{"location":"gee/#rendering-process","text":"As a trigger for ERM to do the analysis, user must select the date and number of days of simulation, then GEE will do the rendering process. ui.DateSlider onChange argument will use to start the simulation. // RENDERING //--- // Render map based on DateSlider onChange function render () { // Date Slider var dt = ee . Date ( uiComponents . dateSlider . getValue ()[ 0 ]); // Day of simulation combobox var _numday = uiComponents . daySelect . getValue (); if ( ! _numday ) { return ; } // wait counter for affected pops and crops uiComponents . loadingCounter = 0 ; // Day of simulation var numday = { '1 day' : 1 , '2 days' : 2 , '3 days' : 3 , '4 days' : 4 , '5 days' : 5 }[ _numday ]; // Disable Render button uiComponents . renderButton . setDisabled ( true ); uiComponents . NRTaffectedDate . widgets (). reset ([ ui . Label ({ // Label for date validity in near real time simulation value : 'Potential impact for the last ' + numday + ' day(s), as of ' + dt . format ( 'yyyy-MM-dd' ). getInfo (), style : { color : 'blue' } }) ]); // Loading information after executing render button uiComponents . NRTaffectedPops . widgets (). reset ([ ui . Label ({ value : 'Loading...' }) ]); uiComponents . NRTaffectedCrops . widgets (). reset ([ ui . Label ({ value : 'Loading...' }) ]); uiComponents . FCTaffectedDate . widgets (). reset ([ ui . Label ({ // Label for date validity in forecasst simulation value : 'Potential impact for ' + numday + ' day(s) ahead, issued on ' + dt . format ( 'yyyy-MM-dd' ). getInfo (), style : { color : 'blue' } }) ]); // Loading information after executing render button uiComponents . FCTaffectedPops . widgets (). reset ([ ui . Label ({ value : 'Loading...' }) ]); uiComponents . FCTaffectedCrops . widgets (). reset ([ ui . Label ({ value : 'Loading...' }) ]); // Get all layer result // Near Real Time Result var imageNRT = getRainfallExtremeImage ({ date : dt , numday : numday , imgBase : getImergImage ( dt , numday ), rainfallColumn : 'precipitationCal' }); // Forecast Result var imageFCT = getRainfallExtremeImage ({ date : dt , numday : numday , imgBase : getGfsImage ( dt , numday ), rainfallColumn : 'total_precipitation_surface' }); // Load layer result as map mainMap . layers (). reset (); mainMap . addLayer ( imageFCT . re , visFlood , 'Forecast - Flood Alert' , true ); mainMap . addLayer ( imageNRT . re , visFlood , 'Near Real-Time - Flood Alert' , true ); mainMap . addLayer ( imageFCT . prob , visLikelihood , 'Forecast - Likelihood of Flooding' , false ); mainMap . addLayer ( imageNRT . prob , visLikelihood , 'Near Real-Time - Likelihood of Flooding' , false ); mainMap . addLayer ( imageFCT . impact , visExtreme , 'Forecast - Rainfall exceeding Threshold' , false ); mainMap . addLayer ( imageNRT . impact , visExtreme , 'Near Real-Time - Rainfall exceeding Threshold' , false ); mainMap . addLayer ( imageFCT . rainfall . sldStyle ( visRainfallSLD ), {}, 'Forecast - Rainfall' , false ); mainMap . addLayer ( imageNRT . rainfall . sldStyle ( visRainfallSLD ), {}, 'Near Real-Time - Rainfall' , false ); // Rendering population information renderPopulationInfo ( imageNRT . reClass , uiComponents . NRTaffectedPops ); renderPopulationInfo ( imageFCT . reClass , uiComponents . FCTaffectedPops ); // Rendering crop information renderCropInfo ( imageNRT . reClass , uiComponents . NRTaffectedCrops ); renderCropInfo ( imageFCT . reClass , uiComponents . FCTaffectedCrops ); }","title":"Rendering process"},{"location":"gee/#population-and-cropland-affected","text":"After all the above process completed, below script will show population aand cropland affected information on the panel by extracting each alert from above process then combine with population data. // IMPACT ANALYSIS //--- // AFFECTED POPULATION // Show Affected Population on Panel function renderPopulationInfo ( imgReClass , targetUi ) { // Mosaic population layer and flood alert layer var imgCombSrc = ghsl . addBands ( imgReClass ); var stats = {}; var reClasses = []; for ( var i = 1 ; i < 4 ; i ++ ) { reClasses . push ( i ); } // Extract each alert then combine with population data var counter = 0 ; reClasses . map ( function ( reClass ) { var imgComb = imgCombSrc . expression ( 'p * (v == c? 1:0)' , { 'p' : imgCombSrc . select ( 'population_count' ), 'v' : imgCombSrc . select ( 'remapped' ), 'c' : reClass }); // Get number of pop affected value for each class var stat = imgComb . reduceRegion ({ reducer : ee . Reducer . sum (), geometry : imgReClass . geometry (), scale : 250 , maxPixels : 1e9 }); stat . evaluate ( function ( s ) { stats [ reClass ] = s . population_count ; counter += 1 ; if ( counter === reClasses . length ) { renderLegend (); } }); }); uiComponents . loadingCounter += 1 ; // Rendering legend for impact analysis function renderLegend () { var widgets = [ [ 'FFEDA0' , 1 ], // Yellow [ 'FEB24C' , 2 ], // Orange [ 'F03B20' , 3 ] // Red ]. map ( function ( p ) { var color = p [ 0 ]; var level = p [ 1 ]; // Dynamic text var label = 'Alert ' + level + ': ' + parseInt ( stats [ level ]). toLocaleString (); return uiComponents . makeLegendBox ( color , label ); }); targetUi . widgets (). reset ( widgets ); uiComponents . loadingCounter -= 1 ; if ( uiComponents . loadingCounter === 0 ) { uiComponents . renderButton . setDisabled ( false ); } } } // AFFECTED CROPLAND // Show Affected Crop on Panel function renderCropInfo ( imgReClass , targetUi ) { // Get cropland class, value 12 and 14. Check https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MCD12Q1#bands var cropmask = mcd12q1 . eq ( 12 ). or ( mcd12q1 . eq ( 14 )); var cropland = mcd12q1 . divide ( mcd12q1 ). updateMask ( cropmask ); // Mosaic cropland layer and flood alert layer var imgCombSrc = cropland . addBands ( imgReClass ); var stats = {}; var reClasses = []; for ( var i = 1 ; i < 4 ; i ++ ) { reClasses . push ( i ); } // Extract each alert then combine with cropland data var counter = 0 ; reClasses . map ( function ( reClass ) { var imgComb = imgCombSrc . expression ( 'p * (v == c? 1:0)' , { 'p' : imgCombSrc . select ( 'LC_Type1' ), 'v' : imgCombSrc . select ( 'remapped' ), 'c' : reClass }); // Get hectares var Cropland_PixelArea = imgComb . multiply ( ee . Image . pixelArea ()). divide ( 10000 ). round (); // Get number of pop affected value for each class var stat = Cropland_PixelArea . reduceRegion ({ reducer : ee . Reducer . sum (), geometry : imgReClass . geometry (), scale : 500 , maxPixels : 1e9 }); stat . evaluate ( function ( s ) { stats [ reClass ] = s . LC_Type1 ; counter += 1 ; if ( counter === reClasses . length ) { renderLegend (); } }); }); uiComponents . loadingCounter += 1 ; function renderLegend () { // Rendering legend for impact analysis var widgets = [ [ 'FFEDA0' , 1 ], // Yellow [ 'FEB24C' , 2 ], // Orange [ 'F03B20' , 3 ] // Red ]. map ( function ( p ) { var color = p [ 0 ]; var level = p [ 1 ]; // Dynamic text var label = 'Alert ' + level + ': ' + parseInt ( stats [ level ]). toLocaleString (); return uiComponents . makeLegendBox ( color , label ); }); targetUi . widgets (). reset ( widgets ); uiComponents . loadingCounter -= 1 ; if ( uiComponents . loadingCounter === 0 ) { uiComponents . renderButton . setDisabled ( false ); } } }","title":"Population and cropland affected"},{"location":"gee/#panel-configuration","text":"The last part is to setup all the supporting information on the Panel. // USER INTERFACE //--- // Initialize UI Components function initializeUIComponents () { // Clear all process ui . root . clear (); var mobileStyle = false ; // ui.Select widget uiComponents . daySelect = ui . Select ({ // Number of simulation day items : [ '1 day' , '2 days' , '3 days' , '4 days' , '5 days' ], placeholder : 'Select number of days' }); // Setting date var today = ee . Date ( new Date ()); var startDate = ee . Date ( '2019-07-01' ); // First GFS data 1 Jul 2015 // ui.DateSlider widget uiComponents . dateSlider = ui . DateSlider ({ start : startDate , end : today . advance ( 1 , 'day' ), value : today , period : 1 , // the unit is day style : { width : '300px' , padding : '10px' , position : 'bottom-left' } }); // Add render button to ui uiComponents . renderButton = ui . Button ({ label : 'Render' , onClick : render }); // Add download button to ui uiComponents . downloadButton = ui . Button ({ label : 'Download Data' , onClick : downloadMap }); // Warning if the parameters is not completed uiComponents . NRTaffectedDate = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); uiComponents . NRTaffectedPops = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); uiComponents . NRTaffectedCrops = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); // Warning if the parameters is not completed uiComponents . FCTaffectedDate = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); uiComponents . FCTaffectedPops = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); uiComponents . FCTaffectedCrops = ui . Panel ({ style : { fontWeight : 'bold' }, widgets : [ ui . Label ({ value : '!!! Select date and number of day then press Render button' }) ] }); // Legend in a Panel uiComponents . makeLegendBox = function ( color , label ) { var colorBox = ui . Label ({ style : { backgroundColor : '#' + color , padding : mobileStyle ? '10px' : '8px' , margin : '0 0 4px 0' , border : 'solid 0.5px' , } }); var description = ui . Label ({ value : label , style : { margin : '0 0 4px 6px' , fontSize : mobileStyle ? '16px' : '12px' }, }); return ui . Panel ({ widgets : [ colorBox , description ], style : { padding : '0 0 4px 6px' }, layout : ui . Panel . Layout . Flow ( 'horizontal' ) }); }; // Paragraph intro in top of Panel var intro = ui . Panel ({ widgets : [ // Title ui . Label ({ value : 'Extreme rainfall monitoring, will it trigger a flood?' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '22px' : '20px' , margin : '10px 5px' , } }), // Intro ui . Label ({ value : 'ERM is an app that are able to inform where is the estimated location of extreme rainfall ' + 'in the last 5-days (Near Real Time) and up to 5-days ahead (Forecast) based on selected date. ' + 'To learn more about what inside the application, please visit below link:' , style : { fontSize : mobileStyle ? '18px' : '14px' , } }), ui . Label ({ value : 'https://wfpidn.github.io/ERM' , style : { fontSize : mobileStyle ? '18px' : '14px' , } }). setUrl ( 'https://wfpidn.github.io/ERM' ), ui . Label ({ value : 'The computation is over when you see number of affected population below for both near real-time ' + 'and forecasat, and the Render button enable. Every computation required at least a minute to complete ' + 'all the process. PLEASE BE PATIENT! ' , style : { color : 'red' , fontSize : mobileStyle ? '18px' : '14px' , } }), ui . Label ({ value : '_________________________________________________' , style : { fontSize : mobileStyle ? '18px' : '14px' , } }) ] }); // Affected label - near real-time var NRTaffectedPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Near Real-Time' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '18px' : '16px' , // margin: '10px 5px' } }), ] }); // Date information - near real-time var NRTaffectedDatePanel = ui . Panel ({ widgets : [ ui . Label ({ value : '' , style : { color : 'blue' , fontSize : mobileStyle ? '14px' : '12px' , // margin: '10px 5px' } }), uiComponents . NRTaffectedDate ] }); var NRTaffectedPopPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Population affected' , style : { // fontWeight: 'bold', fontSize : mobileStyle ? '16px' : '14px' , margin : '10px 5px' } }), uiComponents . NRTaffectedPops ] }); var NRTaffectedCropPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Cropland affected (Hectares)' , style : { // fontWeight: 'bold', fontSize : mobileStyle ? '16px' : '14px' , margin : '10px 5px' } }), uiComponents . NRTaffectedCrops ] }); // Affected label - near real-time var FCTaffectedPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Forecast' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '18px' : '16px' , // margin: '10px 5px' } }), ] }); // Date information - forecast var FCTaffectedDatePanel = ui . Panel ({ widgets : [ ui . Label ({ value : '' , style : { color : 'blue' , fontSize : mobileStyle ? '14px' : '12px' , // margin: '10px 5px' } }), uiComponents . FCTaffectedDate ] }); var FCTaffectedPopPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Population affected' , style : { // fontWeight: 'bold', fontSize : mobileStyle ? '16px' : '14px' , margin : '10px 5px' } }), uiComponents . FCTaffectedPops ] }); var FCTaffectedCropPanel = ui . Panel ({ widgets : [ ui . Label ({ value : 'Crop affected (Hectares)' , style : { // fontWeight: 'bold', fontSize : mobileStyle ? '16px' : '14px' , margin : '10px 5px' } }), uiComponents . FCTaffectedCrops ] }); // Legend information for all layers var legendintro = ui . Panel ({ widgets : [ // Line divider ui . Label ({ value : '_________________________________________________' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '18px' : '14px' , margin : '10px 5px' , } }), // Legend label ui . Label ({ value : 'Legend ' , style : { fontWeight : 'bold' , fontSize : mobileStyle ? '22px' : '20px' , margin : '10px 5px' , } }) ] }); // Make a legend, style, color, boxes in a panel function makeLegend ( title , boxes ) { return ui . Panel ({ widgets : [ ui . Label ({ value : title , style : { fontSize : mobileStyle ? '18px' : '16px' , margin : '10px 5px' } }), ui . Panel ({ style : { fontSize : '10px' , margin : '0 0 10px 12px' , padding : '0' }, widgets : boxes . map ( function ( b ) { var color = b [ 0 ]; var label = b [ 1 ]; return uiComponents . makeLegendBox ( color , label ); }) }) ] }); } // Color codes var legendRainfall = makeLegend ( 'Rainfall' , [ [ 'ffffff' , 'No Rain ~ No color' ], [ 'cccccc' , '1 - 3 milimeters' ], [ 'f9f3d5' , '4 - 10' ], [ 'dce2a8' , '11 - 20' ], [ 'a8c58d' , '21 - 30' ], [ '77a87d' , '31 - 40' ], [ 'ace8f8' , '41 - 60' ], [ '4cafd9' , '61 - 80' ], [ '1d5ede' , '81 - 100' ], [ '001bc0' , '101 - 120' ], [ '9131f1' , '121 - 150' ], [ 'e983f3' , '151 - 200' ], [ 'f6c7ec' , '> 200' ] ]); var legendCategory = makeLegend ( 'Rainfall Category' , [ [ 'ffffcc' , 'Moderate' ], [ 'a1dab4' , 'Heavy' ], [ '41b6c4' , 'Intense' ], [ '225ea8' , 'Extreme' ] ]); var legendProbability = makeLegend ( 'Likelihood' , [ [ 'f7fcb9' , 'Low' ], [ 'addd8e' , 'Moderate' ], [ '31a354' , 'High' ] ]); var legendAlert = makeLegend ( 'Flood Alert' , [ [ '97D700' , 'Green' ], [ 'ffeda0' , 'Yellow (Category 1 - 3)' ], [ 'FEB24C' , 'Orange (Category 4 - 6)' ], [ 'F03B20' , 'Red (Category 7 - 9)' ] ]); var mainPanel = ui . Panel ({ widgets : [ intro , NRTaffectedPanel , NRTaffectedDatePanel , NRTaffectedPopPanel , NRTaffectedCropPanel , FCTaffectedPanel , FCTaffectedDatePanel , FCTaffectedPopPanel , FCTaffectedCropPanel , legendintro , ui . Panel ({ layout : ui . Panel . Layout . flow ( 'horizontal' ), widgets : [ ui . Panel ({ widgets : [ legendRainfall , ] }), ui . Panel ({ widgets : [ legendCategory , legendProbability , legendAlert ] }) ] }) ], style : { width : '350px' , padding : '8px' } }); ui . root . widgets (). reset ([ mainPanel , mainMap ]); ui . root . setLayout ( ui . Panel . Layout . flow ( 'horizontal' )); mainMap . setControlVisibility ( true ); mainMap . setCenter ( 118.2 , - 2.5 , 5.4 ); mainMap . add ( ui . Panel ({ widgets : [ uiComponents . daySelect , uiComponents . renderButton , uiComponents . downloadButton , ], layout : ui . Panel . Layout . Flow ( 'horizontal' ), style : { position : 'bottom-left' } })); mainMap . add ( uiComponents . dateSlider ); } initializeUIComponents ();","title":"Panel configuration"},{"location":"gee/#data-downloads","text":"This download feature is not available in the app version, and only accessible via GEE code user interface. To access this feature, you must have an access to GEE. // DATA DOWNLOADS //--- // Download all layer output to Google Drive function downloadMap () { var _numday = uiComponents . daySelect . getValue (); if ( ! _numday ) { return ; } // Day of simulation var numday = { '1 day' : 1 , '2 days' : 2 , '3 days' : 3 , '4 days' : 4 , '5 days' : 5 }[ _numday ]; // As the download request probably takes some time, we need to warn the user, // so they not repeating click the download button alert ( \"If you see this message, the download request is started! Please go to Tasks, wait until the download list appear. Click RUN for each data you want to download\" ); // Downloading data // Export the result to Google Drive var download_date = ee . Date ( uiComponents . dateSlider . getValue ()[ 0 ]); var dt = download_date ; // Near Real Time Result var imageNRT = getRainfallExtremeImage ({ date : dt , numday : numday , imgBase : getImergImage ( dt , numday ), rainfallColumn : 'precipitationCal' }); // Forecast Result var imageFCT = getRainfallExtremeImage ({ date : dt , numday : numday , imgBase : getGfsImage ( dt , numday ), rainfallColumn : 'total_precipitation_surface' }); // Near Real-Time Precipitation Export . image . toDrive ({ image : imageNRT . rainfall , description : 'NRT_Precipitation_last_' + numday + 'day_as_of_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Forecast Precipitation Export . image . toDrive ({ image : imageFCT . rainfall , description : 'FCT_Precipitation_' + numday + 'day_ahead_issued_on_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Near Real-Time Extreme Precipitation (exceeding the threshold) Export . image . toDrive ({ image : imageNRT . impact , description : 'NRT_ExtremePrecip_last_' + numday + 'day_as_of_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Forecast Extreme Precipitation (exceeding the threshold) Export . image . toDrive ({ image : imageFCT . impact , description : 'FCT_ExtremePrecip_' + numday + 'day_ahead_issued_on_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Near Real-Time Likelihood of Pixel will be Inundated Export . image . toDrive ({ image : imageNRT . prob , description : 'NRT_Likelihood_last_' + numday + 'day_as_of_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Forecast Likelihood of Pixel will be Inundated Export . image . toDrive ({ image : imageFCT . prob , description : 'FCT_Likelihood_' + numday + 'day_ahead_issued_on_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Near Real-Time Extreme Rainfall-triggering Flood Export . image . toDrive ({ image : imageNRT . re , description : 'NRT_FloodAlert_last_' + numday + 'day_as_of_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); // Forecast Extreme Rainfall-triggering Flood Export . image . toDrive ({ image : imageFCT . re , description : 'FCT_FloodAlert_' + numday + 'day_ahead_issued_on_' + download_date . format ( 'yyyy-MM-dd' ). getInfo (), scale : IMERGprojection . nominalScale (), maxPixels : 1e12 }); print ( 'Data Downloaded!' , download_date ); } End of script. Find the complete code via this link https://code.earthengine.google.com/fb7cc9b41222334c47be6d6b23d70829 Notes The GEE script is written by Benny Istanto and Ridwan Mulyadi. Both are working as Climate Analyst and System Developer at VAM unit, UN WFP Indonesia. UPDATE: Benny Istanto is no longer with WFP since August 2021.","title":"Data Downloads"},{"location":"gefs/","text":"Acquire GEFS data About the data WGS84 - EPSG:4326 Bounding box 94,-12,142,7 GeoJSON {\"type\":\"FeatureCollection\",\"features\":[{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"type\":\"Polygon\",\"crs\":\"EPSG:4326\",\"coordinates\":[[[94,-12],[94,7],[142,7],[142,-12],[94,-12]]]}}]} GEFS Forecast GEFS forecast data only available for the latest 3-days and updated every 6-hours period. Accessible via this GRIB filter: https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl? If today is 4 Nov 2020, then GEFS only available from 1 - 4 Nov 2020. Download and subset for Indonesia via GRIB filter Example parameters Forecast available every 6-hours, we will focus from f006 (start of data) until f120 (day-5) Release hour ( 00 , 06 , 12 , 18 ): geavg.t 00 z Forecast hour ( f006 , f012 , f018 , f024 , f030 , f036 , f042 , f048 , f054 , f060 , f066 , f072 , f078 , f084 , f090 , f096 , f102 , f108 , f114 , f120 ): f006 Level: surface Variable: APCP Subset: Indonesia ( 94 , 142 , 7 , -12 ) Date (YYYYMMDD): 20201103 Release hour ( 00 , 06 , 12 , 18 ): 00 Script: https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t00z.pgrb2s.0p25.f006&lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F00%2Fatmos%2Fpgrb2sp25 Download process Each time we run the download process procedure (Example: Date 3 Nov 2020 , release hour 00 ), it means we need to download all the forecast hour from f006 to f120 https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25. f006 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25. f012 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25. f018 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 ... ... https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25.f 114 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25.f 120 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 When new forecast released (for example release hour: 06 , 12 and 18 ), we need to repeat all download procedure above and adjust the script with current release hour. Naming convention for GEFS product All downloaded GEFS files must be renamed using following standard. apcp.gefs.0p25.YYYYMMDDID.fxxx.grib2 where apcp: GEFS apcp.gefs.0p25 precipitation code gefs: name of product 0p25: code for 0.25deg product YYYY: year MM: month DD: date ID: release hour f: forecast data xxx: forecast hour Example apcp.gefs.0p25.2020102100.f024.grib2 Prepare input data (rainfall forecast) for model Conversion from GRIB2 to GeoTIFF All downloaded subset GEFS are in GRIB2 format. We need to convert it to GeoTIFF, the easiest way is using GDAL: gdal_translate -of GTiff input.grib2 output.tif Resample GEFS data available at 0.25deg ~ 27.75km/pixel spatial resolution While GPM IMERG available at 0.1deg ~ 11.1km/pixel. So we need to resample (250%) GEFS to match with IMERG using GDAL. gdal_translate -r bilinear -outsize 250% 250% input.tif output_resample.tif Clip the raster with Indonesia boundary Then we need to crop the GeoTIFF using Indonesia boundary. GDAL can handle this task: gdalwarp --config GDALWARP_IGNORE_BAD_CUTLINE YES -srcnodata -999 -dstnodata NoData -cutline idn_bnd_subset_clip_imerg_grid_a.shp -crop_to_cutline input.tif clip_output.tif Calculate accumulation 1 to 5 days rainfall forecast. Example: pre-downloaded and renamed GEFS data: https://on.istan.to/32v1tVY Date: 3 Nov 2020 , release hour 00 1-day apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 2-days apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 + f030 + f036 + f042 + f048 3-days apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 + f030 + f036 + f042 + f048 + f054 + f060 + f066 + f072 4-days apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 + f030 + f036 + f042 + f048 + f054 + f060 + f066 + f072 + f078 + f084 + f090 + f096 5-days apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 + f030 + f036 + f042 + f048 + f054 + f060 + f066 + f072 + f078 + f084 + f090 + f096 + f102 + f108 + f114 + f120","title":"Acquire GEFS data"},{"location":"gefs/#acquire-gefs-data","text":"","title":"Acquire GEFS data"},{"location":"gefs/#about-the-data","text":"WGS84 - EPSG:4326 Bounding box 94,-12,142,7 GeoJSON {\"type\":\"FeatureCollection\",\"features\":[{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"type\":\"Polygon\",\"crs\":\"EPSG:4326\",\"coordinates\":[[[94,-12],[94,7],[142,7],[142,-12],[94,-12]]]}}]} GEFS Forecast GEFS forecast data only available for the latest 3-days and updated every 6-hours period. Accessible via this GRIB filter: https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl? If today is 4 Nov 2020, then GEFS only available from 1 - 4 Nov 2020.","title":"About the data"},{"location":"gefs/#download-and-subset-for-indonesia-via-grib-filter","text":"","title":"Download and subset for Indonesia via GRIB filter"},{"location":"gefs/#example-parameters","text":"Forecast available every 6-hours, we will focus from f006 (start of data) until f120 (day-5) Release hour ( 00 , 06 , 12 , 18 ): geavg.t 00 z Forecast hour ( f006 , f012 , f018 , f024 , f030 , f036 , f042 , f048 , f054 , f060 , f066 , f072 , f078 , f084 , f090 , f096 , f102 , f108 , f114 , f120 ): f006 Level: surface Variable: APCP Subset: Indonesia ( 94 , 142 , 7 , -12 ) Date (YYYYMMDD): 20201103 Release hour ( 00 , 06 , 12 , 18 ): 00 Script: https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t00z.pgrb2s.0p25.f006&lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F00%2Fatmos%2Fpgrb2sp25","title":"Example parameters"},{"location":"gefs/#download-process","text":"Each time we run the download process procedure (Example: Date 3 Nov 2020 , release hour 00 ), it means we need to download all the forecast hour from f006 to f120 https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25. f006 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25. f012 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25. f018 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 ... ... https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25.f 114 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 https://nomads.ncep.noaa.gov/cgi-bin/filter_gefs_atmos_0p25s.pl?file=geavg.t 00 z.pgrb2s.0p25.f 120 &lev_surface=on&var_APCP=on&subregion=&leftlon=94&rightlon=142&toplat=7&bottomlat=-12&dir=%2Fgefs.20201103%2F 00 %2Fatmos%2Fpgrb2sp25 When new forecast released (for example release hour: 06 , 12 and 18 ), we need to repeat all download procedure above and adjust the script with current release hour.","title":"Download process"},{"location":"gefs/#naming-convention-for-gefs-product","text":"All downloaded GEFS files must be renamed using following standard. apcp.gefs.0p25.YYYYMMDDID.fxxx.grib2 where apcp: GEFS apcp.gefs.0p25 precipitation code gefs: name of product 0p25: code for 0.25deg product YYYY: year MM: month DD: date ID: release hour f: forecast data xxx: forecast hour Example apcp.gefs.0p25.2020102100.f024.grib2","title":"Naming convention for GEFS product"},{"location":"gefs/#prepare-input-data-rainfall-forecast-for-model","text":"","title":"Prepare input data (rainfall forecast) for model"},{"location":"gefs/#conversion-from-grib2-to-geotiff","text":"All downloaded subset GEFS are in GRIB2 format. We need to convert it to GeoTIFF, the easiest way is using GDAL: gdal_translate -of GTiff input.grib2 output.tif","title":"Conversion from GRIB2 to GeoTIFF"},{"location":"gefs/#resample","text":"GEFS data available at 0.25deg ~ 27.75km/pixel spatial resolution While GPM IMERG available at 0.1deg ~ 11.1km/pixel. So we need to resample (250%) GEFS to match with IMERG using GDAL. gdal_translate -r bilinear -outsize 250% 250% input.tif output_resample.tif","title":"Resample"},{"location":"gefs/#clip-the-raster-with-indonesia-boundary","text":"Then we need to crop the GeoTIFF using Indonesia boundary. GDAL can handle this task: gdalwarp --config GDALWARP_IGNORE_BAD_CUTLINE YES -srcnodata -999 -dstnodata NoData -cutline idn_bnd_subset_clip_imerg_grid_a.shp -crop_to_cutline input.tif clip_output.tif","title":"Clip the raster with Indonesia boundary"},{"location":"gefs/#calculate-accumulation-1-to-5-days-rainfall-forecast","text":"Example: pre-downloaded and renamed GEFS data: https://on.istan.to/32v1tVY Date: 3 Nov 2020 , release hour 00 1-day apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 2-days apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 + f030 + f036 + f042 + f048 3-days apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 + f030 + f036 + f042 + f048 + f054 + f060 + f066 + f072 4-days apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 + f030 + f036 + f042 + f048 + f054 + f060 + f066 + f072 + f078 + f084 + f090 + f096 5-days apcp.gefs.0p25.20201103 00 .f006 + f012 + f018 + f024 + f030 + f036 + f042 + f048 + f054 + f060 + f066 + f072 + f078 + f084 + f090 + f096 + f102 + f108 + f114 + f120","title":"Calculate accumulation 1 to 5 days rainfall forecast."},{"location":"hd/","text":"Hydrometeorological Disasters Highest number of death and infrastructure damage caused by natural disasters in Southeast Asia in the last 5 years is predominantly related with hydrometeorological disasters such as floods, droughts, landslides, cyclones and tidal waves. Frequency of those disasters are predicted to be intensified by climate change and inappropriate environmental management. Increasing frequency of hydrometeorological disasters is also happening worldwide. Global data indicates that 76% of disasters during 1900 \u2013 2011 are categorized as hydrometeorological disasters and the trend is increasing. The United Nations Office for Disaster Risk Reduction (UNISDR) has been addressing hydro-meteorological disasters as a future major challenge for the society. Why does the problem exist? Policy makers need reliable and advance early warning system to minimize the number of victims, save lives, property and infrastructure damage from the disasters. The early warning systems are often built upon historical data. Rainfall is considered as a major cause of flooding and/or landslide, despite stream network, catchment capacity or tidal influence. Potential damage is dependent on total amount, intensity and duration of rainfall. A typical flood/flash-flood/landslide forecasting system is often based on rainfall monitoring/historical data. However rainfall forecast for the coming days is more relevant to explain the probability of extreme rainfall will trigger a disaster (flood/flash-flood or landslide) instead of monitoring.","title":"Hydrometeorological Disasters"},{"location":"hd/#hydrometeorological-disasters","text":"Highest number of death and infrastructure damage caused by natural disasters in Southeast Asia in the last 5 years is predominantly related with hydrometeorological disasters such as floods, droughts, landslides, cyclones and tidal waves. Frequency of those disasters are predicted to be intensified by climate change and inappropriate environmental management. Increasing frequency of hydrometeorological disasters is also happening worldwide. Global data indicates that 76% of disasters during 1900 \u2013 2011 are categorized as hydrometeorological disasters and the trend is increasing. The United Nations Office for Disaster Risk Reduction (UNISDR) has been addressing hydro-meteorological disasters as a future major challenge for the society.","title":"Hydrometeorological Disasters"},{"location":"hd/#why-does-the-problem-exist","text":"Policy makers need reliable and advance early warning system to minimize the number of victims, save lives, property and infrastructure damage from the disasters. The early warning systems are often built upon historical data. Rainfall is considered as a major cause of flooding and/or landslide, despite stream network, catchment capacity or tidal influence. Potential damage is dependent on total amount, intensity and duration of rainfall. A typical flood/flash-flood/landslide forecasting system is often based on rainfall monitoring/historical data. However rainfall forecast for the coming days is more relevant to explain the probability of extreme rainfall will trigger a disaster (flood/flash-flood or landslide) instead of monitoring.","title":"Why does the problem exist?"},{"location":"history/","text":"Revision History No Date Notes 1 22 Nov 2016 Brainstorming with Prof. Rizaldi 1 2 21 Dec 2016 Conceptual method, rainfall threshold value 3 3 Mar 2017 3-days rainfall accumulation rolling daily using CHIRPS completed, ready for testing 4 6 Jun 2017 Rainfall threshold generated with help from Rogerio 2 awk script 5 8 Oct 2017 GFS test, manual download using various method, THREDDS, OPENDAP and https 6 23 Dec 2017 Implemented in VAMPIRE as ArcGIS REST Services using GFS data as input, completed by Rochelle 3 7 8 Jan 2018 Remove river flow and conditions, add limitation and constraints of the model 8 2 Feb 2018 Belitung case, Land susceptibility extraction 9 25 Feb 2018 Landslide flowchart 10 19 Mar 2018 Test for Ciwidey and Banjarnegara, but the rainfall in both areas below threshold, so it\u2019s better to remove the example 11 3 Apr 2018 First draft, ready for share 12 6 Jun 2018 Found historical flood extraction (HFO) using JRC GSW data via GEE, start processing for Indonesia by Year 13 8 Aug 2018 Mosaic HFO tiles from GEE and zonal statistics using CHIRPS and IMERG grid 14 14 Nov 2018 1 district 1 equation for model maybe not suitable enough for Indonesia. Proposing to use watershed to Prof. Rizaldi 15 21 Feb 2019 BMKG criticized on CHIRPS performance as main input for flood module. Random check to above mentioned periods with other sat-based data 16 13 Mar 2019 Replicate the method using STATA done by Vira 4 , R approach will follow. 17 30 Apr 2019 Finalized flow chart for the flood module, for sharing to PDC, C2S and DLR 18 3 Sep 2019 Sharing the model update to VAM-HQ 19 30 Mar 2020 Update HFO Water History using latest data, re-processing by Month as more relevant 20 1 May 2020 Watershed for all Indonesia generated using ASTER GDEM 30, tested for max rainfall logit formula. Unfortunately not suitable 21 18 Jun 2020 Got feedback from Rogerio, try to test rolling sum 1 to 5 days 22 25 Jun 2020 Michael 5 sent event data from AHA Centre ADInet, will test it for measuring alert quality 23 30 Jun 2020 Raster max and percentile using CHIRPS completed for 1 to 5 days period 24 11 Sep 2020 Focal linear regression between max rainfall and HFO, extract historical event from 1981 25 19 Sep 2020 Found most of big flood event in 2020 not well captured using CHIRPS, lower rainfall value compared with BMKG station 26 22 Sep 2020 Start from all over again using IMERG Final and Late run to get rolling sum 1 to 5 days, max and threshold, focal linear regression and extracting historical event and calculate the likelihood to get final alert 27 15 Oct 2020 Documenting the process of extreme rainfall monitoring 28 20 Oct 2020 Jeffry 6 completed flood event extraction from AHA Centre ADInet, will combine with data from BNPB and PUPR to validate the alert. Few approach has been tested, but the result still not perfect 29 10 Nov 2020 GEFS forecast data acquisition protocol 30 6 Dec 2020 Test GFS data process in EarthEngine 31 23 Dec 2020 Test IMERG data process in EarthEngine 32 10 Feb 2021 Combine GFS and IMERG into single process in GEE, Ridwan 7 starting refine the code to be more efficient and tidy 33 30 Mar 2021 Surface runoff accumulation concept note and methodology completed by Diego 8 34 2 Apr 2021 Check forecast for East Nusa Tenggara on tropical depression 35 6 Apr 2021 Result looks promising for both near-real time and forecast 36 10 May 2021 Refine GEE code, simplify some inefficient process 37 25 Jun 2021 GEE code review on population, crop and urban area affected 38 29 Jun 2021 Technical documentation available at Github 39 19 Jul 2021 Affected population module, ui Panel and some feature completed by Ridwan. Revising crop module and dynamic text is ongoing 40 29 Jul 2021 Affected cropland module and dynamic text for date simulation completed Prof. Rizaldi Boer. Scientific Advisor. Center for Climate Risk and Opportunity Management. Bogor Agricultural University. \u21a9 Rogerio Bonifacio. Head of Climate and Earth Observation. VAM HQ. UN World Food Programme \u21a9 Rochelle OHagan. Data Scientist. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9 Pramashavira. VAM Associate. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9 Michael Manalili. GIS Consultant. Geospatial Support Unit. EMEG HQ. UN World Food Programme \u21a9 Jeffry Pupella. VAM Associate. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9 Ridwan Mulyadi. System Developer. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9 Diego Novoa. VAM Intern. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9","title":"Revision History"},{"location":"history/#revision-history","text":"No Date Notes 1 22 Nov 2016 Brainstorming with Prof. Rizaldi 1 2 21 Dec 2016 Conceptual method, rainfall threshold value 3 3 Mar 2017 3-days rainfall accumulation rolling daily using CHIRPS completed, ready for testing 4 6 Jun 2017 Rainfall threshold generated with help from Rogerio 2 awk script 5 8 Oct 2017 GFS test, manual download using various method, THREDDS, OPENDAP and https 6 23 Dec 2017 Implemented in VAMPIRE as ArcGIS REST Services using GFS data as input, completed by Rochelle 3 7 8 Jan 2018 Remove river flow and conditions, add limitation and constraints of the model 8 2 Feb 2018 Belitung case, Land susceptibility extraction 9 25 Feb 2018 Landslide flowchart 10 19 Mar 2018 Test for Ciwidey and Banjarnegara, but the rainfall in both areas below threshold, so it\u2019s better to remove the example 11 3 Apr 2018 First draft, ready for share 12 6 Jun 2018 Found historical flood extraction (HFO) using JRC GSW data via GEE, start processing for Indonesia by Year 13 8 Aug 2018 Mosaic HFO tiles from GEE and zonal statistics using CHIRPS and IMERG grid 14 14 Nov 2018 1 district 1 equation for model maybe not suitable enough for Indonesia. Proposing to use watershed to Prof. Rizaldi 15 21 Feb 2019 BMKG criticized on CHIRPS performance as main input for flood module. Random check to above mentioned periods with other sat-based data 16 13 Mar 2019 Replicate the method using STATA done by Vira 4 , R approach will follow. 17 30 Apr 2019 Finalized flow chart for the flood module, for sharing to PDC, C2S and DLR 18 3 Sep 2019 Sharing the model update to VAM-HQ 19 30 Mar 2020 Update HFO Water History using latest data, re-processing by Month as more relevant 20 1 May 2020 Watershed for all Indonesia generated using ASTER GDEM 30, tested for max rainfall logit formula. Unfortunately not suitable 21 18 Jun 2020 Got feedback from Rogerio, try to test rolling sum 1 to 5 days 22 25 Jun 2020 Michael 5 sent event data from AHA Centre ADInet, will test it for measuring alert quality 23 30 Jun 2020 Raster max and percentile using CHIRPS completed for 1 to 5 days period 24 11 Sep 2020 Focal linear regression between max rainfall and HFO, extract historical event from 1981 25 19 Sep 2020 Found most of big flood event in 2020 not well captured using CHIRPS, lower rainfall value compared with BMKG station 26 22 Sep 2020 Start from all over again using IMERG Final and Late run to get rolling sum 1 to 5 days, max and threshold, focal linear regression and extracting historical event and calculate the likelihood to get final alert 27 15 Oct 2020 Documenting the process of extreme rainfall monitoring 28 20 Oct 2020 Jeffry 6 completed flood event extraction from AHA Centre ADInet, will combine with data from BNPB and PUPR to validate the alert. Few approach has been tested, but the result still not perfect 29 10 Nov 2020 GEFS forecast data acquisition protocol 30 6 Dec 2020 Test GFS data process in EarthEngine 31 23 Dec 2020 Test IMERG data process in EarthEngine 32 10 Feb 2021 Combine GFS and IMERG into single process in GEE, Ridwan 7 starting refine the code to be more efficient and tidy 33 30 Mar 2021 Surface runoff accumulation concept note and methodology completed by Diego 8 34 2 Apr 2021 Check forecast for East Nusa Tenggara on tropical depression 35 6 Apr 2021 Result looks promising for both near-real time and forecast 36 10 May 2021 Refine GEE code, simplify some inefficient process 37 25 Jun 2021 GEE code review on population, crop and urban area affected 38 29 Jun 2021 Technical documentation available at Github 39 19 Jul 2021 Affected population module, ui Panel and some feature completed by Ridwan. Revising crop module and dynamic text is ongoing 40 29 Jul 2021 Affected cropland module and dynamic text for date simulation completed Prof. Rizaldi Boer. Scientific Advisor. Center for Climate Risk and Opportunity Management. Bogor Agricultural University. \u21a9 Rogerio Bonifacio. Head of Climate and Earth Observation. VAM HQ. UN World Food Programme \u21a9 Rochelle OHagan. Data Scientist. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9 Pramashavira. VAM Associate. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9 Michael Manalili. GIS Consultant. Geospatial Support Unit. EMEG HQ. UN World Food Programme \u21a9 Jeffry Pupella. VAM Associate. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9 Ridwan Mulyadi. System Developer. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9 Diego Novoa. VAM Intern. Vulnerability Analysis and Mapping Unit. UN World Food Programme - Indonesia \u21a9","title":"Revision History"},{"location":"imerg/","text":"Acquire IMERG data About the data WGS84 - EPSG:4326 Bounding box 94,-12,142,7 GeoJSON {\"type\":\"FeatureCollection\",\"features\":[{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"type\":\"Polygon\",\"crs\":\"EPSG:4326\",\"coordinates\":[[[94,-12],[94,7],[142,7],[142,-12],[94,-12]]]}}]} Historical Timestep Release Period Unit Link Daily Final Run 1 Jun 2000 - 30 Jun 2020 mm/day https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDF.06/ Daily Late Run 1 Jul 2000 - now mm/day https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDL.06/ Near-real time Timestep Release Period Unit Link 30-minutes Final Run 1 Jan 2020 - 30 Jun 2020 mm/hour https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHH.06/ 30-minutes Early Run 1 Jul 2020 - now mm/hour https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHHE.06/ Download and subset for Indonesia via OpenDAP Using wget , see https://disc.gsfc.nasa.gov/data-access#mac_linux_wget wget --http-user=[USERNAME] --http-password=[PASSWORD] --load-cookies ~/.urs_cookies --save-cookies ~/.urs_cookies --keep-session-cookies --no-check-certificate --auth-no-challenge=on -r --reject \"index.html*\" -np -e robots=off <insert complete HTTPS OPENDAP URL> username: gis.wfp.indonesia password: Send email to benny.istanto@wfp.org to get the password OPENDAP URL : for 1 Jan 2019, check the data catalog from url on the left column. https://gpm1.gesdisc.eosdis.nasa.gov/opendap/hyrax/GPM_L3/GPM_3IMERGHH.06/2019/001/3B-HHR.MS.MRG.3IMERG.20190101-S003000-E005959.0030.V06B.HDF5.nc4?precipitationCal[0:0][2740:3219][779:969],time,lon[2740:3219],lat[779:969] GPM_3IMERGHH.06 - Code of product. Notes: NASA frequently update the version of data, current version is 06. If the download failed, change into new version 07 or 08 and so on. 2019 - year in YYYY 001 - Date in Julian Date for 30min data 3B-HHR.MS.MRG.3IMERG.20190101-S003000-E005959.0000.V06B.HDF5.nc4 - filename 3B-HHR.MS.MRG.3IMERG - product code for 30min final run 3B-HHR-E.MS.MRG.3IMERG - product code for 30min early run 20190101-S003000-E005959.0000 - Date and time information, each file has a unique information, check the pattern in data source. Start Date/Time: All files in GPM will be named using the start date/time of the temporal period of the data contained in the product. The field has two subfields separated by a hyphen. Start Date: YYYYMMDD Start Time: Begin with Capital S and follow with HHMMSS End Time: Begin with Capital E and follow with HHMMSS Hours are presented in a 24-hour time format, with 00 indicating midnight. All times in GPM will be in Coordinated Universal Time (UTC). The half-hour sequence starts at 0000 , and increments by 30 for each half hour of the day. V06B - version of data. Frequently change HDF5 - Original format of the data nc4 - Data format after subsetting process using OPENDAP precipitationCal - Selected variable to download [0:0][2740:3219][779:969],time,lon[2740:3219],lat[779:969] - time and bounding-box from original to subset for Indonesia. Conversion NC to GeoTIFF, and clip using polygon All downloaded subset IMERG are in netCDF format. We need to convert it to GeoTIFF, the easiest way is using GDAL: gdal_translate -of GTiff -a_srs EPSG:4326 NETCDF:\"filename.nc4\":precipitationCal fileoutput.tif But sometimes GDAL couldn\u2019t handle rotated poled grid from subset netCDF, we could try rioxarray based on solution from https://gis.stackexchange.com/a/367651 Then we need to crop the GeoTIFF using Indonesia boundary. GDAL can handle this task: gdalwarp --config GDALWARP_IGNORE_BAD_CUTLINE YES -srcnodata -999 -dstnodata NoData -cutline idn_bnd_subset_clip_imerg_grid_a.shp -crop_to_cutline input.tif clip_output.tif Prepare input data (rainfall accumulation) for model Historical Calculate accumulation of 1 to 5 days rainfall, daily rolling windows for both Final and Late run. Example: start from 1 Jun 2000 1-day: 1 Jun, 2 Jun, 3, Jun, ... 2-days: 1+2 Jun, 2+3 Jun, 3+4 Jun, ... 3-days: 1+2+3 Jun, 2+3+4 Jun, 3+4+5 Jun, ... 4-days: 1+2+3+4 Jun, 2+3+4+5 Jun, 3+4+5+6 Jun, ... 5-days: 1+2+3+4+5 Jun, 2+3+4+5+6 Jun, 3+4+5+6+7 Jun, ... To make it easier, every 1 - 5 days accumulation data will save as a file with the latest file name: Example, data 2+3+4 Jun 2020, will save as: precip.imergd.20000604.3days.tif Near-real time Create rainfall accumulation for every 6-hours from 30-min data Example: 6-hours rainfall accumulation for every date, for both Final and Early run Date YYYYMMDD Time 0000 20000601 0000 to 0360 20000601 0390 to 0720 20000601 0750 to 1080 20000601 1110 to 1440 20000602 0000 to 0360 20000602 0390 to 0720 20000602 0750 to 1080 20000602 1110 to 1440 To make it easier, every 6-hours accumulation data will save as a file with the latest file name: Example, data 20000601 for period 0000 to 0360 , will save as: precip.imerghh.20000601.0360.6h.tif Calculate 1 to 5 days rainfall, 6-hours rolling windows for both Final and Late run. 1-day precip.20000601.0360.6h to precip.20000601.1440.6h recip.20000601.0720.6h to precip.20000602.0360.6h recip.20000601.1080.6h to precip.20000602.0720.6h precip.20000601.1440.6h to precip.20000602.1080.6h precip.20000602.0360.6h to precip.20000602.1440.6h \u2026 2-days precip.20000601.0360.6h to precip.20000602.1440.6h precip.20000601.0720.6h to precip.20000603.0360.6h precip.20000601.1080.6h to precip.20000603.0720.6h precip.20000601.1440.6h to precip.20000603.1080.6h precip.20000602.0360.6h to precip.20000603.1440.6h \u2026 3-days precip.20000601.0360.6h to precip.20000603.1440.6h precip.20000601.0720.6h to precip.20000604.0360.6h precip.20000601.1080.6h to precip.20000604.0720.6h precip.20000601.1440.6h to precip.20000604.1080.6h precip.20000602.0360.6h to precip.20000604.1440.6h \u2026 4-days precip.20000601.0360.6h to precip.20000604.1440.6h precip.20000601.0720.6h to precip.20000605.0360.6h precip.20000601.1080.6h to precip.20000605.0720.6h precip.20000601.1440.6h to precip.20000605.1080.6h precip.20000602.0360.6h to precip.20000605.1440.6h \u2026 5-days precip.20000601.0360.6h to precip.20000605.1440.6h precip.20000601.0720.6h to precip.20000606.0360.6h precip.20000601.1080.6h to precip.20000606.0720.6h precip.20000601.1440.6h to precip.20000606.1080.6h precip.20000602.0360.6h to precip.20000606.1440.6h \u2026 Following the standard for 6-hour naming convention, we will adjust name according the time information: 0360 will assign with ID: 00 0720 will assign with ID: 06 1080 will assign with ID: 12 1440 will assign with ID: 18 Then rainfall accumulation data (1 to 5 days) will save as a file with latest filename but substitute with ID: precip.imerghh.YYYYMMDDID.H024.tif Where precip : precipitation YYYY : year MM : month DD : date ID : time information, see above H : Historical data 024 : 1-day rainfall 2-days will be 048 3-days will be 072 4-days will be 096 5-days will be 120 Example: 1-day rainfall from precip.20000601.0360.6h to precip.20000601.1440.6h will save as precip.imerghh.2000060118.H024.tif 5-days rainfall from precip.20000601.1080.6h to precip.20000606.0720.6h will save as precip.imerghh.2000060606.H120.tif","title":"Acquire IMERG data"},{"location":"imerg/#acquire-imerg-data","text":"","title":"Acquire IMERG data"},{"location":"imerg/#about-the-data","text":"WGS84 - EPSG:4326 Bounding box 94,-12,142,7 GeoJSON {\"type\":\"FeatureCollection\",\"features\":[{\"type\":\"Feature\",\"properties\":{},\"geometry\":{\"type\":\"Polygon\",\"crs\":\"EPSG:4326\",\"coordinates\":[[[94,-12],[94,7],[142,7],[142,-12],[94,-12]]]}}]} Historical Timestep Release Period Unit Link Daily Final Run 1 Jun 2000 - 30 Jun 2020 mm/day https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDF.06/ Daily Late Run 1 Jul 2000 - now mm/day https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGDL.06/ Near-real time Timestep Release Period Unit Link 30-minutes Final Run 1 Jan 2020 - 30 Jun 2020 mm/hour https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHH.06/ 30-minutes Early Run 1 Jul 2020 - now mm/hour https://gpm1.gesdisc.eosdis.nasa.gov/data/GPM_L3/GPM_3IMERGHHE.06/","title":"About the data"},{"location":"imerg/#download-and-subset-for-indonesia-via-opendap","text":"Using wget , see https://disc.gsfc.nasa.gov/data-access#mac_linux_wget wget --http-user=[USERNAME] --http-password=[PASSWORD] --load-cookies ~/.urs_cookies --save-cookies ~/.urs_cookies --keep-session-cookies --no-check-certificate --auth-no-challenge=on -r --reject \"index.html*\" -np -e robots=off <insert complete HTTPS OPENDAP URL> username: gis.wfp.indonesia password: Send email to benny.istanto@wfp.org to get the password OPENDAP URL : for 1 Jan 2019, check the data catalog from url on the left column. https://gpm1.gesdisc.eosdis.nasa.gov/opendap/hyrax/GPM_L3/GPM_3IMERGHH.06/2019/001/3B-HHR.MS.MRG.3IMERG.20190101-S003000-E005959.0030.V06B.HDF5.nc4?precipitationCal[0:0][2740:3219][779:969],time,lon[2740:3219],lat[779:969] GPM_3IMERGHH.06 - Code of product. Notes: NASA frequently update the version of data, current version is 06. If the download failed, change into new version 07 or 08 and so on. 2019 - year in YYYY 001 - Date in Julian Date for 30min data 3B-HHR.MS.MRG.3IMERG.20190101-S003000-E005959.0000.V06B.HDF5.nc4 - filename 3B-HHR.MS.MRG.3IMERG - product code for 30min final run 3B-HHR-E.MS.MRG.3IMERG - product code for 30min early run 20190101-S003000-E005959.0000 - Date and time information, each file has a unique information, check the pattern in data source. Start Date/Time: All files in GPM will be named using the start date/time of the temporal period of the data contained in the product. The field has two subfields separated by a hyphen. Start Date: YYYYMMDD Start Time: Begin with Capital S and follow with HHMMSS End Time: Begin with Capital E and follow with HHMMSS Hours are presented in a 24-hour time format, with 00 indicating midnight. All times in GPM will be in Coordinated Universal Time (UTC). The half-hour sequence starts at 0000 , and increments by 30 for each half hour of the day. V06B - version of data. Frequently change HDF5 - Original format of the data nc4 - Data format after subsetting process using OPENDAP precipitationCal - Selected variable to download [0:0][2740:3219][779:969],time,lon[2740:3219],lat[779:969] - time and bounding-box from original to subset for Indonesia.","title":"Download and subset for Indonesia via OpenDAP"},{"location":"imerg/#conversion-nc-to-geotiff-and-clip-using-polygon","text":"All downloaded subset IMERG are in netCDF format. We need to convert it to GeoTIFF, the easiest way is using GDAL: gdal_translate -of GTiff -a_srs EPSG:4326 NETCDF:\"filename.nc4\":precipitationCal fileoutput.tif But sometimes GDAL couldn\u2019t handle rotated poled grid from subset netCDF, we could try rioxarray based on solution from https://gis.stackexchange.com/a/367651 Then we need to crop the GeoTIFF using Indonesia boundary. GDAL can handle this task: gdalwarp --config GDALWARP_IGNORE_BAD_CUTLINE YES -srcnodata -999 -dstnodata NoData -cutline idn_bnd_subset_clip_imerg_grid_a.shp -crop_to_cutline input.tif clip_output.tif","title":"Conversion NC to GeoTIFF, and clip using polygon"},{"location":"imerg/#prepare-input-data-rainfall-accumulation-for-model","text":"","title":"Prepare input data (rainfall accumulation) for model"},{"location":"imerg/#historical","text":"Calculate accumulation of 1 to 5 days rainfall, daily rolling windows for both Final and Late run. Example: start from 1 Jun 2000 1-day: 1 Jun, 2 Jun, 3, Jun, ... 2-days: 1+2 Jun, 2+3 Jun, 3+4 Jun, ... 3-days: 1+2+3 Jun, 2+3+4 Jun, 3+4+5 Jun, ... 4-days: 1+2+3+4 Jun, 2+3+4+5 Jun, 3+4+5+6 Jun, ... 5-days: 1+2+3+4+5 Jun, 2+3+4+5+6 Jun, 3+4+5+6+7 Jun, ... To make it easier, every 1 - 5 days accumulation data will save as a file with the latest file name: Example, data 2+3+4 Jun 2020, will save as: precip.imergd.20000604.3days.tif","title":"Historical"},{"location":"imerg/#near-real-time","text":"Create rainfall accumulation for every 6-hours from 30-min data Example: 6-hours rainfall accumulation for every date, for both Final and Early run Date YYYYMMDD Time 0000 20000601 0000 to 0360 20000601 0390 to 0720 20000601 0750 to 1080 20000601 1110 to 1440 20000602 0000 to 0360 20000602 0390 to 0720 20000602 0750 to 1080 20000602 1110 to 1440 To make it easier, every 6-hours accumulation data will save as a file with the latest file name: Example, data 20000601 for period 0000 to 0360 , will save as: precip.imerghh.20000601.0360.6h.tif Calculate 1 to 5 days rainfall, 6-hours rolling windows for both Final and Late run. 1-day precip.20000601.0360.6h to precip.20000601.1440.6h recip.20000601.0720.6h to precip.20000602.0360.6h recip.20000601.1080.6h to precip.20000602.0720.6h precip.20000601.1440.6h to precip.20000602.1080.6h precip.20000602.0360.6h to precip.20000602.1440.6h \u2026 2-days precip.20000601.0360.6h to precip.20000602.1440.6h precip.20000601.0720.6h to precip.20000603.0360.6h precip.20000601.1080.6h to precip.20000603.0720.6h precip.20000601.1440.6h to precip.20000603.1080.6h precip.20000602.0360.6h to precip.20000603.1440.6h \u2026 3-days precip.20000601.0360.6h to precip.20000603.1440.6h precip.20000601.0720.6h to precip.20000604.0360.6h precip.20000601.1080.6h to precip.20000604.0720.6h precip.20000601.1440.6h to precip.20000604.1080.6h precip.20000602.0360.6h to precip.20000604.1440.6h \u2026 4-days precip.20000601.0360.6h to precip.20000604.1440.6h precip.20000601.0720.6h to precip.20000605.0360.6h precip.20000601.1080.6h to precip.20000605.0720.6h precip.20000601.1440.6h to precip.20000605.1080.6h precip.20000602.0360.6h to precip.20000605.1440.6h \u2026 5-days precip.20000601.0360.6h to precip.20000605.1440.6h precip.20000601.0720.6h to precip.20000606.0360.6h precip.20000601.1080.6h to precip.20000606.0720.6h precip.20000601.1440.6h to precip.20000606.1080.6h precip.20000602.0360.6h to precip.20000606.1440.6h \u2026 Following the standard for 6-hour naming convention, we will adjust name according the time information: 0360 will assign with ID: 00 0720 will assign with ID: 06 1080 will assign with ID: 12 1440 will assign with ID: 18 Then rainfall accumulation data (1 to 5 days) will save as a file with latest filename but substitute with ID: precip.imerghh.YYYYMMDDID.H024.tif Where precip : precipitation YYYY : year MM : month DD : date ID : time information, see above H : Historical data 024 : 1-day rainfall 2-days will be 048 3-days will be 072 4-days will be 096 5-days will be 120 Example: 1-day rainfall from precip.20000601.0360.6h to precip.20000601.1440.6h will save as precip.imerghh.2000060118.H024.tif 5-days rainfall from precip.20000601.1080.6h to precip.20000606.0720.6h will save as precip.imerghh.2000060606.H120.tif","title":"Near-real time"},{"location":"impact/","text":"Impact Analysis The damages and losses brought by hydrometeorological disasters, such as drought, floods and landslide, and so on, can have significant and intense impacts on a nation's economy. However, despite the importance of assessing the economic impacts of damages and losses in the aftermath of such events, estimating impacts is challenging. The analysis aims to answers two critical questions to initial programming response. Which are the priority areas for assistance? How many people need assistance? How many hectares crops affected? But answers are not limit to the above three, if more information has been collected during or before disasters, analysis could give answers to more question like, What are the gender break down? How many girls and boys at risk? What is closest hospital/police station? Are there any rescue teams around? etc. The calculation is using spatial analysis by overlaying Estimated geographic impact and Assumed resilience of the population to given disaster in affected areas. The resilience indicator could be replace with crop area, in order to get overview on the agriculture impact result. Population Impact on population shows the number of people living in an area which is forecasted to be affected by flood/landslide in the next 1-5 days. The indicator overlays population density with the flood/landslide hazard forecast for all magnitude categories to calculate the number of people affected by flood. The data is updated on a daily basis, showing the number of population potentially affected by flood/landslide in the next 1-5 days. Data source: Flood near-real time: NASA GPM IMERG 30min Flood forecast: NOAA Global Ensemble Forecast System Population: Facebook Population Density 2018 Note For GEE application, the population data is using data from JRC Global Human Settlement Layer (GHSL). Crops Crops affected layer refers to a crop area (in hectares) which is forecasted to be affected by flood/landslide in the next 1-5 days. The indicator overlays the flood hazard forecast for all magnitude categories with a crop mask for the flood/landslide hazard forecast areas. The data is updated on a daily basis, showing the number of hectares potentially affected by flood/landslide in the next 1-5 days. Data source: Flood near-real time: NASA GPM IMERG 30min Flood forecast: NOAA Global Ensemble Forecast System Crop extent: USGS GFSAD30 Note For GEE application, the cropland data is using data from MODIS MOD12Q1 global annual land cover.","title":"Impact analysis"},{"location":"impact/#impact-analysis","text":"The damages and losses brought by hydrometeorological disasters, such as drought, floods and landslide, and so on, can have significant and intense impacts on a nation's economy. However, despite the importance of assessing the economic impacts of damages and losses in the aftermath of such events, estimating impacts is challenging. The analysis aims to answers two critical questions to initial programming response. Which are the priority areas for assistance? How many people need assistance? How many hectares crops affected? But answers are not limit to the above three, if more information has been collected during or before disasters, analysis could give answers to more question like, What are the gender break down? How many girls and boys at risk? What is closest hospital/police station? Are there any rescue teams around? etc. The calculation is using spatial analysis by overlaying Estimated geographic impact and Assumed resilience of the population to given disaster in affected areas. The resilience indicator could be replace with crop area, in order to get overview on the agriculture impact result.","title":"Impact Analysis"},{"location":"impact/#population","text":"Impact on population shows the number of people living in an area which is forecasted to be affected by flood/landslide in the next 1-5 days. The indicator overlays population density with the flood/landslide hazard forecast for all magnitude categories to calculate the number of people affected by flood. The data is updated on a daily basis, showing the number of population potentially affected by flood/landslide in the next 1-5 days. Data source: Flood near-real time: NASA GPM IMERG 30min Flood forecast: NOAA Global Ensemble Forecast System Population: Facebook Population Density 2018 Note For GEE application, the population data is using data from JRC Global Human Settlement Layer (GHSL).","title":"Population"},{"location":"impact/#crops","text":"Crops affected layer refers to a crop area (in hectares) which is forecasted to be affected by flood/landslide in the next 1-5 days. The indicator overlays the flood hazard forecast for all magnitude categories with a crop mask for the flood/landslide hazard forecast areas. The data is updated on a daily basis, showing the number of hectares potentially affected by flood/landslide in the next 1-5 days. Data source: Flood near-real time: NASA GPM IMERG 30min Flood forecast: NOAA Global Ensemble Forecast System Crop extent: USGS GFSAD30 Note For GEE application, the cropland data is using data from MODIS MOD12Q1 global annual land cover.","title":"Crops"},{"location":"ls/","text":"Landslide monitoring and early warning This research and development is still ongoing! Landslide triggered by extreme rainfall and LHASA According to Nature - http://www.nature.com/news/death-toll-from-landslides-vastly-underestimated-1.11140 , landslides triggered by heavy rain kill roughly 4,600 people each year. NASA trying to find ways to reduce that number by developing a new map of global landslide susceptibility and the global Landslide Hazard Assessment for Situational Awareness ( LHASA ) model to provide situational awareness of landslide hazards for a wide range of users. LHASA system was evaluated by comparing the nowcasts to each of 3,989 landslide events in the Global Landslide Catalog. Since most landslides occur in places with no observations, it was not possible to verify that the global LHASA nowcast is accurate in all locations. However, it does provide a near real-time global summary of landslide hazard that may be useful for disaster response agencies, international aid organizations, and others who would benefit from situational awareness of potential landslides in near real-time. An example of the LHASA landslide nowcast in Europe. Red denotes high landslide risk and yellow denotes moderate landslide risk. Image from Landslide Viewer with added map legend. Landslide susceptibility Steep slopes are the most important factor that make a landscape susceptible to landslides. Other key factors include deforestation, the presence of roads, the strength of bedrock and soils, and the location of faults. High-elevation areas tend to be quite susceptible to landslides. As seen in the map at the top of the page, many of the areas with the highest potential for landslide activity are found in steep mountain ranges. The landslide susceptibility map was developed to assess the underlying landslide susceptibility of terrain. This includes quantitative information on if roads have been built, trees have been cut down or burned, a major tectonic fault is nearby, the local bedrock is weak, and/or the hillsides are steep . This map was combined with Global Precipitation Measurement ( GPM ) data to develop the LHASA model. More information and raster map download: https://pmm.nasa.gov/applications/global-landslide-model Extreme rainfall-triggered landslide alert By adopting LHASA method and combine with Extreme rainfall-triggering Flood alert, potential landslides that often go undetected and unreported could be identified if there is an alert from Extreme rainfall-triggering Flood in (x,y) location with land in moderate or high susceptibility zone. Overlaying the alert with land susceptibility map will create an alert for landslide in (x,y) location. In places where precipitation is unusually high, the susceptibility of the terrain is evaluated, which includes quantitative information on if: Roads have been built; Trees have been cut down or burned; A major tectonic fault is nearby; The local bedrock is weak; The hillsides are steep. Depending on the susceptibility, one of three things happens: If the terrain is not very susceptible to landslides (e.g. it\u2019s very flat), no nowcast will be issued; If the terrain is moderately susceptible, a \u201cmoderate-hazard\u201d nowcast will be issued. This area is shown as yellow on the map; If the terrain is highly susceptible (e.g. it\u2019s very steep, and the forest has burned down), a \u201chigh-hazard\u201d nowcast will be issued. This area is shown as red on the map. Evaluating landslide alert quality To evaluate alert release by VAMPIRE, we need additional data and information from various source. So far few source has been identified: (1) AHA Centre ADInet - http://adinet.ahacentre.org/main; (2) BNPB Disaster Monitoring - http://gis.bnpb.go.id ; (3) PUPR Geoportal - https://sigi.pu.go.id/disaster NASA also provide location on historical landslide event through Global Landslide Catalogue, and University of Gajah Mada (UGM) also has list landslide event that occurs in Indonesia. Another possibility to validate the alert is using NASA DRIP-SLIP model and EarthEngine implementation https://code.earthengine.google.com/e7d6ab1fe9bd8aa8e11c22ecf39e1bb6","title":"Landslide monitoring and early warning"},{"location":"ls/#landslide-monitoring-and-early-warning","text":"This research and development is still ongoing!","title":"Landslide monitoring and early warning"},{"location":"ls/#landslide-triggered-by-extreme-rainfall-and-lhasa","text":"According to Nature - http://www.nature.com/news/death-toll-from-landslides-vastly-underestimated-1.11140 , landslides triggered by heavy rain kill roughly 4,600 people each year. NASA trying to find ways to reduce that number by developing a new map of global landslide susceptibility and the global Landslide Hazard Assessment for Situational Awareness ( LHASA ) model to provide situational awareness of landslide hazards for a wide range of users. LHASA system was evaluated by comparing the nowcasts to each of 3,989 landslide events in the Global Landslide Catalog. Since most landslides occur in places with no observations, it was not possible to verify that the global LHASA nowcast is accurate in all locations. However, it does provide a near real-time global summary of landslide hazard that may be useful for disaster response agencies, international aid organizations, and others who would benefit from situational awareness of potential landslides in near real-time. An example of the LHASA landslide nowcast in Europe. Red denotes high landslide risk and yellow denotes moderate landslide risk. Image from Landslide Viewer with added map legend.","title":"Landslide triggered by extreme rainfall and LHASA"},{"location":"ls/#landslide-susceptibility","text":"Steep slopes are the most important factor that make a landscape susceptible to landslides. Other key factors include deforestation, the presence of roads, the strength of bedrock and soils, and the location of faults. High-elevation areas tend to be quite susceptible to landslides. As seen in the map at the top of the page, many of the areas with the highest potential for landslide activity are found in steep mountain ranges. The landslide susceptibility map was developed to assess the underlying landslide susceptibility of terrain. This includes quantitative information on if roads have been built, trees have been cut down or burned, a major tectonic fault is nearby, the local bedrock is weak, and/or the hillsides are steep . This map was combined with Global Precipitation Measurement ( GPM ) data to develop the LHASA model. More information and raster map download: https://pmm.nasa.gov/applications/global-landslide-model","title":"Landslide susceptibility"},{"location":"ls/#extreme-rainfall-triggered-landslide-alert","text":"By adopting LHASA method and combine with Extreme rainfall-triggering Flood alert, potential landslides that often go undetected and unreported could be identified if there is an alert from Extreme rainfall-triggering Flood in (x,y) location with land in moderate or high susceptibility zone. Overlaying the alert with land susceptibility map will create an alert for landslide in (x,y) location. In places where precipitation is unusually high, the susceptibility of the terrain is evaluated, which includes quantitative information on if: Roads have been built; Trees have been cut down or burned; A major tectonic fault is nearby; The local bedrock is weak; The hillsides are steep. Depending on the susceptibility, one of three things happens: If the terrain is not very susceptible to landslides (e.g. it\u2019s very flat), no nowcast will be issued; If the terrain is moderately susceptible, a \u201cmoderate-hazard\u201d nowcast will be issued. This area is shown as yellow on the map; If the terrain is highly susceptible (e.g. it\u2019s very steep, and the forest has burned down), a \u201chigh-hazard\u201d nowcast will be issued. This area is shown as red on the map.","title":"Extreme rainfall-triggered landslide alert"},{"location":"ls/#evaluating-landslide-alert-quality","text":"To evaluate alert release by VAMPIRE, we need additional data and information from various source. So far few source has been identified: (1) AHA Centre ADInet - http://adinet.ahacentre.org/main; (2) BNPB Disaster Monitoring - http://gis.bnpb.go.id ; (3) PUPR Geoportal - https://sigi.pu.go.id/disaster NASA also provide location on historical landslide event through Global Landslide Catalogue, and University of Gajah Mada (UGM) also has list landslide event that occurs in Indonesia. Another possibility to validate the alert is using NASA DRIP-SLIP model and EarthEngine implementation https://code.earthengine.google.com/e7d6ab1fe9bd8aa8e11c22ecf39e1bb6","title":"Evaluating landslide alert quality"},{"location":"nlc/","text":"Novelty, limitation and constraint Novelty Use forecast and near real time data instead of monitoring data for developing flood alert Use free public data for both historical data and forecasts Simple output (yes or no / flood or no flood) Analysis of critical rainfall (threshold) is conducted by pixels, in area with spatial resolution 0.1deg x 0.1deg ~ 10km x 10km Limitation and constraints Complex issues of hydrology, river flow and conditions (e.g catchment) are still excluded ERM only able monitor or predict flood caused by extreme rainfall in a location where extreme rainfall occurred. And unable to calculate flood caused by runoff accumulation from other areas.","title":"Novelty, limitation and constraint"},{"location":"nlc/#novelty-limitation-and-constraint","text":"","title":"Novelty, limitation and constraint"},{"location":"nlc/#novelty","text":"Use forecast and near real time data instead of monitoring data for developing flood alert Use free public data for both historical data and forecasts Simple output (yes or no / flood or no flood) Analysis of critical rainfall (threshold) is conducted by pixels, in area with spatial resolution 0.1deg x 0.1deg ~ 10km x 10km","title":"Novelty"},{"location":"nlc/#limitation-and-constraints","text":"Complex issues of hydrology, river flow and conditions (e.g catchment) are still excluded ERM only able monitor or predict flood caused by extreme rainfall in a location where extreme rainfall occurred. And unable to calculate flood caused by runoff accumulation from other areas.","title":"Limitation and constraints"},{"location":"pre/","text":"Pre-downloaded and pre-processed data Pre-downloaded data Bounding-box grid to Indonesia grid All downloaded GPM IMERG files are based on bounding-box coverage, we need to clip it using grid-based modified Indonesia admin boundaries. Subset for clipping raster data, Zipped-shapefile: https://on.istan.to/3dY3EpW , GeoJSON: https://on.istan.to/3kwXxv1 IMERG Grid for Indonesia, Zipped-shapefile: https://on.istan.to/3koKsUu , GeoJSON: https://on.istan.to/3dSYfQQ , TopoJSON: https://on.istan.to/31GUuZK CSV: https://on.istan.to/3kH0OrX IMERG Readme files: https://on.istan.to/34tGdle Historical and near-real time Timestep Release Period Format Link Daily Final Run 1 Jun 2000 - 30 Jun 2020 nc4 https://on.istan.to/37IlBaW Daily Late Run 1 Jul 2000 - now nc4 https://on.istan.to/3dUCiRt 30-minutes Final Run 1 Jan 2020 - 30 Jun 2020 nc4 https://on.istan.to/3opHemb 30-minutes Early Run 1 Jul 2020 - now nc4 https://on.istan.to/2FZ1NEF GFS Hindcast Historical forecast data from gefs starting from 15 Jan 2015, available at: https://rda.ucar.edu/datasets/ds084.1/ Pre-downloaded data for GFS (October 2020) in GRIB2 format available via this link: https://on.istan.to/3pdJtJI GEFS Forecast Pre-downloaded and renamed GEFS data for 3 November 2020, release hour 00 and 06, forecast 006 until forecast 120: https://on.istan.to/32v1tVY Pre-processed data Maximum 1 to 5-days rainfall accumulation per month for the period 2000 - 2019 GeoTIFF: https://on.istan.to/37T2gE3 CSV: https://on.istan.to/2TlRFc2 THRESHOLD for 1 to 5-days rainfall GeoTIFF: https://on.istan.to/3mnBwiI CSV: https://on.istan.to/3jv9PTs SLOPE and INTERCEPT by MONTH for 1 to 5-days rainfall GeoTIFF Slope: https://on.istan.to/3oPAmi5 Intercept: https://on.istan.to/3kSROzL CSV: https://on.istan.to/2TRf9pP","title":"Pre-downloaded and processed data"},{"location":"pre/#pre-downloaded-and-pre-processed-data","text":"","title":"Pre-downloaded and pre-processed data"},{"location":"pre/#pre-downloaded-data","text":"Bounding-box grid to Indonesia grid All downloaded GPM IMERG files are based on bounding-box coverage, we need to clip it using grid-based modified Indonesia admin boundaries. Subset for clipping raster data, Zipped-shapefile: https://on.istan.to/3dY3EpW , GeoJSON: https://on.istan.to/3kwXxv1 IMERG Grid for Indonesia, Zipped-shapefile: https://on.istan.to/3koKsUu , GeoJSON: https://on.istan.to/3dSYfQQ , TopoJSON: https://on.istan.to/31GUuZK CSV: https://on.istan.to/3kH0OrX IMERG Readme files: https://on.istan.to/34tGdle Historical and near-real time Timestep Release Period Format Link Daily Final Run 1 Jun 2000 - 30 Jun 2020 nc4 https://on.istan.to/37IlBaW Daily Late Run 1 Jul 2000 - now nc4 https://on.istan.to/3dUCiRt 30-minutes Final Run 1 Jan 2020 - 30 Jun 2020 nc4 https://on.istan.to/3opHemb 30-minutes Early Run 1 Jul 2020 - now nc4 https://on.istan.to/2FZ1NEF GFS Hindcast Historical forecast data from gefs starting from 15 Jan 2015, available at: https://rda.ucar.edu/datasets/ds084.1/ Pre-downloaded data for GFS (October 2020) in GRIB2 format available via this link: https://on.istan.to/3pdJtJI GEFS Forecast Pre-downloaded and renamed GEFS data for 3 November 2020, release hour 00 and 06, forecast 006 until forecast 120: https://on.istan.to/32v1tVY","title":"Pre-downloaded data"},{"location":"pre/#pre-processed-data","text":"Maximum 1 to 5-days rainfall accumulation per month for the period 2000 - 2019 GeoTIFF: https://on.istan.to/37T2gE3 CSV: https://on.istan.to/2TlRFc2 THRESHOLD for 1 to 5-days rainfall GeoTIFF: https://on.istan.to/3mnBwiI CSV: https://on.istan.to/3jv9PTs SLOPE and INTERCEPT by MONTH for 1 to 5-days rainfall GeoTIFF Slope: https://on.istan.to/3oPAmi5 Intercept: https://on.istan.to/3kSROzL CSV: https://on.istan.to/2TRf9pP","title":"Pre-processed data"},{"location":"rof/","text":"Find areas at risk of flooding Historical Flood Occurrence The data presents the occurrence of surface water for the selected period. A 100% water occurrence means that all data points in the collection are identified of water (permanent water), 50% implies a location that is inundated half of the time. Locations with a low surface water occurrence have only been inundated for a short period in the whole period, likely caused by flood events. HFO was done based on script from Dr. Ate Poortinga, its written in his blog post https://mygeoblog.com/2017/10/20/historical-flood-occurrence/ GEE script to calculate HFO: https://code.earthengine.google.com/08f671f8be1190b61a1a6175caf5b429 Focal Linear Regression To get areas at risk, we need to relate the maximum rainfall and historical flood occurrence. Then construct pair data of flood occurrence MEAN by month and maximum of rainfall by month for the period 2000-2019 for all IMERG grids, by performing linear regression between every 5\u00d75 pixels of the two rasters, we would like to create a new raster of SLOPE (a) and INTERCEPT (b) . Each pixel of the SLOPE and INTERCEPT will hold the regression slope and intercept value obtained from linear regression of the corresponding 5\u00d75 pixels that surround that pixel. We develop R script to do focal regression computation: https://github.com/wfpidn/Focal-Regression but the result still not perfect. So we did it manually in Excel spreadsheet using standard formula. Will it trigger a flood? As an example, it is found that for pixel at (6,2) equation that can estimate the probability of flood event is: gi = 0.01888 * Xi - 4.0219 Using the above formula, with the availability of rainfall forecast for the X-days, the gi can be estimated and translated into probability of flood. For example, if the forecast at X-days reaches 300 mm (categorized as Extreme rainfall , exceeding Percentile 96) then: gt = 0.01888 * 300 - 4.0219 gt = 1.6421 The corresponding probability pt = 1/(1+exp(-1.6421) pt = 0.837820 categorized as High likelihood Then ALERT category 9 will release for this event. Combination from Extreme Rainfall and High Likelihood Matrix for final alert","title":"Find areas at risk of flooding"},{"location":"rof/#find-areas-at-risk-of-flooding","text":"","title":"Find areas at risk of flooding"},{"location":"rof/#historical-flood-occurrence","text":"The data presents the occurrence of surface water for the selected period. A 100% water occurrence means that all data points in the collection are identified of water (permanent water), 50% implies a location that is inundated half of the time. Locations with a low surface water occurrence have only been inundated for a short period in the whole period, likely caused by flood events. HFO was done based on script from Dr. Ate Poortinga, its written in his blog post https://mygeoblog.com/2017/10/20/historical-flood-occurrence/ GEE script to calculate HFO: https://code.earthengine.google.com/08f671f8be1190b61a1a6175caf5b429","title":"Historical Flood Occurrence"},{"location":"rof/#focal-linear-regression","text":"To get areas at risk, we need to relate the maximum rainfall and historical flood occurrence. Then construct pair data of flood occurrence MEAN by month and maximum of rainfall by month for the period 2000-2019 for all IMERG grids, by performing linear regression between every 5\u00d75 pixels of the two rasters, we would like to create a new raster of SLOPE (a) and INTERCEPT (b) . Each pixel of the SLOPE and INTERCEPT will hold the regression slope and intercept value obtained from linear regression of the corresponding 5\u00d75 pixels that surround that pixel. We develop R script to do focal regression computation: https://github.com/wfpidn/Focal-Regression but the result still not perfect. So we did it manually in Excel spreadsheet using standard formula.","title":"Focal Linear Regression"},{"location":"rof/#will-it-trigger-a-flood","text":"As an example, it is found that for pixel at (6,2) equation that can estimate the probability of flood event is: gi = 0.01888 * Xi - 4.0219 Using the above formula, with the availability of rainfall forecast for the X-days, the gi can be estimated and translated into probability of flood. For example, if the forecast at X-days reaches 300 mm (categorized as Extreme rainfall , exceeding Percentile 96) then: gt = 0.01888 * 300 - 4.0219 gt = 1.6421 The corresponding probability pt = 1/(1+exp(-1.6421) pt = 0.837820 categorized as High likelihood Then ALERT category 9 will release for this event. Combination from Extreme Rainfall and High Likelihood","title":"Will it trigger a flood?"},{"location":"rof/#matrix-for-final-alert","text":"","title":"Matrix for final alert"},{"location":"rsp/","text":"Remote Sensing Precipitation Precipitation can be estimated remotely, either from ground-based weather radars or from satellite. - Inferred indirectly from reflected solar radiation and emitted Infrared radiation by clouds (Passive Remote Sensing). - Estimated from microwave radiation emitted or scattered by surface and precipitation particles (Passive Remote Sensing). - Estimated from back-scattered microwave radiation transmitted by radars (Active Remote Sensing). Currently, lot of satellite-derived precipitation estimate data product available for public: APHRODITE, TRMM, CMORPH, QMORPH, CHIRPS, GPM IMERG, GSMaP, NOAA Reforecast2, GFS, GEFS, PERSIANN, CFS, Gprecip, CRU, TerraClimate, etc. Accurate and consistent rainfall observations are vital for climatological studies in support of better agricultural and water management decision-making and planning. In Indonesia, accurate rainfall estimation with an adequate spatial distribution for the whole country is limited due to sparse rain gauge networks outside Java island. Satellite rainfall products can potentially play a role in increasing the spatial coverage of rainfall estimates; however, their performance needs to be understood across space\u2013time scales and factors relating to their errors. Rain gauge in Indonesia (Source: BMKG) Satellite-derived precipitation estimates and application WFP has been using satellite-derived precipitation estimates for quite sometimes. WFP has clear operational requirements for the information provided by Climate and Remote Sensing Data Sets. Climate shocks are a major driver of food insecurity in the world and cause the majority of WFP beneficiaries. These data sets provide valuable information for: Early Warning of food security shocks. Contextual analysis required for planning of WFP interventions. Climate Change adaptation programmes. As part of VAMPIRE development, WFP Indonesia try to use satellite-derived precipitation estimates to enhanced the rainfall monitoring module, so it\u2019s capable to monitor: Extreme rainfall. Rainfall overland-flow/runoff inundation. Landslide caused by rainfall.","title":"Remote Sensing Precipitation"},{"location":"rsp/#remote-sensing-precipitation","text":"Precipitation can be estimated remotely, either from ground-based weather radars or from satellite. - Inferred indirectly from reflected solar radiation and emitted Infrared radiation by clouds (Passive Remote Sensing). - Estimated from microwave radiation emitted or scattered by surface and precipitation particles (Passive Remote Sensing). - Estimated from back-scattered microwave radiation transmitted by radars (Active Remote Sensing). Currently, lot of satellite-derived precipitation estimate data product available for public: APHRODITE, TRMM, CMORPH, QMORPH, CHIRPS, GPM IMERG, GSMaP, NOAA Reforecast2, GFS, GEFS, PERSIANN, CFS, Gprecip, CRU, TerraClimate, etc. Accurate and consistent rainfall observations are vital for climatological studies in support of better agricultural and water management decision-making and planning. In Indonesia, accurate rainfall estimation with an adequate spatial distribution for the whole country is limited due to sparse rain gauge networks outside Java island. Satellite rainfall products can potentially play a role in increasing the spatial coverage of rainfall estimates; however, their performance needs to be understood across space\u2013time scales and factors relating to their errors. Rain gauge in Indonesia (Source: BMKG)","title":"Remote Sensing Precipitation"},{"location":"rsp/#satellite-derived-precipitation-estimates-and-application","text":"WFP has been using satellite-derived precipitation estimates for quite sometimes. WFP has clear operational requirements for the information provided by Climate and Remote Sensing Data Sets. Climate shocks are a major driver of food insecurity in the world and cause the majority of WFP beneficiaries. These data sets provide valuable information for: Early Warning of food security shocks. Contextual analysis required for planning of WFP interventions. Climate Change adaptation programmes. As part of VAMPIRE development, WFP Indonesia try to use satellite-derived precipitation estimates to enhanced the rainfall monitoring module, so it\u2019s capable to monitor: Extreme rainfall. Rainfall overland-flow/runoff inundation. Landslide caused by rainfall.","title":"Satellite-derived precipitation estimates and application"},{"location":"runoff/","text":"Surface Runoff Accumulation This research and development is still ongoing! Development of the concept analysis is done by Diego NOVOA, a WFP Intern for the period Oct 2020 - Mar 2021. Introduction The method described here is to simulate runoff generation and overland flow from hydrometeorological events. For this, a combination of the Curve Number method developed by the Soil Conservation Service (SCS) to estimate the portion of rainfall that becomes runoff (USDA, 1986) and a GIS-based approach for overland flow proposed by (Ozcelik & Gorokhovich, 2020). A variety of satellite-based products is used as inputs for the method. The Curve Number method provides a widely used simplified procedure to estimate runoff volume. It can be used to calculate peak discharge, hydrographs, and storage volume in reservoirs. The model's simplicity has proven useful, especially for ungauged areas, because its inputs are usually available (Yang Hong et al., 2007), making it the most popular method for estimating surface runoff (Y. Hong & Adler, 2008). An initial attempt at getting global CN numbers from satellite observations and its runoff by Y. Hong & Adler (2008) is used as the base to develop the method for Indonesia. Moreover, there are various available flood models, both commercial and public, with different applications and accuracy depending on the model types and input data. Many are usually based on the hydrology of rivers (Ozcelik & Gorokhovich, 2020). However, simplified alternatives are also usually proposed when not many data is available, computer resources are limited, or when the scale is too large (Bulti & Abebe, 2020), as is Indonesia's case. The model proposed by Ozcelik, is a raster-based discretized and distributed approach for overland flow that can be used in areas where flood boundaries and boundaries conditions cannot be clearly defined, like coastal areas. Empirical and conceptual approaches have the advantage of not needing too many input data, which is ideal for ungauged areas. Such methods lack some spatiotemporal resolution compared to more physically-based approaches, particularly when they are lumped. However, they are more economical in computer resources and input data needed, giving real-time modelling and forecasting possibilities. The model described in this document was developed using R, and is attached.","title":"Surface runoff accumulation"},{"location":"runoff/#surface-runoff-accumulation","text":"This research and development is still ongoing! Development of the concept analysis is done by Diego NOVOA, a WFP Intern for the period Oct 2020 - Mar 2021.","title":"Surface Runoff Accumulation"},{"location":"runoff/#introduction","text":"The method described here is to simulate runoff generation and overland flow from hydrometeorological events. For this, a combination of the Curve Number method developed by the Soil Conservation Service (SCS) to estimate the portion of rainfall that becomes runoff (USDA, 1986) and a GIS-based approach for overland flow proposed by (Ozcelik & Gorokhovich, 2020). A variety of satellite-based products is used as inputs for the method. The Curve Number method provides a widely used simplified procedure to estimate runoff volume. It can be used to calculate peak discharge, hydrographs, and storage volume in reservoirs. The model's simplicity has proven useful, especially for ungauged areas, because its inputs are usually available (Yang Hong et al., 2007), making it the most popular method for estimating surface runoff (Y. Hong & Adler, 2008). An initial attempt at getting global CN numbers from satellite observations and its runoff by Y. Hong & Adler (2008) is used as the base to develop the method for Indonesia. Moreover, there are various available flood models, both commercial and public, with different applications and accuracy depending on the model types and input data. Many are usually based on the hydrology of rivers (Ozcelik & Gorokhovich, 2020). However, simplified alternatives are also usually proposed when not many data is available, computer resources are limited, or when the scale is too large (Bulti & Abebe, 2020), as is Indonesia's case. The model proposed by Ozcelik, is a raster-based discretized and distributed approach for overland flow that can be used in areas where flood boundaries and boundaries conditions cannot be clearly defined, like coastal areas. Empirical and conceptual approaches have the advantage of not needing too many input data, which is ideal for ungauged areas. Such methods lack some spatiotemporal resolution compared to more physically-based approaches, particularly when they are lumped. However, they are more economical in computer resources and input data needed, giving real-time modelling and forecasting possibilities. The model described in this document was developed using R, and is attached.","title":"Introduction"}]}